(function(t){function e(e){for(var n,s,o=e[0],r=e[1],l=e[2],d=0,j=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&j.push(i[s][0]),i[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(j.length)j.shift()();return a.push.apply(a,l||[]),c()}function c(){for(var t,e=0;e<a.length;e++){for(var c=a[e],n=!0,o=1;o<c.length;o++){var r=c[o];0!==i[r]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=c[0]))}return t}var n={},i={app:0},a=[];function s(e){if(n[e])return n[e].exports;var c=n[e]={i:e,l:!1,exports:{}};return t[e].call(c.exports,c,c.exports,s),c.l=!0,c.exports}s.m=t,s.c=n,s.d=function(t,e,c){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(c,n,function(e){return t[e]}.bind(null,n));return c},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=r;a.push([0,"chunk-vendors"]),c()})({0:function(t,e,c){t.exports=c("56d7")},"0ce6":function(t,e,c){},1:function(t,e){},"18e0":function(t,e,c){"use strict";c("2aa1")},2:function(t,e){},"22b2":function(t,e,c){},2984:function(t,e,c){},"2aa1":function(t,e,c){},"38b6":function(t,e,c){"use strict";c("0ce6")},3912:function(t,e,c){"use strict";c("c753")},"454b":function(t,e,c){},"482c":function(t,e,c){},"4a71":function(t,e,c){},"532b":function(t,e,c){"use strict";c("c79e")},"56d7":function(t,e,c){"use strict";c.r(e);c("e260"),c("e6cf"),c("cca6"),c("a79d");var n=c("7a23"),i=c("5502"),a=c("6c02"),s={id:"all"},o=Object(n["j"])("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},null,-1),r={id:"down"};function l(t,e,c,i,a,l){var u=Object(n["L"])("header-page"),d=Object(n["L"])("router-view");return Object(n["D"])(),Object(n["i"])("div",s,[o,Object(n["m"])(u,{id:"headerup"}),Object(n["j"])("div",r,[Object(n["m"])(d,{user:a.data,onLoginSuccess:l.changeLoginStatus},null,8,["user","onLoginSuccess"])])])}var u=c("1da1"),d=(c("96cf"),c("d3b7"),c("99af"),c("4e82"),c("a9e3"),function(t){return Object(n["G"])("data-v-dc438f4c"),t=t(),Object(n["E"])(),t}),j={class:"header"},b=d((function(){return Object(n["j"])("p",null,"Awan Ticket System",-1)}));function p(t,e){var c=Object(n["L"])("center");return Object(n["D"])(),Object(n["i"])("div",j,[Object(n["m"])(c,null,{default:Object(n["V"])((function(){return[b]})),_:1})])}c("c33d");var h=c("d959"),f=c.n(h);const O={},k=f()(O,[["render",p],["__scopeId","data-v-dc438f4c"]]);var m=k,_=c("bf82"),v={provide:function(){return{userlogindata:this.data,alltickets:this.fetchalltickets,all_tickets_page:this.temp_all_tickets_page,jwtToken:this.temp_JWTtoken}},components:{"header-page":m},data:function(){return{data:{id:"",userRole:"",username:""},fetchalltickets:{},tickets_page:"0",temp_all_tickets_page:{undo:0,doing:0,done:0},temp_JWTtoken:""}},methods:{getAllticket:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function c(){var n,i,a;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return n="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets",i=e.data["id"],a=e.data["userRole"],console.log("jwt",t),c.next=5,fetch(n+"?page="+String(e.tickets_page)+"&status=not processed&user_id="+i+"&role="+a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log("undo"),console.log(t["data"]),e.fetchalltickets["undo"]=t["data"],e.temp_all_tickets_page["undo"]=t["total_page"]}));case 5:return c.next=7,fetch(n+"?page="+String(e.tickets_page)+"&status=processing&user_id="+i+"&role="+a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log("doing"),console.log(t),e.fetchalltickets["doing"]=t["data"],e.temp_all_tickets_page["doing"]=t["total_page"]}));case 7:return fetch(n+"?page="+String(e.tickets_page)+"&status=processed&user_id="+i+"&role="+a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log("done"),e.fetchalltickets["done"]=t["data"],e.temp_all_tickets_page["done"]=t["total_page"]})),c.next=10,e.concatTickets();case 10:case"end":return c.stop()}}),c)})))()},changeLoginStatus:function(t,e,c){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("null"==t){i.next=9;break}return i.next=3,n.change_user(t,e,c);case 3:return i.next=5,_["a"].currentSession();case 5:return a=i.sent,n.temp_JWTtoken=a["idToken"]["jwtToken"],i.next=9,n.getAllticket(n.temp_JWTtoken);case 9:case"end":return i.stop()}}),i)})))()},change_user:function(t,e,c){this.data["id"]=t,this.data["username"]=e,this.data["userRole"]=c},getLoginStatus:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_["a"].currentUserInfo();case 3:if(c=e.sent,null==c){e.next=10;break}return console.log("login success"),e.next=8,t.changeLoginStatus(c["attributes"]["custom:id"],c["attributes"]["custom:name"],c["attributes"]["custom:role"]);case 8:e.next=11;break;case 10:console.log("no attribute");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},concatTickets:function(){this.fetchalltickets["customer_doing"]=this.fetchalltickets["doing"],this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].concat(this.fetchalltickets["undo"]),this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].sort((function(t,e){return t.ticket_id>e.ticket_id?1:-1}))},change_page:function(t,e){console.log("change page"),"jump"===t?this.tickets_page=Number(e):"add"===t?this.tickets_page+=1:"sub"===t&&(this.tickets_page-=1)}},created:function(){this.getLoginStatus()}};c("ae6d");const g=f()(v,[["render",l]]);var y=g,w=c("b80d"),T=c("00bd"),P={Auth:{mandatorySignId:!0,regionID:"us-west-2",userPoolId:"us-west-2_rUEXdjmle",userPoolWebClientId:"2mk360n1pl7o40r86rhcmims51",authenticationFlowType:"USER_PASSWORD_AUTH"}},D=P,S=(c("f9e3"),c("1a26"),function(t){return Object(n["G"])("data-v-549b71d6"),t=t(),Object(n["E"])(),t}),C={class:"container"},x={class:"form-div"},E=S((function(){return Object(n["j"])("label",{for:"account",class:"form-label"},"帳號 | Account",-1)})),A={class:"form-div"},I=S((function(){return Object(n["j"])("label",{for:"password",class:"form-label"},"密碼 | Password",-1)})),U={key:0},R=S((function(){return Object(n["j"])("p",{style:{color:"red"}},"帳號密碼錯誤 ",-1)})),J=[R],z={key:1};function V(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",C,[Object(n["j"])("form",null,[Object(n["j"])("div",x,[E,Object(n["W"])(Object(n["j"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.username=t}),type:"text",class:"form-control",id:"account",required:""},null,512),[[n["T"],a.username]])]),Object(n["j"])("div",A,[I,Object(n["W"])(Object(n["j"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.password=t}),type:"password",class:"form-control",id:"password",required:""},null,512),[[n["T"],a.password]])]),Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[2]||(e[2]=Object(n["X"])((function(){return s.getData&&s.getData.apply(s,arguments)}),["prevent"])),type:"submit",class:"form-btn"},"登入 | Login")]),"False"===a.isUser?(Object(n["D"])(),Object(n["i"])("div",U,J)):"True"===a.isUser?(Object(n["D"])(),Object(n["i"])("div",z," 登入成功 ")):Object(n["h"])("",!0)])])}var G={props:{user:{type:String}},data:function(){return{userdata:[],userid:"",checkuser:"",checkpassword:"",username:"",password:"",role:"",isUser:"null"}},methods:{login:function(){try{var t=_["a"].currentAuthenticatedUser();console.log(t)}catch(e){console.log(e)}},getData:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_["a"].signIn(t.username,t.password);case 3:return console.log("登入成功"),e.next=6,_["a"].currentUserInfo();case 6:c=e.sent,null!=c?(t.checkuser=c["attributes"]["custom:name"],t.role=c["attributes"]["custom:role"],t.userid=c["attributes"]["custom:id"],t.loginstatus()):(console.log("登入失敗"),t.isUser="False"),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),console.log("登入失敗"),t.isUser="False";case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},loginstatus:function(){"Engineer"===this.role||"Engineer Supervisor"===this.role?this.$router.push("/home"):this.$router.push("/userhome"),this.$emit("loginSuccess",this.userid,this.checkuser,this.role),this.$store.commit({type:"login_user",userId:this.userid,userName:this.checkuser,userRole:this.role}),this.username="",this.password=""}},emits:["loginSuccess"]};c("ba19");const $=f()(G,[["render",V],["__scopeId","data-v-549b71d6"]]);var W=$,L={class:"template-content"},N={class:"template-left"},M={class:"template-right"};function H(t,e,c,i,a,s){var o=Object(n["L"])("side-bar"),r=Object(n["L"])("router-view");return Object(n["D"])(),Object(n["i"])("div",L,[Object(n["j"])("div",N,[Object(n["m"])(o,{Userdata:c.user,onRedirect_home:e[0]||(e[0]=function(t){return s.againgetticket()})},null,8,["Userdata"])]),Object(n["j"])("div",M,[Object(n["m"])(r,{onAll_ticket_contents:s.transferTicketId},null,8,["onAll_ticket_contents"])])])}var q={id:"sidebar"},F={class:"list-unstyled"},X=Object(n["l"])("Ticket"),Q=Object(n["l"])("Ticket"),B=Object(n["l"])("Ticket"),K=Object(n["l"])("History Ticket"),Y=Object(n["l"])("History Ticket"),Z=Object(n["l"])("Setting"),tt={key:0},et={key:0},ct=Object(n["l"])(" 分派tickets "),nt=Object(n["l"])(" 新增Engineer帳號 "),it=Object(n["l"])("Logout");function at(t,e,c,i,a,s){var o=Object(n["L"])("router-link");return Object(n["D"])(),Object(n["i"])("nav",q,[Object(n["j"])("ul",F,[Object(n["j"])("div",null,[Object(n["j"])("li",null,"Hi, "+Object(n["P"])(c.Userdata["username"])+", "+Object(n["P"])(c.Userdata["userRole"]),1)]),Object(n["j"])("li",null,["Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("a",{key:0,href:"#/home",onClick:e[0]||(e[0]=function(){return s.make_redirect&&s.make_redirect.apply(s,arguments)})},"Home")):"Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("a",{key:1,href:"#/home",onClick:e[1]||(e[1]=function(){return s.make_redirect&&s.make_redirect.apply(s,arguments)})},"Home")):(Object(n["D"])(),Object(n["i"])("a",{key:2,href:"#/userhome",onClick:e[2]||(e[2]=function(){return s.make_redirect&&s.make_redirect.apply(s,arguments)})}," Home"))]),Object(n["j"])("li",null,["Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:0,to:"/home/tickets_table"},{default:Object(n["V"])((function(){return[X]})),_:1})):"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:1,to:"/home/tickets_table"},{default:Object(n["V"])((function(){return[Q]})),_:1})):(Object(n["D"])(),Object(n["g"])(o,{key:2,to:"/userhome/tickets_table"},{default:Object(n["V"])((function(){return[B]})),_:1}))]),Object(n["j"])("li",null,["Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:0,to:"/home/history_ticket"},{default:Object(n["V"])((function(){return[K]})),_:1})):"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:1,to:"/home/history_ticket"},{default:Object(n["V"])((function(){return[Y]})),_:1})):Object(n["h"])("",!0)]),Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/home/settings"},{default:Object(n["V"])((function(){return[Z]})),_:1})]),"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("li",tt,[Object(n["j"])("a",{onClick:e[3]||(e[3]=function(){return s.toggle_myticketSublist&&s.toggle_myticketSublist.apply(s,arguments)})},"Manager"),a.myticketSublist?(Object(n["D"])(),Object(n["i"])("ul",et,[Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/home/admin_dispatch_ticket",style:{"font-size":"15px"}},{default:Object(n["V"])((function(){return[ct]})),_:1})]),Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/home/admin_create_engineer",style:{"font-size":"15px"}},{default:Object(n["V"])((function(){return[nt]})),_:1})])])):Object(n["h"])("",!0)])):Object(n["h"])("",!0),Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/",onClick:s.logout},{default:Object(n["V"])((function(){return[it]})),_:1},8,["onClick"])])])])}var st={emits:["redirect_home"],props:{Userdata:{type:Object}},data:function(){return{myticketSublist:!1,historySublist:!1}},methods:{toTickets_table:function(){this.$router.push("tickets_table")},toTickets:function(){this.$router.push("tickets")},make_redirect:function(){this.$emit("redirect_home"),this.$router.push("/userhome")},toggle_myticketSublist:function(){this.myticketSublist=!this.myticketSublist},logout:function(){_["a"].signOut()}}};c("d8e0");const ot=f()(st,[["render",at],["__scopeId","data-v-5a4e4f61"]]);var rt=ot,lt={emits:["all_ticket_contents","change_page_to_app"],props:{user:{type:Object}},inject:["alltickets","ticketcontent"],provide:function(){return{ticketcontent:this.oneTicket}},components:{"side-bar":rt},data:function(){return{status:!1,all_tickets_content:{topics:["123"]},fetchalltickets:{},oneTicket:{},tickets_page:"0"}},methods:{getAllticket:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets",n=t.user["id"],i=t.user["userRole"],e.next=4,fetch(c+"?page="+t.tickets_page+"&status=not processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("undo"),console.log(e["data"]),t.fetchalltickets["undo"]=e["data"]}));case 4:return e.next=6,fetch(c+"?page="+t.tickets_page+"&status=processing&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("doing"),console.log(e["data"]),t.fetchalltickets["doing"]=e["data"]}));case 6:return fetch(c+"?page="+t.tickets_page+"&status=processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("done"),t.fetchalltickets["done"]=e["data"]})),e.next=9,t.concatTickets();case 9:case"end":return e.stop()}}),e)})))()},concatTickets:function(){this.fetchalltickets["customer_doing"]=this.fetchalltickets["doing"],this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].concat(this.fetchalltickets["undo"]),this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].sort((function(t,e){return t.ticket_id>e.ticket_id?1:-1}))},transferTicketId:function(t,e,c){this.oneTicket["ticketid"]=t,this.oneTicket["title"]=e,this.oneTicket["admin_name"]=c},againgetticket:function(){console.log("reload tickets"),this.getAllticket()}},created:function(){}};c("8218");const ut=f()(lt,[["render",H]]);var dt=ut,jt={class:"thomas-all"},bt={id:"deadline-table",class:"thomas-right"},pt=Object(n["k"])('<li class="deadline-header" data-v-29072796><div class="deadline-tr" data-v-29072796>公告</div><div class="deadline-tr" data-v-29072796><div class="onoffswitch" data-v-29072796><input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" tabindex="0" checked data-v-29072796><label class="onoffswitch-label" for="myonoffswitch" data-v-29072796><span class="onoffswitch-inner" data-v-29072796></span><span class="onoffswitch-switch" data-v-29072796></span></label></div></div></li>',1),ht=["onClick"],ft={class:"deadline-td1"},Ot={class:"deadline-td2"};function kt(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",jt,[Object(n["j"])("div",bt,[pt,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"deadline-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",ft,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",Ot,Object(n["P"])(t["created_at"]),1)],8,ht)})),128))])])}var mt={emits:["all_ticket_contents"],data:function(){return{oneTicket:{},number_ticket:0}},inject:["alltickets"],methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/home/tickets")},change_page:function(){}},mounted:function(){}};c("d5ff");const _t=f()(mt,[["render",kt],["__scopeId","data-v-29072796"]]);var vt=_t,gt={class:"user-myticket"},yt={class:"user-myticket-left"},wt=Object(n["j"])("span",null,"建單",-1),Tt=[wt],Pt={class:"user-myticket-right"},Dt={class:"user-table"},St=Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"user-table-tr1"},"進行中"),Object(n["j"])("div",{class:"user-table-tr2"},"更新時間")],-1),Ct=["onClick"],xt={class:"user-table-td1","data-label":"Job Id"},Et={class:"user-table-td2","data-label":"Payment Status"};function At(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",gt,[Object(n["j"])("div",yt,[Object(n["j"])("button",{onClick:e[0]||(e[0]=Object(n["X"])((function(){return s.changeTemplatePage&&s.changeTemplatePage.apply(s,arguments)}),["prevent"])),class:"user-myticket-btn"},Tt)]),Object(n["j"])("div",Pt,[Object(n["j"])("div",Dt,[St,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["customer_doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",xt,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",Et,Object(n["P"])(t["created_at"]),1)],8,Ct)})),128))])])])}var It={provide:function(){return{ticketcontent:this.oneTicket}},inject:["alltickets"],emits:["changepage","all_ticket_contents"],data:function(){return{oneTicket:{}}},methods:{changeTemplatePage:function(){this.$router.push("/userhome/create_form"),this.$emit("changepage","create-form-page")},viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")}}};c("652e");const Ut=f()(It,[["render",At]]);var Rt=Ut,Jt=function(t){return Object(n["G"])("data-v-05605db4"),t=t(),Object(n["E"])(),t},zt={id:"tickets-content"},Vt={class:"tickets-title"},Gt={key:0,class:"tickets-user-dialogue"},$t={key:1,class:"tickets-thomas-dialogue"},Wt=Jt((function(){return Object(n["j"])("th",null,"回覆內容: ",-1)})),Lt={key:0,class:"tickets-footer"},Nt=Jt((function(){return Object(n["j"])("span",null,"傳送",-1)})),Mt=[Nt];function Ht(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",zt,[Object(n["j"])("div",Vt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("td",null," Ticketname: "+Object(n["P"])(a.myticket["ticket_title"]),1),Object(n["j"])("td",null," Deadline: "+Object(n["P"])(a.myticket["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Customername: "+Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("td",null," 負責人: "+Object(n["P"])(a.myticket["admin_name"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Time: "+Object(n["P"])(a.myticket["created_at"]),1),Object(n["j"])("td",null," 緊急程度: "+Object(n["P"])(a.myticket["urgency"]),1)])])]),(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_ticket_contents,(function(t){return Object(n["D"])(),Object(n["i"])("div",{key:t},["customer"===t["owner"]?(Object(n["D"])(),Object(n["i"])("div",Gt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("th",null,"回覆內容: "+Object(n["P"])(t["ticket_content"]),1)])])])):(Object(n["D"])(),Object(n["i"])("div",$t,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["admin_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Wt,Object(n["j"])("th",null,Object(n["P"])(t["ticket_content"]),1)])])]))])})),128)),"Processed"!==a.myticket["ticket_status"]?(Object(n["D"])(),Object(n["i"])("div",Lt,[Object(n["W"])(Object(n["j"])("textarea",{name:"message",placeholder:"輸入訊息",id:"message_input",cols:"88","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.input_content=t})},null,512),[[n["T"],a.input_content]]),Object(n["j"])("button",{class:"user-ticket-btn",onClick:e[1]||(e[1]=function(t){return s.responseTicket()})},Mt)])):Object(n["h"])("",!0)])}c("e9c4");var qt={props:["ticket"],inject:["alltickets","ticketcontent"],methods:{fetchTicket:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/";e+=String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.myticket=e["data"],console.log(t.myticket)}))},fetch_all_contents:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents?";e+="ticket_id="+String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),t.all_ticket_contents=e["data"]}))},responseTicket:function(){var t=this;console.log(this.input_content);var e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents";console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticket_id:this.ticketcontent["ticketid"],ticket_content:this.input_content,owner:"admin"})}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),alert(e["message"]),t.input_content="",t.reload()}))},reload:function(){console.log("reload"),setTimeout(this.fetch_all_contents(),3e3)}},data:function(){return{myticket:{},input_content:"",all_ticket_contents:{}}},created:function(){this.fetchTicket(),this.fetch_all_contents()}};c("e1cc");const Ft=f()(qt,[["render",Ht],["__scopeId","data-v-05605db4"]]);var Xt=Ft,Qt={id:"create-form-container"},Bt={action:"#",method:"post",id:"contact_form"},Kt={class:"text"},Yt={class:"service-select"},Zt=Object(n["k"])("<option data-v-bc551988>請選擇您需要的服務</option><option data-v-bc551988>1.AWS_EC2</option><option data-v-bc551988>2.AWS_VPC</option><option data-v-bc551988>3.AWS_Route53</option><option data-v-bc551988>4.AWS_Cloudfront</option><option data-v-bc551988>5.AWS_S3</option><option data-v-bc551988>6.Azure_SQL Database</option><option data-v-bc551988>7.Azure_App Service</option><option data-v-bc551988>8.Azure_Azure Active Directory</option><option data-v-bc551988>9.Azure_Azure Maps</option><option data-v-bc551988>10.Azure_VM</option>",11),te=[Zt],ee={class:"message"},ce={class:"submit"};function ne(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Qt,[Object(n["j"])("div",Bt,[Object(n["j"])("div",Kt,[Object(n["W"])(Object(n["j"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.ticket_title=t}),type:"form-text",placeholder:"title",name:"telephone",id:"telephone_input",required:""},null,512),[[n["T"],a.ticket_title]])]),Object(n["j"])("div",Yt,[Object(n["W"])(Object(n["j"])("select",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.type=t})},te,512),[[n["S"],a.type]])]),Object(n["j"])("div",ee,[Object(n["W"])(Object(n["j"])("textarea",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return a.ticket_content=t}),name:"message",placeholder:"I'd like to ask a question",id:"message_input",cols:"30",rows:"5",required:""},null,512),[[n["T"],a.ticket_content]])]),Object(n["j"])("div",ce,[Object(n["j"])("input",{onClick:e[3]||(e[3]=function(){return s.submmitAndCreate&&s.submmitAndCreate.apply(s,arguments)}),type:"submit",value:"Send Message",id:"form_button"})])])])}c("ac1f"),c("1276");var ie={inject:["userlogindata"],data:function(){return{ticket_title:"",ticket_content:"",type:""}},methods:{submmitAndCreate:function(){if(""===this.ticket_title||""===this.ticket_content||""===this.type)return alert("請填好表格"),!1;fetch("https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:this.userlogindata["id"],service_id:this.type.split(".")[0],ticket_title:this.ticket_title,ticket_content:this.ticket_content,urgency:"1"})}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log(t["data"]["message"]),alert(t["data"]["message"])})),this.ticket_title="",this.ticket_content="",this.$router.push("/userhome")},testCreate:function(){var t={customer_id:this.userlogindata["id"],service_id:"3",ticket_title:this.ticket_title,ticket_content:this.ticket_content,urgency:1};console.log(t)}}};c("532b");const ae=f()(ie,[["render",ne],["__scopeId","data-v-bc551988"]]);var se=ae,oe=Object(n["j"])("h3",null," change password ",-1),re=Object(n["j"])("a",null,[Object(n["j"])("p",null,"original password"),Object(n["j"])("input",{type:"password"})],-1),le=Object(n["j"])("a",null,[Object(n["j"])("p",null,"new password"),Object(n["j"])("input",{type:"password"})],-1),ue=Object(n["j"])("p",null,[Object(n["j"])("button",null," 送出 ")],-1),de=[oe,re,le,ue];function je(t,e){return Object(n["D"])(),Object(n["i"])("div",null,de)}const be={},pe=f()(be,[["render",je]]);var he=pe,fe=Object(n["j"])("div",null,[Object(n["j"])("button",null," 更改Engineer 資料 ")],-1);function Oe(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",null,[fe,Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[0]||(e[0]=function(){return s.change_to_dispatch&&s.change_to_dispatch.apply(s,arguments)})}," 分派tickets ")]),Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[1]||(e[1]=function(){return s.change_to_create&&s.change_to_create.apply(s,arguments)})}," 新增Engineer帳號 ")])])}var ke={methods:{change_to_create:function(){this.$router.push("/home/admin_create_engineer")},change_to_dispatch:function(){this.$router.push("/home/admin_dispatch_ticket")}}};const me=f()(ke,[["render",Oe]]);var _e=me,ve=function(t){return Object(n["G"])("data-v-f56523a2"),t=t(),Object(n["E"])(),t},ge={class:"tickets-table"},ye={class:"tickets-table-left"},we=ve((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-left-tr"},"正在處理")],-1)})),Te=["onClick"],Pe={class:"user-table-td1","data-label":"Job Id"},De={class:"tickets-table-right"},Se=ve((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-right-tr"},"已處理")],-1)})),Ce=["onClick"],xe={class:"user-table-td1","data-label":"Job Id"};function Ee(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",ge,[Object(n["j"])("div",ye,[we,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",Pe,Object(n["P"])(t.ticket_title),1)],8,Te)})),128))]),Object(n["j"])("div",De,[Se,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["done"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",xe,Object(n["P"])(t.ticket_title),1)],8,Ce)})),128))])])}var Ae={inject:["alltickets","all_tickets_page"],data:function(){return{doing:[],undo:[]}},methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/home/tickets")}},mounted:function(){}};c("cbab");const Ie=f()(Ae,[["render",Ee],["__scopeId","data-v-f56523a2"]]);var Ue=Ie,Re=function(t){return Object(n["G"])("data-v-2737b0c4"),t=t(),Object(n["E"])(),t},Je={id:"tickets-content"},ze={class:"tickets-title"},Ve={key:0,class:"tickets-user-dialogue"},Ge={key:1,class:"tickets-thomas-dialogue"},$e=Re((function(){return Object(n["j"])("th",null,"回覆內容: ",-1)})),We={key:0,class:"tickets-footer"},Le=Re((function(){return Object(n["j"])("span",null,"傳送",-1)})),Ne=[Le];function Me(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Je,[Object(n["j"])("div",ze,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("td",null," Ticketname: "+Object(n["P"])(a.myticket["ticket_title"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Customername: "+Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("td",null," 負責人: "+Object(n["P"])(a.myticket["admin_name"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Time: "+Object(n["P"])(a.myticket["created_at"]),1)])])]),(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_ticket_contents,(function(t){return Object(n["D"])(),Object(n["i"])("div",{key:t},["customer"===t["owner"]?(Object(n["D"])(),Object(n["i"])("div",Ve,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("th",null,"回覆內容: "+Object(n["P"])(t["ticket_content"]),1)])])])):(Object(n["D"])(),Object(n["i"])("div",Ge,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["admin_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[$e,Object(n["j"])("th",null,Object(n["P"])(t["ticket_content"]),1)])])]))])})),128)),"Processed"!==a.myticket["ticket_status"]?(Object(n["D"])(),Object(n["i"])("div",We,[Object(n["W"])(Object(n["j"])("textarea",{name:"message",placeholder:"輸入訊息",id:"message_input",cols:"88","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.input_content=t})},null,512),[[n["T"],a.input_content]]),Object(n["j"])("button",{class:"user-ticket-btn",onClick:e[1]||(e[1]=function(t){return s.responseTicket()})},Ne)])):Object(n["h"])("",!0)])}var He={inject:["alltickets","ticketcontent"],methods:{fetchTicket:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/";e+=String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.myticket=e["data"],console.log("testtttttttt"),console.log(t.myticket)}))},fetch_all_contents:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents?";e+="ticket_id="+String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),t.all_ticket_contents=e["data"]}))},responseTicket:function(){var t=this;console.log(this.input_content);var e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents";console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticket_id:this.ticketcontent["ticketid"],ticket_content:this.input_content,owner:"customer"})}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),alert(e["message"]),t.input_content="",t.reload()}))},reload:function(){console.log("reload"),setTimeout(this.fetch_all_contents(),3e3)}},data:function(){return{myticket:{},input_content:"",all_ticket_contents:{}}},created:function(){this.fetchTicket(),this.fetch_all_contents()}};c("5f9c");const qe=f()(He,[["render",Me],["__scopeId","data-v-2737b0c4"]]);var Fe=qe,Xe=function(t){return Object(n["G"])("data-v-b83a5ee0"),t=t(),Object(n["E"])(),t},Qe={class:"tickets-table"},Be={class:"tickets-table-left"},Ke=Xe((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-left-tr"},"待處理")],-1)})),Ye=["onClick"],Ze={class:"user-table-td1","data-label":"Job Id"},tc={class:"tickets-table-right"},ec=Xe((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-right-tr"},"已處理")],-1)})),cc=["onClick"],nc={class:"user-table-td1","data-label":"Job Id"};function ic(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Qe,[Object(n["j"])("div",Be,[Ke,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["customer_doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",Ze,Object(n["P"])(t.ticket_title),1)],8,Ye)})),128))]),Object(n["j"])("div",tc,[ec,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["done"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",nc,Object(n["P"])(t.ticket_title),1)],8,cc)})),128))])])}var ac={inject:["alltickets"],data:function(){return{doing:[],done:[]}},methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")}},mounted:function(){}};c("18e0");const sc=f()(ac,[["render",ic],["__scopeId","data-v-b83a5ee0"]]);var oc=sc,rc=function(t){return Object(n["G"])("data-v-c902abc2"),t=t(),Object(n["E"])(),t},lc=rc((function(){return Object(n["j"])("a",null,[Object(n["j"])("p",null,"新增工程師"),Object(n["j"])("p",null,"帳號"),Object(n["j"])("input",{type:"text"}),Object(n["j"])("p",null,"密碼"),Object(n["j"])("input",{type:"password"}),Object(n["j"])("div",{class:"submit"},[Object(n["j"])("input",{type:"submit",value:"確認",id:"form"})])],-1)})),uc=[lc];function dc(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",null,uc)}var jc={};c("b78d");const bc=f()(jc,[["render",dc],["__scopeId","data-v-c902abc2"]]);var pc=bc,hc=function(t){return Object(n["G"])("data-v-21e431aa"),t=t(),Object(n["E"])(),t},fc={class:"dispatch-table"},Oc=Object(n["k"])('<div data-v-21e431aa> 未配單 </div><div class="dispatch-table-row1" data-v-21e431aa><div class="dispatch-table-th1" data-v-21e431aa>ticket title</div><div class="dispatch-table-th2" data-v-21e431aa>deadline</div><div class="dispatch-table-th3" data-v-21e431aa>負責人</div><div class="dispatch-table-th4" data-v-21e431aa></div></div>',2),kc={class:"dispatch-table-td1"},mc={class:"dispatch-table-td2"},_c={class:"dispatch-table-td3"},vc={class:"engineer-select"},gc=["onUpdate:modelValue","onInput"],yc={id:"cityname"},wc=hc((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),Tc=["value"],Pc={class:"dispatch-table-td4"},Dc=["onClick"],Sc=Object(n["k"])('<div data-v-21e431aa> 已配單 </div><div class="dispatch-table-row1" data-v-21e431aa><div class="dispatch-table-th1" data-v-21e431aa>ticket title</div><div class="dispatch-table-th2" data-v-21e431aa>deadline</div><div class="dispatch-table-th3" data-v-21e431aa>負責人</div><div class="dispatch-table-th4" data-v-21e431aa></div><div class="dispatch-table-th4" data-v-21e431aa></div></div>',2),Cc={class:"dispatch-table-td1"},xc={class:"dispatch-table-td2"},Ec={class:"dispatch-table-td3"},Ac={class:"engineer-select"},Ic=["onUpdate:modelValue","onInput"],Uc={id:"cityname"},Rc=hc((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),Jc=["value"],zc={class:"dispatch-table-td4"},Vc=["onClick"],Gc={class:"dispatch-table-td4"},$c=["onClick"],Wc=Object(n["k"])('<div data-v-21e431aa> 已完成 </div><div class="dispatch-table-row1" data-v-21e431aa><div class="dispatch-table-th1" data-v-21e431aa>ticket title</div><div class="dispatch-table-th2" data-v-21e431aa>deadline</div><div class="dispatch-table-th3" data-v-21e431aa>負責人</div><div class="dispatch-table-th4" data-v-21e431aa></div></div>',2),Lc={class:"dispatch-table-td1"},Nc={class:"dispatch-table-td2"},Mc={class:"dispatch-table-td3"},Hc={class:"engineer-select"},qc=["onUpdate:modelValue","onInput"],Fc={id:"cityname"},Xc=hc((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),Qc=["value"],Bc={class:"dispatch-table-td4"},Kc=["onClick"];function Yc(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",fc,[Oc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["not_proccess"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",kc,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",mc,Object(n["P"])(t.created_at),1),Object(n["j"])("div",_c,[Object(n["j"])("div",vc,[Object(n["W"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return s.get_engineer_id(e,t.selected,"not_proccess")}},null,40,gc),[[n["T"],t.selected]]),Object(n["j"])("datalist",yc,[wc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,Tc)})),128))])])]),Object(n["j"])("div",Pc,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,Dc)])])})),128)),Sc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessing"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",Cc,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",xc,Object(n["P"])(t.created_at),1),Object(n["j"])("div",Ec,[Object(n["j"])("div",Ac,[Object(n["l"])(" 現在負責人: "+Object(n["P"])(t.admin_name)+" ",1),Object(n["W"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return s.get_engineer_id(e,t.selected,"proccessing")}},null,40,Ic),[[n["T"],t.selected]]),Object(n["j"])("datalist",Uc,[Rc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,Jc)})),128))])])]),Object(n["j"])("div",zc,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,Vc)]),Object(n["j"])("div",Gc,[Object(n["j"])("input",{value:"Sucess",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processed")}},null,8,$c)])])})),128)),Wc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessed"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",Lc,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",Nc,Object(n["P"])(t.created_at),1),Object(n["j"])("div",Mc,[Object(n["j"])("div",Hc,[Object(n["l"])(" 現在負責人: "+Object(n["P"])(t.admin_name)+" ",1),Object(n["W"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return s.get_engineer_id(e,t.selected,"proccessed")}},null,40,qc),[[n["T"],t.selected]]),Object(n["j"])("datalist",Fc,[Xc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,Qc)})),128))])])]),Object(n["j"])("div",Bc,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,Kc)])])})),128))])}var Zc=c("b85c"),tn={data:function(){return{oneTicket:{},allEngineers:[],selected:"",temp_select_id:0,every_tickets:{not_proccess:[],proccessing:[],proccessed:[]},tickets_page:"0"}},inject:["alltickets"],methods:{dispatch_ticket:function(t,e,c){var n=this;if(void 0===t||""===e||""===c)return alert("請選擇負責人"),!1;console.log(t),console.log(e),console.log(c);var i="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/assign";console.log(i),fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({admin_id:t,ticket_id:e,ticket_status:c})}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log(t),alert(t["data"]["message"]),n.reload()}))},find_engineer:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/users?role=Engineer",console.log(c),e.next=4,fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e["data"]),t.allEngineers=t.allEngineers.concat(e["data"])}));case 4:return e.next=6,t.find_engineer_supervisor();case 6:case"end":return e.stop()}}),e)})))()},find_engineer_supervisor:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/users?role=Engineer Supervisor";console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e["data"]),t.allEngineers=t.allEngineers.concat(e["data"])}))},get_engineer_id:function(t,e,c){var n,i=Object(Zc["a"])(this.allEngineers);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.admin_name===e&&(this.every_tickets[c][t].selected_id=a.admin_id,console.log(this.every_tickets[c][t].selected_id))}}catch(s){i.e(s)}finally{i.f()}},getAlltickets:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets?page="+this.tickets_page+"&status=all&user_id=0&role=0";fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){var c,n=Object(Zc["a"])(e["data"]);try{for(n.s();!(c=n.n()).done;){var i=c.value;"Not Processed"===i["ticket_status"]?t.every_tickets["not_proccess"].push(i):"Processing"===i["ticket_status"]?t.every_tickets["proccessing"].push(i):"Processed"===i["ticket_status"]&&t.every_tickets["proccessed"].push(i)}}catch(a){n.e(a)}finally{n.f()}}))},reload:function(){this.every_tickets={not_proccess:[],proccessing:[],proccessed:[]},setTimeout(this.getAlltickets(),3e3)}},created:function(){this.find_engineer(),this.find_engineer_supervisor(),this.getAlltickets()}};c("38b6");const en=f()(tn,[["render",Yc],["__scopeId","data-v-21e431aa"]]);var cn=en,nn=function(t){return Object(n["G"])("data-v-5ee12056"),t=t(),Object(n["E"])(),t},an={class:"thomas-all"},sn={id:"deadline-table",class:"thomas-right"},on=nn((function(){return Object(n["j"])("li",{class:"deadline-header"},[Object(n["j"])("div",{class:"deadline-tr"},"歷史清單"),Object(n["j"])("div",{class:"deadline -tr"},"Created At")],-1)})),rn=["onClick"],ln={class:"deadline-td1"},un={class:"deadline-td2"},dn={class:"thomas-left"},jn={class:"pagination"},bn=nn((function(){return Object(n["j"])("li",null,[Object(n["j"])("a",{href:"#/home/history_ticket"},"«")],-1)})),pn=["onClick"],hn={href:"#/home/history_ticket"},fn=nn((function(){return Object(n["j"])("li",null,[Object(n["j"])("a",{href:"#/home/history_ticket"},"»")],-1)}));function On(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",an,[Object(n["j"])("div",sn,[on,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessed"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"deadline-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",ln,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",un,Object(n["P"])(t["created_at"]),1)],8,rn)})),128))]),Object(n["j"])("div",dn,[Object(n["j"])("ul",jn,[bn,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_page+1,(function(t){return Object(n["D"])(),Object(n["i"])("li",{key:t,onClick:function(e){return s.change_page(t)}},[Object(n["j"])("a",hn,Object(n["P"])(t),1)],8,pn)})),128)),fn])])])}var kn={emits:["all_ticket_contents"],data:function(){return{oneTicket:{},tickets_page:0,every_tickets:{not_proccess:[],proccessing:[],proccessed:[]},all_page:0,page_class:""}},inject:["alltickets"],methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")},get_All_history_ticket:function(t){var e=this,c="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets?page="+String(t)+"&status=all&user_id=0&role=0";fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(t){var c,n=Object(Zc["a"])(t["data"]);try{for(n.s();!(c=n.n()).done;){var i=c.value;"Not Processed"===i["ticket_status"]?e.every_tickets["not_proccess"].push(i):"Processing"===i["ticket_status"]?e.every_tickets["proccessing"].push(i):"Processed"===i["ticket_status"]&&e.every_tickets["proccessed"].push(i)}}catch(a){n.e(a)}finally{n.f()}console.log(t),e.all_page=t["total_page"],console.log(e.all_page)}))},change_page:function(t){this.get_All_history_ticket(t)}},created:function(){this.get_All_history_ticket(0)}};c("3912");const mn=f()(kn,[["render",On],["__scopeId","data-v-5ee12056"]]);var _n=mn,vn=Object(a["a"])({history:Object(a["b"])(""),routes:[{path:"/",component:W,alias:"/login"},{path:"/home",component:dt,props:function(t){return t.params},children:[{path:"",component:vt},{path:"tickets_table",component:Ue},{path:"tickets",component:Xt},{path:"history_ticket",component:_n},{path:"settings",component:he},{path:"manage",component:_e},{path:"admin_create_engineer",component:pc},{path:"admin_dispatch_ticket",component:cn}]},{path:"/userhome",component:dt,props:function(t){return t.params},children:[{path:"",component:Rt},{path:"tickets_table",component:oc},{path:"create_form",component:se},{path:"tickets",component:Fe},{path:"settings",component:he}]},{path:"/NotFound(.*)",redirect:"/"}]}),gn=Object(n["f"])(y),yn=Object(i["a"])({modules:{},state:function(){return{userId:"",userName:"",userRole:""}},mutations:{login_user:function(t,e){t.userId=e.userid,t.userName=e.userName,t.userRole=e.userRole}}});gn.use(w["a"]),gn.use(vn),T["default"].configure(D),gn.config.productionTip=!1,gn.use(yn),gn.mount("#frameapp")},"5f9c":function(t,e,c){"use strict";c("4a71")},"652e":function(t,e,c){"use strict";c("2984")},"78a1":function(t,e,c){},8218:function(t,e,c){"use strict";c("ac4f")},"8d2e":function(t,e,c){},ac4f:function(t,e,c){},ac5a:function(t,e,c){},ae6d:function(t,e,c){"use strict";c("454b")},b0c3:function(t,e,c){},b22e:function(t,e,c){},b78d:function(t,e,c){"use strict";c("b0c3")},ba19:function(t,e,c){"use strict";c("b22e")},c33d:function(t,e,c){"use strict";c("78a1")},c753:function(t,e,c){},c79e:function(t,e,c){},cbab:function(t,e,c){"use strict";c("22b2")},d5ff:function(t,e,c){"use strict";c("ac5a")},d8e0:function(t,e,c){"use strict";c("8d2e")},e1cc:function(t,e,c){"use strict";c("482c")}});
//# sourceMappingURL=app.eb1bfe8f.js.map