(function(t){function e(e){for(var n,s,o=e[0],r=e[1],l=e[2],d=0,j=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&j.push(i[s][0]),i[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(j.length)j.shift()();return a.push.apply(a,l||[]),c()}function c(){for(var t,e=0;e<a.length;e++){for(var c=a[e],n=!0,o=1;o<c.length;o++){var r=c[o];0!==i[r]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=c[0]))}return t}var n={},i={app:0},a=[];function s(e){if(n[e])return n[e].exports;var c=n[e]={i:e,l:!1,exports:{}};return t[e].call(c.exports,c,c.exports,s),c.l=!0,c.exports}s.m=t,s.c=n,s.d=function(t,e,c){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(c,n,function(e){return t[e]}.bind(null,n));return c},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=r;a.push([0,"chunk-vendors"]),c()})({0:function(t,e,c){t.exports=c("56d7")},"0ce6":function(t,e,c){},1:function(t,e){},"18e0":function(t,e,c){"use strict";c("2aa1")},2:function(t,e){},"22b2":function(t,e,c){},"268d":function(t,e,c){},"2aa1":function(t,e,c){},3484:function(t,e,c){},"38b6":function(t,e,c){"use strict";c("0ce6")},3912:function(t,e,c){"use strict";c("c753")},"482c":function(t,e,c){},"4a71":function(t,e,c){},"532b":function(t,e,c){"use strict";c("c79e")},"56d7":function(t,e,c){"use strict";c.r(e);c("e260"),c("e6cf"),c("cca6"),c("a79d");var n=c("7a23"),i=c("5502"),a=c("6c02"),s={id:"all"},o=Object(n["j"])("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},null,-1),r={id:"down"};function l(t,e,c,i,a,l){var u=Object(n["L"])("header-page"),d=Object(n["L"])("router-view");return Object(n["D"])(),Object(n["i"])("div",s,[o,Object(n["m"])(u,{id:"headerup"}),Object(n["j"])("div",r,[Object(n["m"])(d,{user:a.data,onLoginSuccess:l.changeLoginStatus},null,8,["user","onLoginSuccess"])])])}var u=c("1da1"),d=(c("96cf"),c("d3b7"),c("99af"),c("4e82"),c("a9e3"),function(t){return Object(n["G"])("data-v-dc438f4c"),t=t(),Object(n["E"])(),t}),j={class:"header"},b=d((function(){return Object(n["j"])("p",null,"Awan Ticket System",-1)}));function p(t,e){var c=Object(n["L"])("center");return Object(n["D"])(),Object(n["i"])("div",j,[Object(n["m"])(c,null,{default:Object(n["V"])((function(){return[b]})),_:1})])}c("c33d");var h=c("d959"),f=c.n(h);const O={},k=f()(O,[["render",p],["__scopeId","data-v-dc438f4c"]]);var m=k,_=c("bf82"),v={provide:function(){return{userlogindata:this.data,alltickets:this.fetchalltickets,all_tickets_page:this.temp_all_tickets_page,jwtToken:this.temp_JWTtoken}},components:{"header-page":m},data:function(){return{data:{id:"",userRole:"",username:""},fetchalltickets:{},tickets_page:"0",temp_all_tickets_page:{undo:0,doing:0,done:0},temp_JWTtoken:""}},methods:{getAllticket:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets",n=t.data["id"],i=t.data["userRole"],e.next=4,fetch(c+"?page="+String(t.tickets_page)+"&status=not processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("undo"),console.log(e["data"]),t.fetchalltickets["undo"]=e["data"],t.temp_all_tickets_page["undo"]=e["total_page"]}));case 4:return e.next=6,fetch(c+"?page="+String(t.tickets_page)+"&status=processing&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("doing"),console.log(e),t.fetchalltickets["doing"]=e["data"],t.temp_all_tickets_page["doing"]=e["total_page"]}));case 6:return fetch(c+"?page="+String(t.tickets_page)+"&status=processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("done"),t.fetchalltickets["done"]=e["data"],t.temp_all_tickets_page["done"]=e["total_page"]})),e.next=9,t.concatTickets();case 9:case"end":return e.stop()}}),e)})))()},changeLoginStatus:function(t,e,c){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("null"==t){i.next=5;break}return i.next=3,n.change_user(t,e,c);case 3:return i.next=5,n.getAllticket();case 5:case"end":return i.stop()}}),i)})))()},change_user:function(t,e,c){this.data["id"]=t,this.data["username"]=e,this.data["userRole"]=c},getLoginStatus:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_["a"].currentUserInfo();case 3:if(c=e.sent,null==c){e.next=10;break}return e.next=7,t.changeLoginStatus(c["attributes"]["custom:id"],c["attributes"]["custom:name"],c["attributes"]["custom:role"]);case 7:console.log("login success"),e.next=11;break;case 10:console.log("no attribute");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},concatTickets:function(){this.fetchalltickets["customer_doing"]=this.fetchalltickets["doing"],this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].concat(this.fetchalltickets["undo"]),this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].sort((function(t,e){return t.ticket_id>e.ticket_id?1:-1}))},change_page:function(t,e){console.log("change page"),"jump"===t?this.tickets_page=Number(e):"add"===t?this.tickets_page+=1:"sub"===t&&(this.tickets_page-=1)}},created:function(){this.getLoginStatus()}};c("5882");const g=f()(v,[["render",l]]);var y=g,w=c("b80d"),T=c("00bd"),P={Auth:{mandatorySignId:!0,regionID:"us-west-2",userPoolId:"us-west-2_rUEXdjmle",userPoolWebClientId:"2mk360n1pl7o40r86rhcmims51",authenticationFlowType:"USER_PASSWORD_AUTH"}},D=P,C=(c("f9e3"),c("1a26"),function(t){return Object(n["G"])("data-v-27061e12"),t=t(),Object(n["E"])(),t}),S={class:"container"},x={class:"form-div"},E=C((function(){return Object(n["j"])("label",{for:"account",class:"form-label"},"帳號 | Account",-1)})),A={class:"form-div"},U=C((function(){return Object(n["j"])("label",{for:"password",class:"form-label"},"密碼 | Password",-1)})),I={key:0},J=C((function(){return Object(n["j"])("p",{style:{color:"red"}},"帳號密碼錯誤 ",-1)})),R=[J],V={key:1};function G(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",S,[Object(n["j"])("form",null,[Object(n["j"])("div",x,[E,Object(n["W"])(Object(n["j"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.username=t}),type:"text",class:"form-control",id:"account",required:""},null,512),[[n["T"],a.username]])]),Object(n["j"])("div",A,[U,Object(n["W"])(Object(n["j"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.password=t}),type:"password",class:"form-control",id:"password",required:""},null,512),[[n["T"],a.password]])]),Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[2]||(e[2]=Object(n["X"])((function(){return s.getData&&s.getData.apply(s,arguments)}),["prevent"])),type:"submit",class:"form-btn"},"登入 | Login")]),"False"===a.isUser?(Object(n["D"])(),Object(n["i"])("div",I,R)):"True"===a.isUser?(Object(n["D"])(),Object(n["i"])("div",V," 登入成功 ")):Object(n["h"])("",!0)])])}var z={props:{user:{type:String}},data:function(){return{userdata:[],userid:"",checkuser:"",checkpassword:"",username:"",password:"",role:"",isUser:"null"}},methods:{login:function(){try{var t=_["a"].currentAuthenticatedUser();console.log(t)}catch(e){console.log(e)}},getData:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_["a"].signIn(t.username,t.password);case 3:return console.log("登入成功"),e.next=6,_["a"].currentUserInfo();case 6:c=e.sent,null!=c?(t.checkuser=c["attributes"]["custom:name"],t.role=c["attributes"]["custom:role"],t.userid=c["attributes"]["custom:id"],t.loginstatus()):(console.log("登入失敗"),t.isUser="False"),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),console.log("登入失敗"),t.isUser="False";case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},loginstatus:function(){"Engineer"===this.role||"Engineer Supervisor"===this.role?this.$router.push("/home"):this.$router.push("/userhome"),this.$emit("loginSuccess",this.userid,this.checkuser,this.role),this.username="",this.password=""}},emits:["loginSuccess"]};c("a5bf");const $=f()(z,[["render",G],["__scopeId","data-v-27061e12"]]);var W=$,L={class:"template-content"},M={class:"template-left"},N={class:"template-right"};function H(t,e,c,i,a,s){var o=Object(n["L"])("side-bar"),r=Object(n["L"])("router-view");return Object(n["D"])(),Object(n["i"])("div",L,[Object(n["j"])("div",M,[Object(n["m"])(o,{Userdata:c.user,onRedirect_home:e[0]||(e[0]=function(t){return s.againgetticket()})},null,8,["Userdata"])]),Object(n["j"])("div",N,[Object(n["m"])(r,{onAll_ticket_contents:s.transferTicketId},null,8,["onAll_ticket_contents"])])])}var q={id:"sidebar"},F={class:"list-unstyled"},X=Object(n["l"])("Ticket"),Q=Object(n["l"])("Ticket"),B=Object(n["l"])("Ticket"),K=Object(n["l"])("History Ticket"),Y=Object(n["l"])("History Ticket"),Z=Object(n["l"])("Setting"),tt={key:0},et={key:0},ct=Object(n["l"])(" 分派tickets "),nt=Object(n["l"])(" 新增Engineer帳號 "),it=Object(n["l"])("Logout");function at(t,e,c,i,a,s){var o=Object(n["L"])("router-link");return Object(n["D"])(),Object(n["i"])("nav",q,[Object(n["j"])("ul",F,[Object(n["j"])("div",null,[Object(n["j"])("li",null,"Hi, "+Object(n["P"])(c.Userdata["username"])+", "+Object(n["P"])(c.Userdata["userRole"]),1)]),Object(n["j"])("li",null,["Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("a",{key:0,href:"#/home",onClick:e[0]||(e[0]=function(){return s.make_redirect&&s.make_redirect.apply(s,arguments)})},"Home")):"Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("a",{key:1,href:"#/home",onClick:e[1]||(e[1]=function(){return s.make_redirect&&s.make_redirect.apply(s,arguments)})},"Home")):(Object(n["D"])(),Object(n["i"])("a",{key:2,href:"#/userhome",onClick:e[2]||(e[2]=function(){return s.make_redirect&&s.make_redirect.apply(s,arguments)})}," Home"))]),Object(n["j"])("li",null,["Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:0,to:"/home/tickets_table"},{default:Object(n["V"])((function(){return[X]})),_:1})):"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:1,to:"/home/tickets_table"},{default:Object(n["V"])((function(){return[Q]})),_:1})):(Object(n["D"])(),Object(n["g"])(o,{key:2,to:"/userhome/tickets_table"},{default:Object(n["V"])((function(){return[B]})),_:1}))]),Object(n["j"])("li",null,["Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:0,to:"/home/history_ticket"},{default:Object(n["V"])((function(){return[K]})),_:1})):"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:1,to:"/home/history_ticket"},{default:Object(n["V"])((function(){return[Y]})),_:1})):Object(n["h"])("",!0)]),Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/home/settings"},{default:Object(n["V"])((function(){return[Z]})),_:1})]),"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("li",tt,[Object(n["j"])("a",{onClick:e[3]||(e[3]=function(){return s.toggle_myticketSublist&&s.toggle_myticketSublist.apply(s,arguments)})},"Manager"),a.myticketSublist?(Object(n["D"])(),Object(n["i"])("ul",et,[Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/home/admin_dispatch_ticket",style:{"font-size":"15px"}},{default:Object(n["V"])((function(){return[ct]})),_:1})]),Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/home/admin_create_engineer",style:{"font-size":"15px"}},{default:Object(n["V"])((function(){return[nt]})),_:1})])])):Object(n["h"])("",!0)])):Object(n["h"])("",!0),Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/",onClick:s.logout},{default:Object(n["V"])((function(){return[it]})),_:1},8,["onClick"])])])])}var st={emits:["redirect_home"],props:{Userdata:{type:Object}},data:function(){return{myticketSublist:!1,historySublist:!1}},methods:{toTickets_table:function(){this.$router.push("tickets_table")},toTickets:function(){this.$router.push("tickets")},make_redirect:function(){this.$emit("redirect_home"),this.$router.push("/userhome")},toggle_myticketSublist:function(){this.myticketSublist=!this.myticketSublist},logout:function(){_["a"].signOut()}}};c("d8e0");const ot=f()(st,[["render",at],["__scopeId","data-v-5a4e4f61"]]);var rt=ot,lt={emits:["all_ticket_contents","change_page_to_app"],props:{user:{type:Object}},inject:["alltickets","ticketcontent"],provide:function(){return{ticketcontent:this.oneTicket}},components:{"side-bar":rt},data:function(){return{status:!1,all_tickets_content:{topics:["123"]},fetchalltickets:{},oneTicket:{},tickets_page:"0"}},methods:{getAllticket:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets",n=t.user["id"],i=t.user["userRole"],e.next=4,fetch(c+"?page="+t.tickets_page+"&status=not processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("undo"),console.log(e["data"]),t.fetchalltickets["undo"]=e["data"]}));case 4:return e.next=6,fetch(c+"?page="+t.tickets_page+"&status=processing&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("doing"),console.log(e["data"]),t.fetchalltickets["doing"]=e["data"]}));case 6:return fetch(c+"?page="+t.tickets_page+"&status=processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("done"),t.fetchalltickets["done"]=e["data"]})),e.next=9,t.concatTickets();case 9:case"end":return e.stop()}}),e)})))()},concatTickets:function(){this.fetchalltickets["customer_doing"]=this.fetchalltickets["doing"],this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].concat(this.fetchalltickets["undo"]),this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].sort((function(t,e){return t.ticket_id>e.ticket_id?1:-1}))},transferTicketId:function(t,e,c){this.oneTicket["ticketid"]=t,this.oneTicket["title"]=e,this.oneTicket["admin_name"]=c},againgetticket:function(){console.log("reload tickets"),this.getAllticket()}},created:function(){}};c("747b");const ut=f()(lt,[["render",H]]);var dt=ut,jt=function(t){return Object(n["G"])("data-v-6b004925"),t=t(),Object(n["E"])(),t},bt={class:"thomas-all"},pt={id:"deadline-table",class:"thomas-right"},ht=Object(n["k"])('<li class="deadline-header" data-v-6b004925><div class="deadline-tr" data-v-6b004925>公告</div><div class="deadline -tr" data-v-6b004925>tag</div><div class="deadline-tr" data-v-6b004925><div class="onoffswitch" data-v-6b004925><input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" tabindex="0" checked data-v-6b004925><label class="onoffswitch-label" for="myonoffswitch" data-v-6b004925><span class="onoffswitch-inner" data-v-6b004925></span><span class="onoffswitch-switch" data-v-6b004925></span></label></div></div></li>',1),ft=["onClick"],Ot={class:"deadline-td1"},kt=jt((function(){return Object(n["j"])("div",{class:"deadline-td2"},"werwtege",-1)})),mt={class:"deadline-td3"};function _t(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",bt,[Object(n["j"])("div",pt,[ht,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"deadline-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",Ot,Object(n["P"])(t["ticket_title"]),1),kt,Object(n["j"])("div",mt,Object(n["P"])(t["created_at"]),1)],8,ft)})),128))])])}var vt={emits:["all_ticket_contents"],data:function(){return{oneTicket:{},number_ticket:0}},inject:["alltickets"],methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/home/tickets")},change_page:function(){}},mounted:function(){}};c("f8f9");const gt=f()(vt,[["render",_t],["__scopeId","data-v-6b004925"]]);var yt=gt,wt={class:"user-myticket"},Tt={class:"user-myticket-left"},Pt=Object(n["j"])("span",null,"建單",-1),Dt=[Pt],Ct={class:"user-myticket-right"},St={class:"user-table"},xt=Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"user-table-tr1"},"進行中"),Object(n["j"])("div",{class:"user-table-tr1"},"tag"),Object(n["j"])("div",{class:"user-table-tr2"},"更新時間")],-1),Et=["onClick"],At={class:"user-table-td1","data-label":"Job Id"},Ut=Object(n["j"])("div",{class:"user-table-td2","data-label":""},"tauhoijg",-1),It={class:"user-table-td3","data-label":"Payment Status"};function Jt(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",wt,[Object(n["j"])("div",Tt,[Object(n["j"])("button",{onClick:e[0]||(e[0]=Object(n["X"])((function(){return s.changeTemplatePage&&s.changeTemplatePage.apply(s,arguments)}),["prevent"])),class:"user-myticket-btn"},Dt)]),Object(n["j"])("div",Ct,[Object(n["j"])("div",St,[xt,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["customer_doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",At,Object(n["P"])(t["ticket_title"]),1),Ut,Object(n["j"])("div",It,Object(n["P"])(t["created_at"]),1)],8,Et)})),128))])])])}var Rt={provide:function(){return{ticketcontent:this.oneTicket}},inject:["alltickets"],emits:["changepage","all_ticket_contents"],data:function(){return{oneTicket:{}}},methods:{changeTemplatePage:function(){this.$router.push("/userhome/create_form"),this.$emit("changepage","create-form-page")},viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")}}};c("eac5");const Vt=f()(Rt,[["render",Jt]]);var Gt=Vt,zt=function(t){return Object(n["G"])("data-v-05605db4"),t=t(),Object(n["E"])(),t},$t={id:"tickets-content"},Wt={class:"tickets-title"},Lt={key:0,class:"tickets-user-dialogue"},Mt={key:1,class:"tickets-thomas-dialogue"},Nt=zt((function(){return Object(n["j"])("th",null,"回覆內容: ",-1)})),Ht={key:0,class:"tickets-footer"},qt=zt((function(){return Object(n["j"])("span",null,"傳送",-1)})),Ft=[qt];function Xt(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",$t,[Object(n["j"])("div",Wt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("td",null," Ticketname: "+Object(n["P"])(a.myticket["ticket_title"]),1),Object(n["j"])("td",null," Deadline: "+Object(n["P"])(a.myticket["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Customername: "+Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("td",null," 負責人: "+Object(n["P"])(a.myticket["admin_name"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Time: "+Object(n["P"])(a.myticket["created_at"]),1),Object(n["j"])("td",null," 緊急程度: "+Object(n["P"])(a.myticket["urgency"]),1)])])]),(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_ticket_contents,(function(t){return Object(n["D"])(),Object(n["i"])("div",{key:t},["customer"===t["owner"]?(Object(n["D"])(),Object(n["i"])("div",Lt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("th",null,"回覆內容: "+Object(n["P"])(t["ticket_content"]),1)])])])):(Object(n["D"])(),Object(n["i"])("div",Mt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["admin_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Nt,Object(n["j"])("th",null,Object(n["P"])(t["ticket_content"]),1)])])]))])})),128)),"Processed"!==a.myticket["ticket_status"]?(Object(n["D"])(),Object(n["i"])("div",Ht,[Object(n["W"])(Object(n["j"])("textarea",{name:"message",placeholder:"輸入訊息",id:"message_input",cols:"88","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.input_content=t})},null,512),[[n["T"],a.input_content]]),Object(n["j"])("button",{class:"user-ticket-btn",onClick:e[1]||(e[1]=function(t){return s.responseTicket()})},Ft)])):Object(n["h"])("",!0)])}c("e9c4");var Qt={props:["ticket"],inject:["alltickets","ticketcontent"],methods:{fetchTicket:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/";e+=String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.myticket=e["data"],console.log(t.myticket)}))},fetch_all_contents:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents?";e+="ticket_id="+String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),t.all_ticket_contents=e["data"]}))},responseTicket:function(){var t=this;console.log(this.input_content);var e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents";console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticket_id:this.ticketcontent["ticketid"],ticket_content:this.input_content,owner:"admin"})}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),alert(e["message"]),t.input_content="",t.reload()}))},reload:function(){console.log("reload"),setTimeout(this.fetch_all_contents(),3e3)}},data:function(){return{myticket:{},input_content:"",all_ticket_contents:{}}},created:function(){this.fetchTicket(),this.fetch_all_contents()}};c("e1cc");const Bt=f()(Qt,[["render",Xt],["__scopeId","data-v-05605db4"]]);var Kt=Bt,Yt={id:"create-form-container"},Zt={action:"#",method:"post",id:"contact_form"},te={class:"text"},ee={class:"service-select"},ce=Object(n["k"])("<option data-v-bc551988>請選擇您需要的服務</option><option data-v-bc551988>1.AWS_EC2</option><option data-v-bc551988>2.AWS_VPC</option><option data-v-bc551988>3.AWS_Route53</option><option data-v-bc551988>4.AWS_Cloudfront</option><option data-v-bc551988>5.AWS_S3</option><option data-v-bc551988>6.Azure_SQL Database</option><option data-v-bc551988>7.Azure_App Service</option><option data-v-bc551988>8.Azure_Azure Active Directory</option><option data-v-bc551988>9.Azure_Azure Maps</option><option data-v-bc551988>10.Azure_VM</option>",11),ne=[ce],ie={class:"message"},ae={class:"submit"};function se(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Yt,[Object(n["j"])("div",Zt,[Object(n["j"])("div",te,[Object(n["W"])(Object(n["j"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.ticket_title=t}),type:"form-text",placeholder:"title",name:"telephone",id:"telephone_input",required:""},null,512),[[n["T"],a.ticket_title]])]),Object(n["j"])("div",ee,[Object(n["W"])(Object(n["j"])("select",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.type=t})},ne,512),[[n["S"],a.type]])]),Object(n["j"])("div",ie,[Object(n["W"])(Object(n["j"])("textarea",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return a.ticket_content=t}),name:"message",placeholder:"I'd like to ask a question",id:"message_input",cols:"30",rows:"5",required:""},null,512),[[n["T"],a.ticket_content]])]),Object(n["j"])("div",ae,[Object(n["j"])("input",{onClick:e[3]||(e[3]=function(){return s.submmitAndCreate&&s.submmitAndCreate.apply(s,arguments)}),type:"submit",value:"Send Message",id:"form_button"})])])])}c("ac1f"),c("1276");var oe={inject:["userlogindata"],data:function(){return{ticket_title:"",ticket_content:"",type:""}},methods:{submmitAndCreate:function(){if(""===this.ticket_title||""===this.ticket_content||""===this.type)return alert("請填好表格"),!1;fetch("https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:this.userlogindata["id"],service_id:this.type.split(".")[0],ticket_title:this.ticket_title,ticket_content:this.ticket_content,urgency:"1"})}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log(t["data"]["message"]),alert(t["data"]["message"])})),this.ticket_title="",this.ticket_content="",this.$router.push("/userhome")},testCreate:function(){var t={customer_id:this.userlogindata["id"],service_id:"3",ticket_title:this.ticket_title,ticket_content:this.ticket_content,urgency:1};console.log(t)}}};c("532b");const re=f()(oe,[["render",se],["__scopeId","data-v-bc551988"]]);var le=re,ue=Object(n["j"])("h3",null," change password ",-1),de=Object(n["j"])("a",null,[Object(n["j"])("p",null,"original password"),Object(n["j"])("input",{type:"password"})],-1),je=Object(n["j"])("a",null,[Object(n["j"])("p",null,"new password"),Object(n["j"])("input",{type:"password"})],-1),be=Object(n["j"])("p",null,[Object(n["j"])("button",null," 送出 ")],-1),pe=[ue,de,je,be];function he(t,e){return Object(n["D"])(),Object(n["i"])("div",null,pe)}const fe={},Oe=f()(fe,[["render",he]]);var ke=Oe,me=Object(n["j"])("div",null,[Object(n["j"])("button",null," 更改Engineer 資料 ")],-1);function _e(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",null,[me,Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[0]||(e[0]=function(){return s.change_to_dispatch&&s.change_to_dispatch.apply(s,arguments)})}," 分派tickets ")]),Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[1]||(e[1]=function(){return s.change_to_create&&s.change_to_create.apply(s,arguments)})}," 新增Engineer帳號 ")])])}var ve={methods:{change_to_create:function(){this.$router.push("/home/admin_create_engineer")},change_to_dispatch:function(){this.$router.push("/home/admin_dispatch_ticket")}}};const ge=f()(ve,[["render",_e]]);var ye=ge,we=function(t){return Object(n["G"])("data-v-f56523a2"),t=t(),Object(n["E"])(),t},Te={class:"tickets-table"},Pe={class:"tickets-table-left"},De=we((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-left-tr"},"正在處理")],-1)})),Ce=["onClick"],Se={class:"user-table-td1","data-label":"Job Id"},xe={class:"tickets-table-right"},Ee=we((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-right-tr"},"已處理")],-1)})),Ae=["onClick"],Ue={class:"user-table-td1","data-label":"Job Id"};function Ie(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Te,[Object(n["j"])("div",Pe,[De,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",Se,Object(n["P"])(t.ticket_title),1)],8,Ce)})),128))]),Object(n["j"])("div",xe,[Ee,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["done"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",Ue,Object(n["P"])(t.ticket_title),1)],8,Ae)})),128))])])}var Je={inject:["alltickets","all_tickets_page"],data:function(){return{doing:[],undo:[]}},methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/home/tickets")}},mounted:function(){}};c("cbab");const Re=f()(Je,[["render",Ie],["__scopeId","data-v-f56523a2"]]);var Ve=Re,Ge=function(t){return Object(n["G"])("data-v-2737b0c4"),t=t(),Object(n["E"])(),t},ze={id:"tickets-content"},$e={class:"tickets-title"},We={key:0,class:"tickets-user-dialogue"},Le={key:1,class:"tickets-thomas-dialogue"},Me=Ge((function(){return Object(n["j"])("th",null,"回覆內容: ",-1)})),Ne={key:0,class:"tickets-footer"},He=Ge((function(){return Object(n["j"])("span",null,"傳送",-1)})),qe=[He];function Fe(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",ze,[Object(n["j"])("div",$e,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("td",null," Ticketname: "+Object(n["P"])(a.myticket["ticket_title"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Customername: "+Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("td",null," 負責人: "+Object(n["P"])(a.myticket["admin_name"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Time: "+Object(n["P"])(a.myticket["created_at"]),1)])])]),(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_ticket_contents,(function(t){return Object(n["D"])(),Object(n["i"])("div",{key:t},["customer"===t["owner"]?(Object(n["D"])(),Object(n["i"])("div",We,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("th",null,"回覆內容: "+Object(n["P"])(t["ticket_content"]),1)])])])):(Object(n["D"])(),Object(n["i"])("div",Le,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["admin_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Me,Object(n["j"])("th",null,Object(n["P"])(t["ticket_content"]),1)])])]))])})),128)),"Processed"!==a.myticket["ticket_status"]?(Object(n["D"])(),Object(n["i"])("div",Ne,[Object(n["W"])(Object(n["j"])("textarea",{name:"message",placeholder:"輸入訊息",id:"message_input",cols:"88","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.input_content=t})},null,512),[[n["T"],a.input_content]]),Object(n["j"])("button",{class:"user-ticket-btn",onClick:e[1]||(e[1]=function(t){return s.responseTicket()})},qe)])):Object(n["h"])("",!0)])}var Xe={inject:["alltickets","ticketcontent"],methods:{fetchTicket:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/";e+=String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.myticket=e["data"],console.log("testtttttttt"),console.log(t.myticket)}))},fetch_all_contents:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents?";e+="ticket_id="+String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),t.all_ticket_contents=e["data"]}))},responseTicket:function(){var t=this;console.log(this.input_content);var e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents";console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticket_id:this.ticketcontent["ticketid"],ticket_content:this.input_content,owner:"customer"})}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),alert(e["message"]),t.input_content="",t.reload()}))},reload:function(){console.log("reload"),setTimeout(this.fetch_all_contents(),3e3)}},data:function(){return{myticket:{},input_content:"",all_ticket_contents:{}}},created:function(){this.fetchTicket(),this.fetch_all_contents()}};c("5f9c");const Qe=f()(Xe,[["render",Fe],["__scopeId","data-v-2737b0c4"]]);var Be=Qe,Ke=function(t){return Object(n["G"])("data-v-b83a5ee0"),t=t(),Object(n["E"])(),t},Ye={class:"tickets-table"},Ze={class:"tickets-table-left"},tc=Ke((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-left-tr"},"待處理")],-1)})),ec=["onClick"],cc={class:"user-table-td1","data-label":"Job Id"},nc={class:"tickets-table-right"},ic=Ke((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-right-tr"},"已處理")],-1)})),ac=["onClick"],sc={class:"user-table-td1","data-label":"Job Id"};function oc(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Ye,[Object(n["j"])("div",Ze,[tc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["customer_doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",cc,Object(n["P"])(t.ticket_title),1)],8,ec)})),128))]),Object(n["j"])("div",nc,[ic,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["done"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",sc,Object(n["P"])(t.ticket_title),1)],8,ac)})),128))])])}var rc={inject:["alltickets"],data:function(){return{doing:[],done:[]}},methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")}},mounted:function(){}};c("18e0");const lc=f()(rc,[["render",oc],["__scopeId","data-v-b83a5ee0"]]);var uc=lc,dc=function(t){return Object(n["G"])("data-v-c902abc2"),t=t(),Object(n["E"])(),t},jc=dc((function(){return Object(n["j"])("a",null,[Object(n["j"])("p",null,"新增工程師"),Object(n["j"])("p",null,"帳號"),Object(n["j"])("input",{type:"text"}),Object(n["j"])("p",null,"密碼"),Object(n["j"])("input",{type:"password"}),Object(n["j"])("div",{class:"submit"},[Object(n["j"])("input",{type:"submit",value:"確認",id:"form"})])],-1)})),bc=[jc];function pc(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",null,bc)}var hc={};c("b78d");const fc=f()(hc,[["render",pc],["__scopeId","data-v-c902abc2"]]);var Oc=fc,kc=function(t){return Object(n["G"])("data-v-21e431aa"),t=t(),Object(n["E"])(),t},mc={class:"dispatch-table"},_c=Object(n["k"])('<div data-v-21e431aa> 未配單 </div><div class="dispatch-table-row1" data-v-21e431aa><div class="dispatch-table-th1" data-v-21e431aa>ticket title</div><div class="dispatch-table-th2" data-v-21e431aa>deadline</div><div class="dispatch-table-th3" data-v-21e431aa>負責人</div><div class="dispatch-table-th4" data-v-21e431aa></div></div>',2),vc={class:"dispatch-table-td1"},gc={class:"dispatch-table-td2"},yc={class:"dispatch-table-td3"},wc={class:"engineer-select"},Tc=["onUpdate:modelValue","onInput"],Pc={id:"cityname"},Dc=kc((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),Cc=["value"],Sc={class:"dispatch-table-td4"},xc=["onClick"],Ec=Object(n["k"])('<div data-v-21e431aa> 已配單 </div><div class="dispatch-table-row1" data-v-21e431aa><div class="dispatch-table-th1" data-v-21e431aa>ticket title</div><div class="dispatch-table-th2" data-v-21e431aa>deadline</div><div class="dispatch-table-th3" data-v-21e431aa>負責人</div><div class="dispatch-table-th4" data-v-21e431aa></div><div class="dispatch-table-th4" data-v-21e431aa></div></div>',2),Ac={class:"dispatch-table-td1"},Uc={class:"dispatch-table-td2"},Ic={class:"dispatch-table-td3"},Jc={class:"engineer-select"},Rc=["onUpdate:modelValue","onInput"],Vc={id:"cityname"},Gc=kc((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),zc=["value"],$c={class:"dispatch-table-td4"},Wc=["onClick"],Lc={class:"dispatch-table-td4"},Mc=["onClick"],Nc=Object(n["k"])('<div data-v-21e431aa> 已完成 </div><div class="dispatch-table-row1" data-v-21e431aa><div class="dispatch-table-th1" data-v-21e431aa>ticket title</div><div class="dispatch-table-th2" data-v-21e431aa>deadline</div><div class="dispatch-table-th3" data-v-21e431aa>負責人</div><div class="dispatch-table-th4" data-v-21e431aa></div></div>',2),Hc={class:"dispatch-table-td1"},qc={class:"dispatch-table-td2"},Fc={class:"dispatch-table-td3"},Xc={class:"engineer-select"},Qc=["onUpdate:modelValue","onInput"],Bc={id:"cityname"},Kc=kc((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),Yc=["value"],Zc={class:"dispatch-table-td4"},tn=["onClick"];function en(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",mc,[_c,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["not_proccess"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",vc,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",gc,Object(n["P"])(t.created_at),1),Object(n["j"])("div",yc,[Object(n["j"])("div",wc,[Object(n["W"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return s.get_engineer_id(e,t.selected,"not_proccess")}},null,40,Tc),[[n["T"],t.selected]]),Object(n["j"])("datalist",Pc,[Dc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,Cc)})),128))])])]),Object(n["j"])("div",Sc,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,xc)])])})),128)),Ec,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessing"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",Ac,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",Uc,Object(n["P"])(t.created_at),1),Object(n["j"])("div",Ic,[Object(n["j"])("div",Jc,[Object(n["l"])(" 現在負責人: "+Object(n["P"])(t.admin_name)+" ",1),Object(n["W"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return s.get_engineer_id(e,t.selected,"proccessing")}},null,40,Rc),[[n["T"],t.selected]]),Object(n["j"])("datalist",Vc,[Gc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,zc)})),128))])])]),Object(n["j"])("div",$c,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,Wc)]),Object(n["j"])("div",Lc,[Object(n["j"])("input",{value:"Sucess",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processed")}},null,8,Mc)])])})),128)),Nc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessed"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",Hc,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",qc,Object(n["P"])(t.created_at),1),Object(n["j"])("div",Fc,[Object(n["j"])("div",Xc,[Object(n["l"])(" 現在負責人: "+Object(n["P"])(t.admin_name)+" ",1),Object(n["W"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return s.get_engineer_id(e,t.selected,"proccessed")}},null,40,Qc),[[n["T"],t.selected]]),Object(n["j"])("datalist",Bc,[Kc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,Yc)})),128))])])]),Object(n["j"])("div",Zc,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,tn)])])})),128))])}var cn=c("b85c"),nn={data:function(){return{oneTicket:{},allEngineers:[],selected:"",temp_select_id:0,every_tickets:{not_proccess:[],proccessing:[],proccessed:[]},tickets_page:"0"}},inject:["alltickets"],methods:{dispatch_ticket:function(t,e,c){var n=this;if(void 0===t||""===e||""===c)return alert("請選擇負責人"),!1;console.log(t),console.log(e),console.log(c);var i="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/assign";console.log(i),fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({admin_id:t,ticket_id:e,ticket_status:c})}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log(t),alert(t["data"]["message"]),n.reload()}))},find_engineer:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/users?role=Engineer",console.log(c),e.next=4,fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e["data"]),t.allEngineers=t.allEngineers.concat(e["data"])}));case 4:return e.next=6,t.find_engineer_supervisor();case 6:case"end":return e.stop()}}),e)})))()},find_engineer_supervisor:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/users?role=Engineer Supervisor";console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e["data"]),t.allEngineers=t.allEngineers.concat(e["data"])}))},get_engineer_id:function(t,e,c){var n,i=Object(cn["a"])(this.allEngineers);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.admin_name===e&&(this.every_tickets[c][t].selected_id=a.admin_id,console.log(this.every_tickets[c][t].selected_id))}}catch(s){i.e(s)}finally{i.f()}},getAlltickets:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets?page="+this.tickets_page+"&status=all&user_id=0&role=0";fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){var c,n=Object(cn["a"])(e["data"]);try{for(n.s();!(c=n.n()).done;){var i=c.value;"Not Processed"===i["ticket_status"]?t.every_tickets["not_proccess"].push(i):"Processing"===i["ticket_status"]?t.every_tickets["proccessing"].push(i):"Processed"===i["ticket_status"]&&t.every_tickets["proccessed"].push(i)}}catch(a){n.e(a)}finally{n.f()}}))},reload:function(){this.every_tickets={not_proccess:[],proccessing:[],proccessed:[]},setTimeout(this.getAlltickets(),3e3)}},created:function(){this.find_engineer(),this.find_engineer_supervisor(),this.getAlltickets()}};c("38b6");const an=f()(nn,[["render",en],["__scopeId","data-v-21e431aa"]]);var sn=an,on=function(t){return Object(n["G"])("data-v-5ee12056"),t=t(),Object(n["E"])(),t},rn={class:"thomas-all"},ln={id:"deadline-table",class:"thomas-right"},un=on((function(){return Object(n["j"])("li",{class:"deadline-header"},[Object(n["j"])("div",{class:"deadline-tr"},"歷史清單"),Object(n["j"])("div",{class:"deadline -tr"},"Created At")],-1)})),dn=["onClick"],jn={class:"deadline-td1"},bn={class:"deadline-td2"},pn={class:"thomas-left"},hn={class:"pagination"},fn=on((function(){return Object(n["j"])("li",null,[Object(n["j"])("a",{href:"#/home/history_ticket"},"«")],-1)})),On=["onClick"],kn={href:"#/home/history_ticket"},mn=on((function(){return Object(n["j"])("li",null,[Object(n["j"])("a",{href:"#/home/history_ticket"},"»")],-1)}));function _n(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",rn,[Object(n["j"])("div",ln,[un,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessed"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"deadline-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",jn,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",bn,Object(n["P"])(t["created_at"]),1)],8,dn)})),128))]),Object(n["j"])("div",pn,[Object(n["j"])("ul",hn,[fn,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_page+1,(function(t){return Object(n["D"])(),Object(n["i"])("li",{key:t,onClick:function(e){return s.change_page(t)}},[Object(n["j"])("a",kn,Object(n["P"])(t),1)],8,On)})),128)),mn])])])}var vn={emits:["all_ticket_contents"],data:function(){return{oneTicket:{},tickets_page:0,every_tickets:{not_proccess:[],proccessing:[],proccessed:[]},all_page:0,page_class:""}},inject:["alltickets"],methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")},get_All_history_ticket:function(t){var e=this,c="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets?page="+String(t)+"&status=all&user_id=0&role=0";fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(t){var c,n=Object(cn["a"])(t["data"]);try{for(n.s();!(c=n.n()).done;){var i=c.value;"Not Processed"===i["ticket_status"]?e.every_tickets["not_proccess"].push(i):"Processing"===i["ticket_status"]?e.every_tickets["proccessing"].push(i):"Processed"===i["ticket_status"]&&e.every_tickets["proccessed"].push(i)}}catch(a){n.e(a)}finally{n.f()}console.log(t),e.all_page=t["total_page"],console.log(e.all_page)}))},change_page:function(t){this.get_All_history_ticket(t)}},created:function(){this.get_All_history_ticket(0)}};c("3912");const gn=f()(vn,[["render",_n],["__scopeId","data-v-5ee12056"]]);var yn=gn,wn=Object(a["a"])({history:Object(a["b"])(""),routes:[{path:"/",component:W,alias:"/login"},{path:"/home",component:dt,props:function(t){return t.params},children:[{path:"",component:yt},{path:"tickets_table",component:Ve},{path:"tickets",component:Kt},{path:"history_ticket",component:yn},{path:"settings",component:ke},{path:"manage",component:ye},{path:"admin_create_engineer",component:Oc},{path:"admin_dispatch_ticket",component:sn}]},{path:"/userhome",component:dt,props:function(t){return t.params},children:[{path:"",component:Gt},{path:"tickets_table",component:uc},{path:"create_form",component:le},{path:"tickets",component:Be},{path:"settings",component:ke}]},{path:"/NotFound(.*)",redirect:"/"}]}),Tn=Object(n["f"])(y),Pn=Object(i["a"])({modules:{},state:function(){return{}}});Tn.use(w["a"]),Tn.use(wn),T["default"].configure(D),Tn.config.productionTip=!1,Tn.use(Pn),Tn.mount("#frameapp")},5882:function(t,e,c){"use strict";c("268d")},"5f9c":function(t,e,c){"use strict";c("4a71")},"747b":function(t,e,c){"use strict";c("9109")},"78a1":function(t,e,c){},"8d2e":function(t,e,c){},9109:function(t,e,c){},a5bf:function(t,e,c){"use strict";c("f7b2")},a912:function(t,e,c){},b0c3:function(t,e,c){},b78d:function(t,e,c){"use strict";c("b0c3")},c33d:function(t,e,c){"use strict";c("78a1")},c753:function(t,e,c){},c79e:function(t,e,c){},cbab:function(t,e,c){"use strict";c("22b2")},d8e0:function(t,e,c){"use strict";c("8d2e")},e1cc:function(t,e,c){"use strict";c("482c")},eac5:function(t,e,c){"use strict";c("a912")},f7b2:function(t,e,c){},f8f9:function(t,e,c){"use strict";c("3484")}});
//# sourceMappingURL=app.c9619381.js.map