(function(t){function e(e){for(var c,o,s=e[0],r=e[1],l=e[2],d=0,j=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&j.push(i[o][0]),i[o]=0;for(c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c]);u&&u(e);while(j.length)j.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],c=!0,s=1;s<n.length;s++){var r=n[s];0!==i[r]&&(c=!1)}c&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var c={},i={app:0},a=[];function o(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=c,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)o.d(n,c,function(e){return t[e]}.bind(null,c));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=r;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"02bd":function(t,e,n){"use strict";n("1550")},"0590":function(t,e,n){},"0886":function(t,e,n){"use strict";n("25e0")},1:function(t,e){},1550:function(t,e,n){},"18e0":function(t,e,n){"use strict";n("2aa1")},2:function(t,e){},2239:function(t,e,n){},"22b2":function(t,e,n){},"25e0":function(t,e,n){},2723:function(t,e,n){"use strict";n("f265")},"2aa1":function(t,e,n){},3828:function(t,e,n){},"3acf":function(t,e,n){},"3eca":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23"),i=n("5502"),a=n("6c02"),o={id:"all"},s=Object(c["j"])("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},null,-1),r={id:"down"};function l(t,e,n,i,a,l){var u=Object(c["L"])("header-page"),d=Object(c["L"])("router-view");return Object(c["D"])(),Object(c["i"])("div",o,[s,Object(c["m"])(u,{id:"headerup"}),Object(c["j"])("div",r,[Object(c["m"])(d,{user:a.data,onLoginSuccess:l.changeLoginStatus},null,8,["user","onLoginSuccess"])])])}var u=n("1da1"),d=(n("96cf"),n("d3b7"),n("99af"),n("4e82"),n("a9e3"),function(t){return Object(c["G"])("data-v-dc438f4c"),t=t(),Object(c["E"])(),t}),j={class:"header"},b=d((function(){return Object(c["j"])("p",null,"Awan Ticket System",-1)}));function h(t,e){var n=Object(c["L"])("center");return Object(c["D"])(),Object(c["i"])("div",j,[Object(c["m"])(n,null,{default:Object(c["V"])((function(){return[b]})),_:1})])}n("c33d");var p=n("d959"),O=n.n(p);const f={},k=O()(f,[["render",h],["__scopeId","data-v-dc438f4c"]]);var _=k,m=n("bf82"),v={provide:function(){return{userlogindata:this.data,alltickets:this.fetchalltickets,all_tickets_page:this.temp_all_tickets_page,jwtToken:this.temp_JWTtoken}},components:{"header-page":_},data:function(){return{data:{id:"",userRole:"",username:""},fetchalltickets:{},tickets_page:"0",temp_all_tickets_page:{undo:0,doing:0,done:0},temp_JWTtoken:{jwt:""}}},methods:{getAllticket:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var c,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets",i=e.data["id"],a=e.data["userRole"],n.next=4,fetch(c+"?page="+String(e.tickets_page)+"&status=not processed&user_id="+i+"&role="+a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(t){if(t.ok)return t.json()})).catch((function(t){console.log(t)})).then((function(t){console.log("undo"),console.log(t["data"]),e.fetchalltickets["undo"]=t["data"],e.temp_all_tickets_page["undo"]=t["total_page"]}));case 4:return n.next=6,fetch(c+"?page="+String(e.tickets_page)+"&status=processing&user_id="+i+"&role="+a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(t){if(t.ok)return t.json()})).catch((function(t){console.log(t)})).then((function(t){console.log("doing"),console.log(t),e.fetchalltickets["doing"]=t["data"],e.temp_all_tickets_page["doing"]=t["total_page"]}));case 6:return fetch(c+"?page="+String(e.tickets_page)+"&status=processed&user_id="+i+"&role="+a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(t){if(t.ok)return t.json()})).catch((function(t){console.log(t)})).then((function(t){console.log("done"),e.fetchalltickets["done"]=t["data"],e.temp_all_tickets_page["done"]=t["total_page"]})),n.next=9,e.concatTickets();case 9:case"end":return n.stop()}}),n)})))()},changeLoginStatus:function(t,e,n){var c=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("null"==t){i.next=9;break}return i.next=3,c.change_user(t,e,n);case 3:return i.next=5,m["a"].currentSession();case 5:return a=i.sent,c.temp_JWTtoken.jwt=a["idToken"]["jwtToken"],i.next=9,c.getAllticket(c.temp_JWTtoken.jwt);case 9:case"end":return i.stop()}}),i)})))()},change_user:function(t,e,n){this.data["id"]=t,this.data["username"]=e,this.data["userRole"]=n},getLoginStatus:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].currentUserInfo();case 3:if(n=e.sent,null==n){e.next=10;break}return console.log("login success"),e.next=8,t.changeLoginStatus(n["attributes"]["custom:id"],n["attributes"]["custom:name"],n["attributes"]["custom:role"]);case 8:e.next=11;break;case 10:console.log("no attribute");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},concatTickets:function(){this.fetchalltickets["customer_doing"]=this.fetchalltickets["doing"],this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].concat(this.fetchalltickets["undo"]),this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].sort((function(t,e){return t.ticket_id>e.ticket_id?1:-1}))},change_page:function(t,e){console.log("change page"),"jump"===t?this.tickets_page=Number(e):"add"===t?this.tickets_page+=1:"sub"===t&&(this.tickets_page-=1)}},created:function(){this.getLoginStatus()}};n("e9d2");const g=O()(v,[["render",l]]);var y=g,w=n("b80d"),T=n("00bd"),D={Auth:{mandatorySignId:!0,regionID:"us-west-2",userPoolId:"us-west-2_rUEXdjmle",userPoolWebClientId:"2mk360n1pl7o40r86rhcmims51",authenticationFlowType:"USER_PASSWORD_AUTH"}},P=D,S=(n("f9e3"),n("1a26"),function(t){return Object(c["G"])("data-v-549b71d6"),t=t(),Object(c["E"])(),t}),C={class:"container"},x={class:"form-div"},A=S((function(){return Object(c["j"])("label",{for:"account",class:"form-label"},"帳號 | Account",-1)})),E={class:"form-div"},z=S((function(){return Object(c["j"])("label",{for:"password",class:"form-label"},"密碼 | Password",-1)})),I={key:0},U=S((function(){return Object(c["j"])("p",{style:{color:"red"}},"帳號密碼錯誤 ",-1)})),J=[U],R={key:1};function V(t,e,n,i,a,o){return Object(c["D"])(),Object(c["i"])("div",C,[Object(c["j"])("form",null,[Object(c["j"])("div",x,[A,Object(c["W"])(Object(c["j"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.username=t}),type:"text",class:"form-control",id:"account",required:""},null,512),[[c["T"],a.username]])]),Object(c["j"])("div",E,[z,Object(c["W"])(Object(c["j"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.password=t}),type:"password",class:"form-control",id:"password",required:""},null,512),[[c["T"],a.password]])]),Object(c["j"])("div",null,[Object(c["j"])("button",{onClick:e[2]||(e[2]=Object(c["X"])((function(){return o.getData&&o.getData.apply(o,arguments)}),["prevent"])),type:"submit",class:"form-btn"},"登入 | Login")]),"False"===a.isUser?(Object(c["D"])(),Object(c["i"])("div",I,J)):"True"===a.isUser?(Object(c["D"])(),Object(c["i"])("div",R," 登入成功 ")):Object(c["h"])("",!0)])])}var G={props:{user:{type:String}},data:function(){return{userdata:[],userid:"",checkuser:"",checkpassword:"",username:"",password:"",role:"",isUser:"null"}},methods:{login:function(){try{var t=m["a"].currentAuthenticatedUser();console.log(t)}catch(e){console.log(e)}},getData:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].signIn(t.username,t.password);case 3:return console.log("登入成功"),e.next=6,m["a"].currentUserInfo();case 6:n=e.sent,null!=n?(t.checkuser=n["attributes"]["custom:name"],t.role=n["attributes"]["custom:role"],t.userid=n["attributes"]["custom:id"],t.loginstatus()):(console.log("登入失敗"),t.isUser="False"),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),console.log("登入失敗"),t.isUser="False";case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},loginstatus:function(){"Engineer"===this.role||"Engineer Supervisor"===this.role?this.$router.push("/home"):this.$router.push("/userhome"),this.$emit("loginSuccess",this.userid,this.checkuser,this.role),this.$store.commit({type:"login_user",userId:this.userid,userName:this.checkuser,userRole:this.role}),this.username="",this.password=""}},emits:["loginSuccess"]};n("ba19");const $=O()(G,[["render",V],["__scopeId","data-v-549b71d6"]]);var W=$,L={class:"template-content"},N={class:"template-left"},M={class:"template-right"};function H(t,e,n,i,a,o){var s=Object(c["L"])("side-bar"),r=Object(c["L"])("router-view");return Object(c["D"])(),Object(c["i"])("div",L,[Object(c["j"])("div",N,[Object(c["m"])(s,{Userdata:n.user,onRedirect_home:e[0]||(e[0]=function(t){return o.againgetticket()})},null,8,["Userdata"])]),Object(c["j"])("div",M,[Object(c["m"])(r,{onAll_ticket_contents:o.transferTicketId},null,8,["onAll_ticket_contents"])])])}var q={id:"sidebar"},F={class:"list-unstyled"},X=Object(c["l"])("Ticket"),Q=Object(c["l"])("Ticket"),B=Object(c["l"])("Ticket"),K=Object(c["l"])("History Ticket"),Y=Object(c["l"])("History Ticket"),Z=Object(c["l"])("Setting"),tt={key:0},et={key:0},nt=Object(c["l"])(" 分派tickets "),ct=Object(c["l"])(" 新增Engineer帳號 "),it=Object(c["l"])("Logout");function at(t,e,n,i,a,o){var s=Object(c["L"])("router-link");return Object(c["D"])(),Object(c["i"])("nav",q,[Object(c["j"])("ul",F,[Object(c["j"])("div",null,[Object(c["j"])("li",null,"Hi, "+Object(c["P"])(n.Userdata["username"])+", "+Object(c["P"])(n.Userdata["userRole"]),1)]),Object(c["j"])("li",null,["Engineer Supervisor"===n.Userdata["userRole"]?(Object(c["D"])(),Object(c["i"])("a",{key:0,href:"#/home",onClick:e[0]||(e[0]=function(){return o.make_redirect&&o.make_redirect.apply(o,arguments)})},"Home")):"Engineer"===n.Userdata["userRole"]?(Object(c["D"])(),Object(c["i"])("a",{key:1,href:"#/home",onClick:e[1]||(e[1]=function(){return o.make_redirect&&o.make_redirect.apply(o,arguments)})},"Home")):(Object(c["D"])(),Object(c["i"])("a",{key:2,href:"#/userhome",onClick:e[2]||(e[2]=function(){return o.make_redirect&&o.make_redirect.apply(o,arguments)})}," Home"))]),Object(c["j"])("li",null,["Engineer"===n.Userdata["userRole"]?(Object(c["D"])(),Object(c["g"])(s,{key:0,to:"/home/tickets_table"},{default:Object(c["V"])((function(){return[X]})),_:1})):"Engineer Supervisor"===n.Userdata["userRole"]?(Object(c["D"])(),Object(c["g"])(s,{key:1,to:"/home/tickets_table"},{default:Object(c["V"])((function(){return[Q]})),_:1})):(Object(c["D"])(),Object(c["g"])(s,{key:2,to:"/userhome/tickets_table"},{default:Object(c["V"])((function(){return[B]})),_:1}))]),Object(c["j"])("li",null,["Engineer"===n.Userdata["userRole"]?(Object(c["D"])(),Object(c["g"])(s,{key:0,to:"/home/history_ticket"},{default:Object(c["V"])((function(){return[K]})),_:1})):"Engineer Supervisor"===n.Userdata["userRole"]?(Object(c["D"])(),Object(c["g"])(s,{key:1,to:"/home/history_ticket"},{default:Object(c["V"])((function(){return[Y]})),_:1})):Object(c["h"])("",!0)]),Object(c["j"])("li",null,[Object(c["m"])(s,{to:"/home/settings"},{default:Object(c["V"])((function(){return[Z]})),_:1})]),"Engineer Supervisor"===n.Userdata["userRole"]?(Object(c["D"])(),Object(c["i"])("li",tt,[Object(c["j"])("a",{onClick:e[3]||(e[3]=function(){return o.toggle_myticketSublist&&o.toggle_myticketSublist.apply(o,arguments)})},"Manager"),a.myticketSublist?(Object(c["D"])(),Object(c["i"])("ul",et,[Object(c["j"])("li",null,[Object(c["m"])(s,{to:"/home/admin_dispatch_ticket",style:{"font-size":"15px"}},{default:Object(c["V"])((function(){return[nt]})),_:1})]),Object(c["j"])("li",null,[Object(c["m"])(s,{to:"/home/admin_create_engineer",style:{"font-size":"15px"}},{default:Object(c["V"])((function(){return[ct]})),_:1})])])):Object(c["h"])("",!0)])):Object(c["h"])("",!0),Object(c["j"])("li",null,[Object(c["m"])(s,{to:"/",onClick:o.logout},{default:Object(c["V"])((function(){return[it]})),_:1},8,["onClick"])])])])}var ot={emits:["redirect_home"],props:{Userdata:{type:Object}},data:function(){return{myticketSublist:!1,historySublist:!1}},methods:{toTickets_table:function(){this.$router.push("tickets_table")},toTickets:function(){this.$router.push("tickets")},make_redirect:function(){this.$emit("redirect_home"),this.$router.push("/userhome")},toggle_myticketSublist:function(){this.myticketSublist=!this.myticketSublist},logout:function(){m["a"].signOut()}}};n("d8e0");const st=O()(ot,[["render",at],["__scopeId","data-v-5a4e4f61"]]);var rt=st,lt={emits:["all_ticket_contents","change_page_to_app"],props:{user:{type:Object}},inject:["alltickets","ticketcontent","jwtToken"],provide:function(){return{ticketcontent:this.oneTicket}},components:{"side-bar":rt},data:function(){return{status:!1,all_tickets_content:{topics:["123"]},fetchalltickets:{},oneTicket:{},tickets_page:"0"}},methods:{getAllticket:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets",c=t.user["id"],i=t.user["userRole"],e.next=4,fetch(n+"?page="+t.tickets_page+"&status=not processed&user_id="+c+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("undo"),console.log(e["data"]),t.fetchalltickets["undo"]=e["data"]}));case 4:return e.next=6,fetch(n+"?page="+t.tickets_page+"&status=processing&user_id="+c+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("doing"),console.log(e["data"]),t.fetchalltickets["doing"]=e["data"]}));case 6:return fetch(n+"?page="+t.tickets_page+"&status=processed&user_id="+c+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("done"),t.fetchalltickets["done"]=e["data"]})),e.next=9,t.concatTickets();case 9:case"end":return e.stop()}}),e)})))()},concatTickets:function(){this.fetchalltickets["customer_doing"]=this.fetchalltickets["doing"],this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].concat(this.fetchalltickets["undo"]),this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].sort((function(t,e){return t.ticket_id>e.ticket_id?1:-1}))},transferTicketId:function(t,e,n){this.oneTicket["ticketid"]=t,this.oneTicket["title"]=e,this.oneTicket["admin_name"]=n},againgetticket:function(){console.log("reload tickets"),this.getAllticket()}},created:function(){}};n("02bd");const ut=O()(lt,[["render",H]]);var dt=ut,jt={class:"thomas-all"},bt={id:"deadline-table",class:"thomas-right"},ht=Object(c["k"])('<li class="deadline-header" data-v-711e1587><div class="deadline-tr" data-v-711e1587>公告</div><div class="deadline -tr" data-v-711e1587>tag</div><div class="deadline-tr" data-v-711e1587><div class="onoffswitch" data-v-711e1587><input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" tabindex="0" checked data-v-711e1587><label class="onoffswitch-label" for="myonoffswitch" data-v-711e1587><span class="onoffswitch-inner" data-v-711e1587></span><span class="onoffswitch-switch" data-v-711e1587></span></label></div></div></li>',1),pt=["onClick"],Ot={class:"deadline-td1"},ft={class:"deadline-td2"},kt={class:"deadline-td3"};function _t(t,e,n,i,a,o){return Object(c["D"])(),Object(c["i"])("div",jt,[Object(c["j"])("div",bt,[ht,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(o.alltickets["doing"],(function(e){return Object(c["D"])(),Object(c["i"])("li",{class:"deadline-row",key:e,onClick:function(t){return o.viewTicket(e["ticket_id"],e["ticket_title"],e["admin_id"])}},[Object(c["j"])("div",Ot,Object(c["P"])(e["ticket_title"]),1),Object(c["j"])("div",ft,[(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(t.ticket_ai_tags,(function(t){return Object(c["D"])(),Object(c["i"])("a",{key:t},Object(c["P"])(t),1)})),128))]),Object(c["j"])("div",kt,Object(c["P"])(e["created_at"]),1)],8,pt)})),128))])])}var mt={emits:["all_ticket_contents"],data:function(){return{oneTicket:{},number_ticket:0}},inject:["alltickets"],methods:{viewTicket:function(t,e,n){this.$emit("all_ticket_contents",t,e,n),this.$router.push("/home/tickets")},change_page:function(){}},mounted:function(){}};n("bb5e");const vt=O()(mt,[["render",_t],["__scopeId","data-v-711e1587"]]);var gt=vt,yt={class:"user-myticket"},wt={class:"user-myticket-left"},Tt=Object(c["j"])("span",null,"建單",-1),Dt=[Tt],Pt={class:"user-myticket-right"},St={class:"user-table"},Ct=Object(c["j"])("li",{class:"table-header"},[Object(c["j"])("div",{class:"user-table-tr1"},"進行中"),Object(c["j"])("div",{class:"user-table-tr1"},"tag"),Object(c["j"])("div",{class:"user-table-tr2"},"更新時間")],-1),xt=["onClick"],At={class:"user-table-td1","data-label":"Job Id"},Et={class:"user-table-td2","data-label":""},zt={class:"user-table-td3","data-label":"Payment Status"};function It(t,e,n,i,a,o){return Object(c["D"])(),Object(c["i"])("div",yt,[Object(c["j"])("div",wt,[Object(c["j"])("button",{onClick:e[0]||(e[0]=Object(c["X"])((function(){return o.changeTemplatePage&&o.changeTemplatePage.apply(o,arguments)}),["prevent"])),class:"user-myticket-btn"},Dt)]),Object(c["j"])("div",Pt,[Object(c["j"])("div",St,[Ct,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(o.alltickets["customer_doing"],(function(e){return Object(c["D"])(),Object(c["i"])("li",{class:"table-row",key:e,onClick:function(t){return o.viewTicket(e["ticket_id"],e["ticket_title"],e["admin_id"])}},[Object(c["j"])("div",At,Object(c["P"])(e["ticket_title"]),1),Object(c["j"])("div",Et,[(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(t.ticket_ai_tags,(function(t){return Object(c["D"])(),Object(c["i"])("a",{key:t},Object(c["P"])(t),1)})),128))]),Object(c["j"])("div",zt,Object(c["P"])(e["created_at"]),1)],8,xt)})),128))])])])}var Ut={provide:function(){return{ticketcontent:this.oneTicket}},inject:["alltickets"],emits:["changepage","all_ticket_contents"],data:function(){return{oneTicket:{}}},methods:{changeTemplatePage:function(){this.$router.push("/userhome/create_form"),this.$emit("changepage","create-form-page")},viewTicket:function(t,e,n){this.$emit("all_ticket_contents",t,e,n),this.$router.push("/userhome/tickets")}}};n("2723");const Jt=O()(Ut,[["render",It]]);var Rt=Jt,Vt=function(t){return Object(c["G"])("data-v-d4d40592"),t=t(),Object(c["E"])(),t},Gt={id:"tickets-content"},$t={class:"tickets-title"},Wt={key:0},Lt=Object(c["l"])("Tag: "),Nt={key:1},Mt={key:0,class:"tickets-user-dialogue"},Ht={key:1,class:"tickets-thomas-dialogue"},qt=Vt((function(){return Object(c["j"])("th",null,"回覆內容: ",-1)})),Ft={key:0,class:"tickets-footer"},Xt=Vt((function(){return Object(c["j"])("span",null,"傳送",-1)})),Qt=[Xt];function Bt(t,e,n,i,a,o){return Object(c["D"])(),Object(c["i"])("div",Gt,[Object(c["j"])("div",$t,[Object(c["j"])("table",null,[Object(c["j"])("tr",null,[Object(c["j"])("td",null," Ticketname: "+Object(c["P"])(a.myticket["ticket_title"]),1),Object(c["j"])("td",null," Deadline: "+Object(c["P"])(a.myticket["created_at"]),1)]),Object(c["j"])("tr",null,[Object(c["j"])("td",null," Customername: "+Object(c["P"])(a.myticket["customer_name"]),1),Object(c["j"])("td",null," 負責人: "+Object(c["P"])(a.myticket["admin_name"]),1)]),Object(c["j"])("tr",null,[Object(c["j"])("td",null," Time: "+Object(c["P"])(a.myticket["created_at"]),1),Object(c["j"])("td",null," 緊急程度: "+Object(c["P"])(a.myticket["urgency"]),1),Object(c["j"])("td",null,[a.myticket["ticket_ai_tags"].length>0?(Object(c["D"])(),Object(c["i"])("a",Wt,[Lt,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(a.myticket["ticket_ai_tags"],(function(t){return Object(c["D"])(),Object(c["i"])("a",{key:t},Object(c["P"])(t),1)})),128))])):(Object(c["D"])(),Object(c["i"])("a",Nt,"Tag: none"))])])])]),(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(a.all_ticket_contents,(function(t){return Object(c["D"])(),Object(c["i"])("div",{key:t},["customer"===t["owner"]?(Object(c["D"])(),Object(c["i"])("div",Mt,[Object(c["j"])("table",null,[Object(c["j"])("tr",null,[Object(c["j"])("th",null,Object(c["P"])(a.myticket["customer_name"]),1),Object(c["j"])("th",null,Object(c["P"])(t["created_at"]),1)]),Object(c["j"])("tr",null,[Object(c["j"])("th",null,"回覆內容: "+Object(c["P"])(t["ticket_content"]),1)])])])):(Object(c["D"])(),Object(c["i"])("div",Ht,[Object(c["j"])("table",null,[Object(c["j"])("tr",null,[Object(c["j"])("th",null,Object(c["P"])(a.myticket["admin_name"]),1),Object(c["j"])("th",null,Object(c["P"])(t["created_at"]),1)]),Object(c["j"])("tr",null,[qt,Object(c["j"])("th",null,Object(c["P"])(t["ticket_content"]),1)])])]))])})),128)),"Processed"!==a.myticket["ticket_status"]?(Object(c["D"])(),Object(c["i"])("div",Ft,[Object(c["W"])(Object(c["j"])("textarea",{name:"message",placeholder:"輸入訊息",id:"message_input",cols:"88","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.input_content=t})},null,512),[[c["T"],a.input_content]]),Object(c["j"])("button",{class:"user-ticket-btn",onClick:e[1]||(e[1]=function(t){return o.responseTicket()})},Qt)])):Object(c["h"])("",!0)])}n("e9c4");var Kt={props:["ticket"],inject:["alltickets","ticketcontent","jwtToken"],methods:{fetchTicket:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/";e+=String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.myticket=e["data"],console.log(t.myticket)}))},fetch_all_contents:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents?";e+="ticket_id="+String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),t.all_ticket_contents=e["data"]}))},responseTicket:function(){var t=this;console.log(this.input_content);var e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents";console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt},body:JSON.stringify({ticket_id:this.ticketcontent["ticketid"],ticket_content:this.input_content,owner:"admin"})}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),alert(e["message"]),t.input_content="",t.reload()}))},reload:function(){console.log("reload"),setTimeout(this.fetch_all_contents(),3e3)}},data:function(){return{myticket:{},input_content:"",all_ticket_contents:{}}},created:function(){this.fetchTicket(),this.fetch_all_contents()}};n("0886");const Yt=O()(Kt,[["render",Bt],["__scopeId","data-v-d4d40592"]]);var Zt=Yt,te={id:"create-form-container"},ee={action:"#",method:"post",id:"contact_form"},ne={class:"text"},ce={class:"service-select"},ie=Object(c["k"])("<option data-v-d952b396>請選擇您需要的服務</option><option data-v-d952b396>1.AWS_EC2</option><option data-v-d952b396>2.AWS_VPC</option><option data-v-d952b396>3.AWS_Route53</option><option data-v-d952b396>4.AWS_Cloudfront</option><option data-v-d952b396>5.AWS_S3</option><option data-v-d952b396>6.Azure_SQL Database</option><option data-v-d952b396>7.Azure_App Service</option><option data-v-d952b396>8.Azure_Azure Active Directory</option><option data-v-d952b396>9.Azure_Azure Maps</option><option data-v-d952b396>10.Azure_VM</option><option data-v-d952b396>12.AWS_Other</option><option data-v-d952b396>13.Azure_Other</option>",13),ae=[ie],oe={class:"message"},se={class:"submit"};function re(t,e,n,i,a,o){return Object(c["D"])(),Object(c["i"])("div",te,[Object(c["j"])("div",ee,[Object(c["j"])("div",ne,[Object(c["W"])(Object(c["j"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.ticket_title=t}),type:"form-text",placeholder:"title",name:"telephone",id:"telephone_input",required:""},null,512),[[c["T"],a.ticket_title]])]),Object(c["j"])("div",ce,[Object(c["W"])(Object(c["j"])("select",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.type=t})},ae,512),[[c["S"],a.type]])]),Object(c["j"])("div",oe,[Object(c["W"])(Object(c["j"])("textarea",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return a.ticket_content=t}),name:"message",placeholder:"I'd like to ask a question",id:"message_input",cols:"30",rows:"5",required:""},null,512),[[c["T"],a.ticket_content]])]),Object(c["j"])("div",se,[Object(c["j"])("input",{onClick:e[3]||(e[3]=function(){return o.submmitAndCreate&&o.submmitAndCreate.apply(o,arguments)}),type:"submit",value:"Send Message",id:"form_button"})])])])}n("ac1f"),n("1276");var le={inject:["userlogindata","jwtToken"],data:function(){return{ticket_title:"",ticket_content:"",type:""}},methods:{submmitAndCreate:function(){if(""===this.ticket_title||""===this.ticket_content||""===this.type)return alert("請填好表格"),!1;fetch("https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt},body:JSON.stringify({customer_id:this.userlogindata["id"],service_id:this.type.split(".")[0],ticket_title:this.ticket_title,ticket_content:this.ticket_content,urgency:"1"})}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log(t["data"]["message"]),alert(t["data"]["message"])})),this.ticket_title="",this.ticket_content="",this.$router.push("/userhome")},testCreate:function(){var t={customer_id:this.userlogindata["id"],service_id:"3",ticket_title:this.ticket_title,ticket_content:this.ticket_content,urgency:1};console.log(t)}}};n("dfae");const ue=O()(le,[["render",re],["__scopeId","data-v-d952b396"]]);var de=ue,je=Object(c["j"])("h3",null," change password ",-1),be=Object(c["j"])("a",null,[Object(c["j"])("p",null,"original password"),Object(c["j"])("input",{type:"password"})],-1),he=Object(c["j"])("a",null,[Object(c["j"])("p",null,"new password"),Object(c["j"])("input",{type:"password"})],-1),pe=Object(c["j"])("p",null,[Object(c["j"])("button",null," 送出 ")],-1),Oe=[je,be,he,pe];function fe(t,e){return Object(c["D"])(),Object(c["i"])("div",null,Oe)}const ke={},_e=O()(ke,[["render",fe]]);var me=_e,ve=Object(c["j"])("div",null,[Object(c["j"])("button",null," 更改Engineer 資料 ")],-1);function ge(t,e,n,i,a,o){return Object(c["D"])(),Object(c["i"])("div",null,[ve,Object(c["j"])("div",null,[Object(c["j"])("button",{onClick:e[0]||(e[0]=function(){return o.change_to_dispatch&&o.change_to_dispatch.apply(o,arguments)})}," 分派tickets ")]),Object(c["j"])("div",null,[Object(c["j"])("button",{onClick:e[1]||(e[1]=function(){return o.change_to_create&&o.change_to_create.apply(o,arguments)})}," 新增Engineer帳號 ")])])}var ye={methods:{change_to_create:function(){this.$router.push("/home/admin_create_engineer")},change_to_dispatch:function(){this.$router.push("/home/admin_dispatch_ticket")}}};const we=O()(ye,[["render",ge]]);var Te=we,De=function(t){return Object(c["G"])("data-v-f56523a2"),t=t(),Object(c["E"])(),t},Pe={class:"tickets-table"},Se={class:"tickets-table-left"},Ce=De((function(){return Object(c["j"])("li",{class:"table-header"},[Object(c["j"])("div",{class:"tickets-table-left-tr"},"正在處理")],-1)})),xe=["onClick"],Ae={class:"user-table-td1","data-label":"Job Id"},Ee={class:"tickets-table-right"},ze=De((function(){return Object(c["j"])("li",{class:"table-header"},[Object(c["j"])("div",{class:"tickets-table-right-tr"},"已處理")],-1)})),Ie=["onClick"],Ue={class:"user-table-td1","data-label":"Job Id"};function Je(t,e,n,i,a,o){return Object(c["D"])(),Object(c["i"])("div",Pe,[Object(c["j"])("div",Se,[Ce,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(o.alltickets["doing"],(function(t){return Object(c["D"])(),Object(c["i"])("li",{class:"table-row",key:t,onClick:function(e){return o.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(c["j"])("div",Ae,Object(c["P"])(t.ticket_title),1)],8,xe)})),128))]),Object(c["j"])("div",Ee,[ze,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(o.alltickets["done"],(function(t){return Object(c["D"])(),Object(c["i"])("li",{class:"table-row",key:t,onClick:function(e){return o.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(c["j"])("div",Ue,Object(c["P"])(t.ticket_title),1)],8,Ie)})),128))])])}var Re={inject:["alltickets","all_tickets_page"],data:function(){return{doing:[],undo:[]}},methods:{viewTicket:function(t,e,n){this.$emit("all_ticket_contents",t,e,n),this.$router.push("/home/tickets")}},mounted:function(){}};n("cbab");const Ve=O()(Re,[["render",Je],["__scopeId","data-v-f56523a2"]]);var Ge=Ve,$e=function(t){return Object(c["G"])("data-v-443569e6"),t=t(),Object(c["E"])(),t},We={id:"tickets-content"},Le={class:"tickets-title"},Ne={key:0},Me=Object(c["l"])("Tag: "),He={key:1},qe={key:0,class:"tickets-user-dialogue"},Fe={key:1,class:"tickets-thomas-dialogue"},Xe=$e((function(){return Object(c["j"])("th",null,"回覆內容: ",-1)})),Qe={key:0,class:"tickets-footer"},Be=$e((function(){return Object(c["j"])("span",null,"傳送",-1)})),Ke=[Be];function Ye(t,e,n,i,a,o){return Object(c["D"])(),Object(c["i"])("div",We,[Object(c["j"])("div",Le,[Object(c["j"])("table",null,[Object(c["j"])("tr",null,[Object(c["j"])("td",null," Ticketname: "+Object(c["P"])(a.myticket["ticket_title"]),1)]),Object(c["j"])("tr",null,[Object(c["j"])("td",null," Customername: "+Object(c["P"])(a.myticket["customer_name"]),1),Object(c["j"])("td",null," 負責人: "+Object(c["P"])(a.myticket["admin_name"]),1)]),Object(c["j"])("tr",null,[Object(c["j"])("td",null," Time: "+Object(c["P"])(a.myticket["created_at"]),1),Object(c["j"])("td",null,[a.myticket["ticket_ai_tags"].length>0?(Object(c["D"])(),Object(c["i"])("a",Ne,[Me,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(a.myticket["ticket_ai_tags"],(function(t){return Object(c["D"])(),Object(c["i"])("a",{key:t},Object(c["P"])(t),1)})),128))])):(Object(c["D"])(),Object(c["i"])("a",He,"Tag: none"))])])])]),(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(a.all_ticket_contents,(function(t){return Object(c["D"])(),Object(c["i"])("div",{key:t},["customer"===t["owner"]?(Object(c["D"])(),Object(c["i"])("div",qe,[Object(c["j"])("table",null,[Object(c["j"])("tr",null,[Object(c["j"])("th",null,Object(c["P"])(t["created_at"]),1)]),Object(c["j"])("tr",null,[Object(c["j"])("th",null,"回覆內容: "+Object(c["P"])(t["ticket_content"]),1)])])])):(Object(c["D"])(),Object(c["i"])("div",Fe,[Object(c["j"])("table",null,[Object(c["j"])("tr",null,[Object(c["j"])("th",null,Object(c["P"])(a.myticket["admin_name"]),1),Object(c["j"])("th",null,Object(c["P"])(t["created_at"]),1)]),Object(c["j"])("tr",null,[Xe,Object(c["j"])("th",null,Object(c["P"])(t["ticket_content"]),1)])])]))])})),128)),"Processed"!==a.myticket["ticket_status"]?(Object(c["D"])(),Object(c["i"])("div",Qe,[Object(c["W"])(Object(c["j"])("textarea",{name:"message",placeholder:"輸入訊息",id:"message_input",cols:"88","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.input_content=t})},null,512),[[c["T"],a.input_content]]),Object(c["j"])("button",{class:"user-ticket-btn",onClick:e[1]||(e[1]=function(t){return o.responseTicket()})},Ke)])):Object(c["h"])("",!0)])}var Ze={inject:["alltickets","ticketcontent","jwtToken"],methods:{fetchTicket:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/";e+=String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.myticket=e["data"],console.log(t.myticket)}))},fetch_all_contents:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents?";e+="ticket_id="+String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),t.all_ticket_contents=e["data"]}))},responseTicket:function(){var t=this;console.log(this.input_content);var e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents";console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt},body:JSON.stringify({ticket_id:this.ticketcontent["ticketid"],ticket_content:this.input_content,owner:"customer"})}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),alert(e["message"]),t.input_content="",t.reload()}))},reload:function(){console.log("reload"),setTimeout(this.fetch_all_contents(),3e3)}},data:function(){return{myticket:{},input_content:"",all_ticket_contents:{}}},created:function(){this.fetchTicket(),this.fetch_all_contents()}};n("5a66");const tn=O()(Ze,[["render",Ye],["__scopeId","data-v-443569e6"]]);var en=tn,nn=function(t){return Object(c["G"])("data-v-b83a5ee0"),t=t(),Object(c["E"])(),t},cn={class:"tickets-table"},an={class:"tickets-table-left"},on=nn((function(){return Object(c["j"])("li",{class:"table-header"},[Object(c["j"])("div",{class:"tickets-table-left-tr"},"待處理")],-1)})),sn=["onClick"],rn={class:"user-table-td1","data-label":"Job Id"},ln={class:"tickets-table-right"},un=nn((function(){return Object(c["j"])("li",{class:"table-header"},[Object(c["j"])("div",{class:"tickets-table-right-tr"},"已處理")],-1)})),dn=["onClick"],jn={class:"user-table-td1","data-label":"Job Id"};function bn(t,e,n,i,a,o){return Object(c["D"])(),Object(c["i"])("div",cn,[Object(c["j"])("div",an,[on,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(o.alltickets["customer_doing"],(function(t){return Object(c["D"])(),Object(c["i"])("li",{class:"table-row",key:t,onClick:function(e){return o.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(c["j"])("div",rn,Object(c["P"])(t.ticket_title),1)],8,sn)})),128))]),Object(c["j"])("div",ln,[un,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(o.alltickets["done"],(function(t){return Object(c["D"])(),Object(c["i"])("li",{class:"table-row",key:t,onClick:function(e){return o.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(c["j"])("div",jn,Object(c["P"])(t.ticket_title),1)],8,dn)})),128))])])}var hn={inject:["alltickets"],data:function(){return{doing:[],done:[]}},methods:{viewTicket:function(t,e,n){this.$emit("all_ticket_contents",t,e,n),this.$router.push("/userhome/tickets")}},mounted:function(){}};n("18e0");const pn=O()(hn,[["render",bn],["__scopeId","data-v-b83a5ee0"]]);var On=pn,fn=function(t){return Object(c["G"])("data-v-c902abc2"),t=t(),Object(c["E"])(),t},kn=fn((function(){return Object(c["j"])("a",null,[Object(c["j"])("p",null,"新增工程師"),Object(c["j"])("p",null,"帳號"),Object(c["j"])("input",{type:"text"}),Object(c["j"])("p",null,"密碼"),Object(c["j"])("input",{type:"password"}),Object(c["j"])("div",{class:"submit"},[Object(c["j"])("input",{type:"submit",value:"確認",id:"form"})])],-1)})),_n=[kn];function mn(t,e,n,i,a,o){return Object(c["D"])(),Object(c["i"])("div",null,_n)}var vn={};n("b78d");const gn=O()(vn,[["render",mn],["__scopeId","data-v-c902abc2"]]);var yn=gn,wn=function(t){return Object(c["G"])("data-v-55de3340"),t=t(),Object(c["E"])(),t},Tn={class:"dispatch-table"},Dn=Object(c["k"])('<div data-v-55de3340> 未配單 </div><div class="dispatch-table-row1" data-v-55de3340><div class="dispatch-table-th1" data-v-55de3340>ticket title</div><div class="dispatch-table-th2" data-v-55de3340>deadline</div><div class="dispatch-table-th3" data-v-55de3340>負責人</div><div class="dispatch-table-th4" data-v-55de3340></div></div>',2),Pn={class:"dispatch-table-td1"},Sn={class:"dispatch-table-td2"},Cn={class:"dispatch-table-td3"},xn={class:"engineer-select"},An=["onUpdate:modelValue","onInput"],En={id:"cityname"},zn=wn((function(){return Object(c["j"])("option",{value:""},"請選擇負責人",-1)})),In=["value"],Un={class:"dispatch-table-td4"},Jn=["onClick"],Rn=Object(c["k"])('<div data-v-55de3340> 已配單 </div><div class="dispatch-table-row1" data-v-55de3340><div class="dispatch-table-th1" data-v-55de3340>ticket title</div><div class="dispatch-table-th2" data-v-55de3340>deadline</div><div class="dispatch-table-th3" data-v-55de3340>負責人</div><div class="dispatch-table-th4" data-v-55de3340></div><div class="dispatch-table-th4" data-v-55de3340></div></div>',2),Vn={class:"dispatch-table-td1"},Gn={class:"dispatch-table-td2"},$n={class:"dispatch-table-td3"},Wn={class:"engineer-select"},Ln=["onUpdate:modelValue","onInput"],Nn={id:"cityname"},Mn=wn((function(){return Object(c["j"])("option",{value:""},"請選擇負責人",-1)})),Hn=["value"],qn={class:"dispatch-table-td4"},Fn=["onClick"],Xn={class:"dispatch-table-td4"},Qn=["onClick"],Bn=Object(c["k"])('<div data-v-55de3340> 已完成 </div><div class="dispatch-table-row1" data-v-55de3340><div class="dispatch-table-th1" data-v-55de3340>ticket title</div><div class="dispatch-table-th2" data-v-55de3340>deadline</div><div class="dispatch-table-th3" data-v-55de3340>負責人</div><div class="dispatch-table-th4" data-v-55de3340></div></div>',2),Kn={class:"dispatch-table-td1"},Yn={class:"dispatch-table-td2"},Zn={class:"dispatch-table-td3"},tc={class:"engineer-select"},ec=["onUpdate:modelValue","onInput"],nc={id:"cityname"},cc=wn((function(){return Object(c["j"])("option",{value:""},"請選擇負責人",-1)})),ic=["value"],ac={class:"dispatch-table-td4"},oc=["onClick"];function sc(t,e,n,i,a,o){return Object(c["D"])(),Object(c["i"])("div",Tn,[Dn,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(a.every_tickets["not_proccess"],(function(t,e){return Object(c["D"])(),Object(c["i"])("div",{class:"dispatch-table-row2",key:t},[Object(c["j"])("div",Pn,Object(c["P"])(t.ticket_title),1),Object(c["j"])("div",Sn,Object(c["P"])(t.created_at),1),Object(c["j"])("div",Cn,[Object(c["j"])("div",xn,[Object(c["W"])(Object(c["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(n){return o.get_engineer_id(e,t.selected,"not_proccess")}},null,40,An),[[c["T"],t.selected]]),Object(c["j"])("datalist",En,[zn,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(a.allEngineers,(function(t){return Object(c["D"])(),Object(c["i"])("option",{key:t,value:t.admin_name},Object(c["P"])(t.admin_name),9,In)})),128))])])]),Object(c["j"])("div",Un,[Object(c["j"])("input",{value:"Send",type:"submit",onClick:function(e){return o.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,Jn)])])})),128)),Rn,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(a.every_tickets["proccessing"],(function(t,e){return Object(c["D"])(),Object(c["i"])("div",{class:"dispatch-table-row2",key:t},[Object(c["j"])("div",Vn,Object(c["P"])(t.ticket_title),1),Object(c["j"])("div",Gn,Object(c["P"])(t.created_at),1),Object(c["j"])("div",$n,[Object(c["j"])("div",Wn,[Object(c["l"])(" 現在負責人: "+Object(c["P"])(t.admin_name)+" ",1),Object(c["W"])(Object(c["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(n){return o.get_engineer_id(e,t.selected,"proccessing")}},null,40,Ln),[[c["T"],t.selected]]),Object(c["j"])("datalist",Nn,[Mn,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(a.allEngineers,(function(t){return Object(c["D"])(),Object(c["i"])("option",{key:t,value:t.admin_name},Object(c["P"])(t.admin_name),9,Hn)})),128))])])]),Object(c["j"])("div",qn,[Object(c["j"])("input",{value:"Send",type:"submit",onClick:function(e){return o.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,Fn)]),Object(c["j"])("div",Xn,[Object(c["j"])("input",{value:"Sucess",type:"submit",onClick:function(e){return o.dispatch_ticket(t.selected_id,t.ticket_id,"Processed")}},null,8,Qn)])])})),128)),Bn,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(a.every_tickets["proccessed"],(function(t,e){return Object(c["D"])(),Object(c["i"])("div",{class:"dispatch-table-row2",key:t},[Object(c["j"])("div",Kn,Object(c["P"])(t.ticket_title),1),Object(c["j"])("div",Yn,Object(c["P"])(t.created_at),1),Object(c["j"])("div",Zn,[Object(c["j"])("div",tc,[Object(c["l"])(" 現在負責人: "+Object(c["P"])(t.admin_name)+" ",1),Object(c["W"])(Object(c["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(n){return o.get_engineer_id(e,t.selected,"proccessed")}},null,40,ec),[[c["T"],t.selected]]),Object(c["j"])("datalist",nc,[cc,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(a.allEngineers,(function(t){return Object(c["D"])(),Object(c["i"])("option",{key:t,value:t.admin_name},Object(c["P"])(t.admin_name),9,ic)})),128))])])]),Object(c["j"])("div",ac,[Object(c["j"])("input",{value:"Send",type:"submit",onClick:function(e){return o.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,oc)])])})),128))])}var rc=n("b85c"),lc={data:function(){return{oneTicket:{},allEngineers:[],selected:"",temp_select_id:0,every_tickets:{not_proccess:[],proccessing:[],proccessed:[]},tickets_page:"0"}},inject:["alltickets","jwtToken"],methods:{dispatch_ticket:function(t,e,n){var c=this;if(void 0===t||""===e||""===n)return alert("請選擇負責人"),!1;var i="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/assign";fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt},body:JSON.stringify({admin_id:t,ticket_id:e,ticket_status:n})}).then((function(t){if(t.ok)return t.json()})).then((function(t){alert(t["data"]["message"]),c.reload()}))},find_engineer:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/users?role=Engineer",console.log(n),e.next=4,fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.allEngineers=t.allEngineers.concat(e["data"])}));case 4:return e.next=6,t.find_engineer_supervisor();case 6:case"end":return e.stop()}}),e)})))()},find_engineer_supervisor:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/users?role=Engineer Supervisor";fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.allEngineers=t.allEngineers.concat(e["data"])}))},get_engineer_id:function(t,e,n){var c,i=Object(rc["a"])(this.allEngineers);try{for(i.s();!(c=i.n()).done;){var a=c.value;a.admin_name===e&&(this.every_tickets[n][t].selected_id=a.admin_id)}}catch(o){i.e(o)}finally{i.f()}},getAlltickets:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets?page="+this.tickets_page+"&status=all&user_id=0&role=0";fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){var n,c=Object(rc["a"])(e["data"]);try{for(c.s();!(n=c.n()).done;){var i=n.value;"Not Processed"===i["ticket_status"]?t.every_tickets["not_proccess"].push(i):"Processing"===i["ticket_status"]?t.every_tickets["proccessing"].push(i):"Processed"===i["ticket_status"]&&t.every_tickets["proccessed"].push(i)}}catch(a){c.e(a)}finally{c.f()}}))},reload:function(){this.every_tickets={not_proccess:[],proccessing:[],proccessed:[]},setTimeout(this.getAlltickets(),3e3)}},created:function(){this.find_engineer(),this.find_engineer_supervisor(),this.getAlltickets()}};n("e40f");const uc=O()(lc,[["render",sc],["__scopeId","data-v-55de3340"]]);var dc=uc,jc=function(t){return Object(c["G"])("data-v-1e0802fe"),t=t(),Object(c["E"])(),t},bc={class:"thomas-all"},hc={id:"deadline-table",class:"thomas-right"},pc=jc((function(){return Object(c["j"])("li",{class:"deadline-header"},[Object(c["j"])("div",{class:"deadline-tr"},"歷史清單"),Object(c["j"])("div",{class:"deadline -tr"},"Created At")],-1)})),Oc=["onClick"],fc={class:"deadline-td1"},kc={class:"deadline-td2"},_c={class:"thomas-left"},mc={class:"pagination"},vc=jc((function(){return Object(c["j"])("li",null,[Object(c["j"])("a",{href:"#/home/history_ticket"},"«")],-1)})),gc=["onClick"],yc={href:"#/home/history_ticket"},wc=jc((function(){return Object(c["j"])("li",null,[Object(c["j"])("a",{href:"#/home/history_ticket"},"»")],-1)}));function Tc(t,e,n,i,a,o){return Object(c["D"])(),Object(c["i"])("div",bc,[Object(c["j"])("div",hc,[pc,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(a.every_tickets["proccessed"],(function(t){return Object(c["D"])(),Object(c["i"])("li",{class:"deadline-row",key:t,onClick:function(e){return o.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(c["j"])("div",fc,Object(c["P"])(t["ticket_title"]),1),Object(c["j"])("div",kc,Object(c["P"])(t["created_at"]),1)],8,Oc)})),128))]),Object(c["j"])("div",_c,[Object(c["j"])("ul",mc,[vc,(Object(c["D"])(!0),Object(c["i"])(c["b"],null,Object(c["J"])(a.all_page+1,(function(t){return Object(c["D"])(),Object(c["i"])("li",{key:t,onClick:function(e){return o.change_page(t)}},[Object(c["j"])("a",yc,Object(c["P"])(t),1)],8,gc)})),128)),wc])])])}var Dc={emits:["all_ticket_contents"],data:function(){return{oneTicket:{},tickets_page:0,every_tickets:{not_proccess:[],proccessing:[],proccessed:[]},all_page:0,page_class:""}},inject:["alltickets","jwtToken"],methods:{viewTicket:function(t,e,n){this.$emit("all_ticket_contents",t,e,n),this.$router.push("/userhome/tickets")},get_All_history_ticket:function(t){var e=this,n="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets?page="+String(t)+"&status=all&user_id=0&role=Engineer";fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log(t);var n,c=Object(rc["a"])(t["data"]);try{for(c.s();!(n=c.n()).done;){var i=n.value;"Not Processed"===i["ticket_status"]?e.every_tickets["not_proccess"].push(i):"Processing"===i["ticket_status"]?e.every_tickets["proccessing"].push(i):"Processed"===i["ticket_status"]&&e.every_tickets["proccessed"].push(i)}}catch(a){c.e(a)}finally{c.f()}console.log(t),e.all_page=t["total_page"],console.log(e.all_page)}))},change_page:function(t){this.get_All_history_ticket(t)}},created:function(){this.get_All_history_ticket(0)}};n("6580");const Pc=O()(Dc,[["render",Tc],["__scopeId","data-v-1e0802fe"]]);var Sc=Pc,Cc=Object(a["a"])({history:Object(a["b"])(""),routes:[{path:"/",component:W,alias:"/login"},{path:"/home",component:dt,props:function(t){return t.params},children:[{path:"",component:gt},{path:"tickets_table",component:Ge},{path:"tickets",component:Zt},{path:"history_ticket",component:Sc},{path:"settings",component:me},{path:"manage",component:Te},{path:"admin_create_engineer",component:yn},{path:"admin_dispatch_ticket",component:dc}]},{path:"/userhome",component:dt,props:function(t){return t.params},children:[{path:"",component:Rt},{path:"tickets_table",component:On},{path:"create_form",component:de},{path:"tickets",component:en},{path:"settings",component:me}]},{path:"/NotFound(.*)",redirect:"/"}]}),xc=Object(c["f"])(y),Ac=Object(i["a"])({modules:{},state:function(){return{userId:"",userName:"",userRole:""}},mutations:{login_user:function(t,e){t.userId=e.userid,t.userName=e.userName,t.userRole=e.userRole}}});xc.use(w["a"]),xc.use(Cc),T["default"].configure(P),xc.config.productionTip=!1,xc.use(Ac),xc.mount("#frameapp")},"5a66":function(t,e,n){"use strict";n("3828")},6580:function(t,e,n){"use strict";n("709b")},"709b":function(t,e,n){},"78a1":function(t,e,n){},"8d2e":function(t,e,n){},b0c3:function(t,e,n){},b22e:function(t,e,n){},b78d:function(t,e,n){"use strict";n("b0c3")},ba19:function(t,e,n){"use strict";n("b22e")},bb5e:function(t,e,n){"use strict";n("0590")},c33d:function(t,e,n){"use strict";n("78a1")},cbab:function(t,e,n){"use strict";n("22b2")},d8e0:function(t,e,n){"use strict";n("8d2e")},dfae:function(t,e,n){"use strict";n("3acf")},e40f:function(t,e,n){"use strict";n("2239")},e9d2:function(t,e,n){"use strict";n("3eca")},f265:function(t,e,n){}});
//# sourceMappingURL=app.fe9c0bc8.js.map