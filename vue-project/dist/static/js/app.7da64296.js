(function(t){function e(e){for(var n,s,o=e[0],r=e[1],l=e[2],u=0,b=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&b.push(i[s][0]),i[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);d&&d(e);while(b.length)b.shift()();return a.push.apply(a,l||[]),c()}function c(){for(var t,e=0;e<a.length;e++){for(var c=a[e],n=!0,o=1;o<c.length;o++){var r=c[o];0!==i[r]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=c[0]))}return t}var n={},i={app:0},a=[];function s(e){if(n[e])return n[e].exports;var c=n[e]={i:e,l:!1,exports:{}};return t[e].call(c.exports,c,c.exports,s),c.l=!0,c.exports}s.m=t,s.c=n,s.d=function(t,e,c){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(c,n,function(e){return t[e]}.bind(null,n));return c},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=r;a.push([0,"chunk-vendors"]),c()})({0:function(t,e,c){t.exports=c("56d7")},"00c7":function(t,e,c){"use strict";c("5822")},"06d2":function(t,e,c){},1:function(t,e){},2:function(t,e){},2172:function(t,e,c){},"29df":function(t,e,c){"use strict";c("d5e0")},"31d9":function(t,e,c){"use strict";c("2172")},"56d7":function(t,e,c){"use strict";c.r(e);c("e260"),c("e6cf"),c("cca6"),c("a79d");var n=c("7a23"),i=c("5502"),a=c("6c02"),s={id:"all"},o=Object(n["j"])("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},null,-1),r={id:"down"};function l(t,e,c,i,a,l){var d=Object(n["L"])("header-page"),u=Object(n["L"])("router-view");return Object(n["D"])(),Object(n["i"])("div",s,[o,Object(n["m"])(d,{id:"headerup"}),Object(n["j"])("div",r,[Object(n["m"])(u,{user:a.data,onLoginSuccess:l.changeLoginStatus},null,8,["user","onLoginSuccess"])])])}var d=c("1da1"),u=(c("96cf"),c("d3b7"),c("99af"),c("4e82"),function(t){return Object(n["G"])("data-v-dc438f4c"),t=t(),Object(n["E"])(),t}),b={class:"header"},j=u((function(){return Object(n["j"])("p",null,"Awan Ticket System",-1)}));function f(t,e){var c=Object(n["L"])("center");return Object(n["D"])(),Object(n["i"])("div",b,[Object(n["m"])(c,null,{default:Object(n["U"])((function(){return[j]})),_:1})])}c("c33d");var h=c("d959"),p=c.n(h);const O={},k=p()(O,[["render",f],["__scopeId","data-v-dc438f4c"]]);var v=k,m=c("bf82"),_={provide:function(){return{userlogindata:this.data,alltickets:this.fetchalltickets}},components:{"header-page":v},data:function(){return{data:{id:"",userRole:"",username:""},fetchalltickets:{},tickets_page:"0"}},methods:{getAllticket:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var c,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets",n=t.data["id"],i=t.data["userRole"],e.next=4,fetch(c+"?page="+t.tickets_page+"&status=not processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("undo"),console.log(e["data"]),t.fetchalltickets["undo"]=e["data"]}));case 4:return e.next=6,fetch(c+"?page="+t.tickets_page+"&status=processing&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("doing"),console.log(e["data"]),t.fetchalltickets["doing"]=e["data"]}));case 6:return fetch(c+"?page="+t.tickets_page+"&status=processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("done"),t.fetchalltickets["done"]=e["data"]})),e.next=9,t.concatTickets();case 9:case"end":return e.stop()}}),e)})))()},changeLoginStatus:function(t,e,c){var n=this;return Object(d["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("null"==t){i.next=5;break}return i.next=3,n.change_user(t,e,c);case 3:return i.next=5,n.getAllticket();case 5:case"end":return i.stop()}}),i)})))()},change_user:function(t,e,c){this.data["id"]=t,this.data["username"]=e,this.data["userRole"]=c},getLoginStatus:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].currentUserInfo();case 3:if(c=e.sent,null==c){e.next=10;break}return e.next=7,t.changeLoginStatus(c["attributes"]["custom:id"],c["attributes"]["custom:name"],c["attributes"]["custom:role"]);case 7:console.log("login success"),e.next=11;break;case 10:console.log("no attribute");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},concatTickets:function(){this.fetchalltickets["customer_doing"]=this.fetchalltickets["doing"],this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].concat(this.fetchalltickets["undo"]),this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].sort((function(t,e){return t.ticket_id>e.ticket_id?1:-1}))}},created:function(){this.getLoginStatus()}};c("31d9");const g=p()(_,[["render",l]]);var y=g,w=c("b80d"),T=c("00bd"),P={Auth:{mandatorySignId:!0,regionID:"us-west-2",userPoolId:"us-west-2_rUEXdjmle",userPoolWebClientId:"2mk360n1pl7o40r86rhcmims51",authenticationFlowType:"USER_PASSWORD_AUTH"}},D=P,S=(c("f9e3"),c("1a26"),function(t){return Object(n["G"])("data-v-73b15a47"),t=t(),Object(n["E"])(),t}),C={class:"container"},x={class:"form-div"},E=S((function(){return Object(n["j"])("label",{for:"account",class:"form-label"},"帳號 | Account",-1)})),U={class:"form-div"},A=S((function(){return Object(n["j"])("label",{for:"password",class:"form-label"},"密碼 | Password",-1)})),I={key:0},R=S((function(){return Object(n["j"])("p",{style:{color:"red"}},"帳號密碼錯誤 ",-1)})),J=[R],G={key:1};function z(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",C,[Object(n["j"])("form",null,[Object(n["j"])("div",x,[E,Object(n["V"])(Object(n["j"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.username=t}),type:"text",class:"form-control",id:"account",required:""},null,512),[[n["S"],a.username]])]),Object(n["j"])("div",U,[A,Object(n["V"])(Object(n["j"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.password=t}),type:"password",class:"form-control",id:"password",required:""},null,512),[[n["S"],a.password]])]),Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[2]||(e[2]=Object(n["W"])((function(){return s.getData&&s.getData.apply(s,arguments)}),["prevent"])),type:"submit",class:"form-btn"},"登入 | Login")]),"False"===a.isUser?(Object(n["D"])(),Object(n["i"])("div",I,J)):"True"===a.isUser?(Object(n["D"])(),Object(n["i"])("div",G," 登入成功 ")):Object(n["h"])("",!0)])])}var V={props:{user:{type:String}},data:function(){return{userdata:[],userid:"",checkuser:"",checkpassword:"",username:"",password:"",role:"",isUser:"null"}},methods:{login:function(){try{var t=m["a"].currentAuthenticatedUser();console.log(t)}catch(e){console.log(e)}},getData:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].signIn(t.username,t.password);case 3:return console.log("登入成功"),e.next=6,m["a"].currentUserInfo();case 6:c=e.sent,null!=c?(t.checkuser=c["attributes"]["custom:name"],t.role=c["attributes"]["custom:role"],t.userid=c["attributes"]["custom:id"],t.loginstatus()):(console.log("登入失敗"),t.isUser="False"),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),console.log("登入失敗"),t.isUser="False";case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},loginstatus:function(){"Engineer"===this.role||"Engineer Supervisor"===this.role?this.$router.push("/home"):this.$router.push("/userhome"),this.$emit("loginSuccess",this.userid,this.checkuser,this.role),this.username="",this.password=""}},emits:["loginSuccess"]};c("00c7");const $=p()(V,[["render",z],["__scopeId","data-v-73b15a47"]]);var L=$,W={class:"template-content"},M={class:"template-left"},H={class:"template-right"};function N(t,e,c,i,a,s){var o=Object(n["L"])("side-bar"),r=Object(n["L"])("router-view");return Object(n["D"])(),Object(n["i"])("div",W,[Object(n["j"])("div",M,[Object(n["m"])(o,{Userdata:c.user,onRedirect_home:e[0]||(e[0]=function(t){return s.againgetticket()})},null,8,["Userdata"])]),Object(n["j"])("div",H,[Object(n["m"])(r,{onAll_ticket_contents:s.transferTicketId},null,8,["onAll_ticket_contents"])])])}var q={id:"sidebar"},F={class:"list-unstyled"},Q=Object(n["l"])("Ticket"),X=Object(n["l"])("Ticket"),B=Object(n["l"])("Ticket"),K=Object(n["l"])("History Ticket"),Y=Object(n["l"])("History Ticket"),Z=Object(n["l"])("Setting"),tt={key:0},et={key:0},ct=Object(n["l"])(" 分派tickets "),nt=Object(n["l"])(" 新增Engineer帳號 "),it=Object(n["l"])("Logout");function at(t,e,c,i,a,s){var o=Object(n["L"])("router-link");return Object(n["D"])(),Object(n["i"])("nav",q,[Object(n["j"])("ul",F,[Object(n["j"])("div",null,[Object(n["j"])("li",null,"Hi, "+Object(n["P"])(c.Userdata["username"])+", "+Object(n["P"])(c.Userdata["userRole"]),1)]),Object(n["j"])("li",null,["Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("a",{key:0,href:"#/home",onClick:e[0]||(e[0]=function(){return s.make_redirect&&s.make_redirect.apply(s,arguments)})},"Home")):"Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("a",{key:1,href:"#/home",onClick:e[1]||(e[1]=function(){return s.make_redirect&&s.make_redirect.apply(s,arguments)})},"Home")):(Object(n["D"])(),Object(n["i"])("a",{key:2,href:"#/userhome",onClick:e[2]||(e[2]=function(){return s.make_redirect&&s.make_redirect.apply(s,arguments)})}," Home"))]),Object(n["j"])("li",null,["Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:0,to:"/home/tickets_table"},{default:Object(n["U"])((function(){return[Q]})),_:1})):"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:1,to:"/home/tickets_table"},{default:Object(n["U"])((function(){return[X]})),_:1})):(Object(n["D"])(),Object(n["g"])(o,{key:2,to:"/userhome/tickets_table"},{default:Object(n["U"])((function(){return[B]})),_:1}))]),Object(n["j"])("li",null,["Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:0,to:"/home/history_ticket"},{default:Object(n["U"])((function(){return[K]})),_:1})):"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:1,to:"/home/history_ticket"},{default:Object(n["U"])((function(){return[Y]})),_:1})):Object(n["h"])("",!0)]),Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/home/settings"},{default:Object(n["U"])((function(){return[Z]})),_:1})]),"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("li",tt,[Object(n["j"])("a",{onClick:e[3]||(e[3]=function(){return s.toggle_myticketSublist&&s.toggle_myticketSublist.apply(s,arguments)})},"Manager"),a.myticketSublist?(Object(n["D"])(),Object(n["i"])("ul",et,[Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/home/admin_dispatch_ticket",style:{"font-size":"15px"}},{default:Object(n["U"])((function(){return[ct]})),_:1})]),Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/home/admin_create_engineer",style:{"font-size":"15px"}},{default:Object(n["U"])((function(){return[nt]})),_:1})])])):Object(n["h"])("",!0)])):Object(n["h"])("",!0),Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/",onClick:s.logout},{default:Object(n["U"])((function(){return[it]})),_:1},8,["onClick"])])])])}var st={emits:["redirect_home"],props:{Userdata:{type:Object}},data:function(){return{myticketSublist:!1,historySublist:!1}},methods:{toTickets_table:function(){this.$router.push("tickets_table")},toTickets:function(){this.$router.push("tickets")},make_redirect:function(){this.$emit("redirect_home"),this.$router.push("/userhome")},toggle_myticketSublist:function(){this.myticketSublist=!this.myticketSublist},logout:function(){m["a"].signOut()}}};c("d8e0");const ot=p()(st,[["render",at],["__scopeId","data-v-5a4e4f61"]]);var rt=ot,lt={props:{user:{type:Object}},inject:["alltickets","ticketcontent"],provide:function(){return{ticketcontent:this.oneTicket}},components:{"side-bar":rt},data:function(){return{status:!1,all_tickets_content:{topics:["123"]},fetchalltickets:{},oneTicket:{},tickets_page:"0"}},methods:{getAllticket:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var c,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets",n=t.user["id"],i=t.user["userRole"],e.next=4,fetch(c+"?page="+t.tickets_page+"&status=not processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("undo"),console.log(e["data"]),t.fetchalltickets["undo"]=e["data"]}));case 4:return e.next=6,fetch(c+"?page="+t.tickets_page+"&status=processing&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("doing"),console.log(e["data"]),t.fetchalltickets["doing"]=e["data"]}));case 6:return fetch(c+"?page="+t.tickets_page+"&status=processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("done"),t.fetchalltickets["done"]=e["data"]})),e.next=9,t.concatTickets();case 9:case"end":return e.stop()}}),e)})))()},concatTickets:function(){this.fetchalltickets["customer_doing"]=this.fetchalltickets["doing"],this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].concat(this.fetchalltickets["undo"]),this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].sort((function(t,e){return t.ticket_id>e.ticket_id?1:-1}))},transferTicketId:function(t,e,c){this.oneTicket["ticketid"]=t,this.oneTicket["title"]=e,this.oneTicket["admin_name"]=c},againgetticket:function(){console.log("reload tickets"),this.getAllticket()},change_page:function(t){this.tickets_page=t}},created:function(){}};c("5fa5");const dt=p()(lt,[["render",N]]);var ut=dt,bt=function(t){return Object(n["G"])("data-v-3a17ff48"),t=t(),Object(n["E"])(),t},jt={class:"thomas-all"},ft=bt((function(){return Object(n["j"])("div",{class:"thomas-left"},[Object(n["j"])("button",{id:"pending-btn",onclick:"連結"},[Object(n["j"])("div",null,[Object(n["j"])("span",null,[Object(n["j"])("p",null,"待處理: 件")])]),Object(n["j"])("div",null,[Object(n["j"])("span",null,[Object(n["j"])("p",null,"上班加油!")])])])],-1)})),ht={id:"deadline-table",class:"thomas-right"},pt=Object(n["k"])('<li class="deadline-header" data-v-3a17ff48><div class="deadline-tr" data-v-3a17ff48>公告</div><div class="deadline-tr" data-v-3a17ff48><div class="onoffswitch" data-v-3a17ff48><input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" tabindex="0" checked data-v-3a17ff48><label class="onoffswitch-label" for="myonoffswitch" data-v-3a17ff48><span class="onoffswitch-inner" data-v-3a17ff48></span><span class="onoffswitch-switch" data-v-3a17ff48></span></label></div></div></li>',1),Ot=["onClick"],kt={class:"deadline-td1"},vt={class:"deadline-td2"},mt=Object(n["k"])('<div class="thomas-right-pagination" data-v-3a17ff48><ul class="pagination" data-v-3a17ff48><li data-v-3a17ff48><a href="#" data-v-3a17ff48>«</a></li><li data-v-3a17ff48><a href="#" data-v-3a17ff48>1</a></li><li data-v-3a17ff48><a class="active" href="#" data-v-3a17ff48>2</a></li><li data-v-3a17ff48><a href="#" data-v-3a17ff48>3</a></li><li data-v-3a17ff48><a href="#" data-v-3a17ff48>4</a></li><li data-v-3a17ff48><a href="#" data-v-3a17ff48>5</a></li><li data-v-3a17ff48><a href="#" data-v-3a17ff48>6</a></li><li data-v-3a17ff48><a href="#" data-v-3a17ff48>7</a></li><li data-v-3a17ff48><a href="#" data-v-3a17ff48>»</a></li></ul></div>',1);function _t(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",jt,[ft,Object(n["j"])("div",ht,[pt,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"deadline-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",kt,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",vt,Object(n["P"])(t["created_at"]),1)],8,Ot)})),128)),mt])])}var gt={emits:["all_ticket_contents"],data:function(){return{oneTicket:{},number_ticket:0}},inject:["alltickets"],methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/home/tickets")}},mounted:function(){}};c("d9d7");const yt=p()(gt,[["render",_t],["__scopeId","data-v-3a17ff48"]]);var wt=yt,Tt={class:"user-myticket"},Pt={class:"user-myticket-left"},Dt=Object(n["j"])("span",null,"建單",-1),St=[Dt],Ct={class:"user-myticket-right"},xt={class:"user-table"},Et=Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"user-table-tr1"},"進行中"),Object(n["j"])("div",{class:"user-table-tr2"},"更新時間")],-1),Ut=["onClick"],At={class:"user-table-td1","data-label":"Job Id"},It={class:"user-table-td2","data-label":"Payment Status"};function Rt(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Tt,[Object(n["j"])("div",Pt,[Object(n["j"])("button",{onClick:e[0]||(e[0]=Object(n["W"])((function(){return s.changeTemplatePage&&s.changeTemplatePage.apply(s,arguments)}),["prevent"])),class:"user-myticket-btn"},St)]),Object(n["j"])("div",Ct,[Object(n["j"])("div",xt,[Et,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["customer_doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",At,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",It,Object(n["P"])(t["created_at"]),1)],8,Ut)})),128))])])])}var Jt={provide:function(){return{ticketcontent:this.oneTicket}},inject:["alltickets"],emits:["changepage","all_ticket_contents"],data:function(){return{oneTicket:{}}},methods:{changeTemplatePage:function(){this.$router.push("/userhome/create_form"),this.$emit("changepage","create-form-page")},viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")}}};c("29df");const Gt=p()(Jt,[["render",Rt]]);var zt=Gt,Vt=function(t){return Object(n["G"])("data-v-f363b01a"),t=t(),Object(n["E"])(),t},$t={id:"tickets-content"},Lt={class:"tickets-title"},Wt={key:0,class:"tickets-user-dialogue"},Mt={key:1,class:"tickets-thomas-dialogue"},Ht=Vt((function(){return Object(n["j"])("th",null,"回覆內容: ",-1)})),Nt={key:0,class:"tickets-footer"},qt=Vt((function(){return Object(n["j"])("span",null,"傳送",-1)})),Ft=[qt];function Qt(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",$t,[Object(n["j"])("div",Lt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("td",null," Ticketname: "+Object(n["P"])(a.myticket["ticket_title"]),1),Object(n["j"])("td",null," Deadline: "+Object(n["P"])(a.myticket["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Customername: "+Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("td",null," 負責人: "+Object(n["P"])(a.myticket["admin_name"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Time: "+Object(n["P"])(a.myticket["created_at"]),1),Object(n["j"])("td",null," 緊急程度: "+Object(n["P"])(a.myticket["urgency"]),1)])])]),(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_ticket_contents,(function(t){return Object(n["D"])(),Object(n["i"])("div",{key:t},["customer"===t["owner"]?(Object(n["D"])(),Object(n["i"])("div",Wt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("th",null,"回覆內容: "+Object(n["P"])(t["ticket_content"]),1)])])])):(Object(n["D"])(),Object(n["i"])("div",Mt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["admin_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Ht,Object(n["j"])("th",null,Object(n["P"])(t["ticket_content"]),1)])])]))])})),128)),"Processed"!==a.myticket["ticket_status"]?(Object(n["D"])(),Object(n["i"])("div",Nt,[Object(n["V"])(Object(n["j"])("textarea",{name:"message",placeholder:"輸入訊息",id:"message_input",cols:"88","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.input_content=t})},null,512),[[n["S"],a.input_content]]),Object(n["j"])("button",{class:"user-ticket-btn",onClick:e[1]||(e[1]=function(t){return s.responseTicket()})},Ft)])):Object(n["h"])("",!0)])}c("e9c4");var Xt={props:["ticket"],inject:["alltickets","ticketcontent"],methods:{fetchTicket:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/";e+=String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.myticket=e["data"],console.log(t.myticket)}))},fetch_all_contents:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents?";e+="ticket_id="+String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),t.all_ticket_contents=e["data"]}))},responseTicket:function(){var t=this;console.log(this.input_content);var e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents";console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticket_id:this.ticketcontent["ticketid"],ticket_content:this.input_content,owner:"admin"})}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),alert(e["message"]),t.input_content="",t.reload()}))},reload:function(){console.log("reload"),setTimeout(this.fetch_all_contents(),3e3)}},data:function(){return{myticket:{},input_content:"",all_ticket_contents:{}}},created:function(){this.fetchTicket(),this.fetch_all_contents()}};c("7a6a");const Bt=p()(Xt,[["render",Qt],["__scopeId","data-v-f363b01a"]]);var Kt=Bt,Yt={id:"create-form-container"},Zt={action:"#",method:"post",id:"contact_form"},te={class:"text"},ee=Object(n["k"])('<div class="service-select" data-v-d8f11fd6><select data-v-d8f11fd6><option data-v-d8f11fd6>請選擇您需要的服務</option><option data-v-d8f11fd6>AWS_EC2</option><option data-v-d8f11fd6>AWS_VPC</option><option data-v-d8f11fd6>AWS_Route53</option><option data-v-d8f11fd6>AWS_Cloudfront</option><option data-v-d8f11fd6>AWS_S3</option><option data-v-d8f11fd6>Azure_SQL Database</option><option data-v-d8f11fd6>Azure_App Service</option><option data-v-d8f11fd6>Azure_Azure Active Directory</option><option data-v-d8f11fd6>Azure_Azure Maps</option><option data-v-d8f11fd6>Azure_VM</option></select></div>',1),ce={class:"message"},ne={class:"submit"};function ie(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Yt,[Object(n["j"])("div",Zt,[Object(n["j"])("div",te,[Object(n["V"])(Object(n["j"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.ticket_title=t}),type:"form-text",placeholder:"title",name:"telephone",id:"telephone_input",required:""},null,512),[[n["S"],a.ticket_title]])]),ee,Object(n["j"])("div",ce,[Object(n["V"])(Object(n["j"])("textarea",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.ticket_content=t}),name:"message",placeholder:"I'd like to ask a question",id:"message_input",cols:"30",rows:"5",required:""},null,512),[[n["S"],a.ticket_content]])]),Object(n["j"])("div",ne,[Object(n["j"])("input",{onClick:e[2]||(e[2]=function(){return s.submmitAndCreate&&s.submmitAndCreate.apply(s,arguments)}),type:"submit",value:"Send Message",id:"form_button"})])])])}var ae={inject:["userlogindata"],data:function(){return{ticket_title:"",ticket_content:""}},methods:{submmitAndCreate:function(){if(""===this.ticket_title||""===this.ticket_content)return alert("請填好表格"),!1;fetch("https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:this.userlogindata["id"],service_id:"3",ticket_title:this.ticket_title,ticket_content:this.ticket_content,urgency:1})}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log(t["data"]["message"]),alert(t["data"]["message"])})),this.ticket_title="",this.ticket_content="",this.$router.push("/userhome")},testCreate:function(){var t={customer_id:this.userlogindata["id"],service_id:"3",ticket_title:this.ticket_title,ticket_content:this.ticket_content,urgency:1};console.log(t)}}};c("715b");const se=p()(ae,[["render",ie],["__scopeId","data-v-d8f11fd6"]]);var oe=se,re=Object(n["j"])("h3",null," change password ",-1),le=Object(n["j"])("a",null,[Object(n["j"])("p",null,"original password"),Object(n["j"])("input",{type:"password"})],-1),de=Object(n["j"])("a",null,[Object(n["j"])("p",null,"new password"),Object(n["j"])("input",{type:"password"})],-1),ue=Object(n["j"])("p",null,[Object(n["j"])("button",null," 送出 ")],-1),be=[re,le,de,ue];function je(t,e){return Object(n["D"])(),Object(n["i"])("div",null,be)}const fe={},he=p()(fe,[["render",je]]);var pe=he,Oe=Object(n["j"])("div",null,[Object(n["j"])("button",null," 更改Engineer 資料 ")],-1);function ke(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",null,[Oe,Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[0]||(e[0]=function(){return s.change_to_dispatch&&s.change_to_dispatch.apply(s,arguments)})}," 分派tickets ")]),Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[1]||(e[1]=function(){return s.change_to_create&&s.change_to_create.apply(s,arguments)})}," 新增Engineer帳號 ")])])}var ve={methods:{change_to_create:function(){this.$router.push("/home/admin_create_engineer")},change_to_dispatch:function(){this.$router.push("/home/admin_dispatch_ticket")}}};const me=p()(ve,[["render",ke]]);var _e=me,ge=function(t){return Object(n["G"])("data-v-7db932cf"),t=t(),Object(n["E"])(),t},ye={class:"tickets-table"},we={class:"tickets-table-left"},Te=ge((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-left-tr"},"尚未處理")],-1)})),Pe=["onClick"],De={class:"user-table-td1","data-label":"Job Id"},Se={class:"tickets-table-right"},Ce=ge((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-right-tr"},"待處理")],-1)})),xe=["onClick"],Ee={class:"user-table-td1","data-label":"Job Id"},Ue=Object(n["k"])('<div class="tickets-table-pagination" data-v-7db932cf><ul class="pagination" data-v-7db932cf><li data-v-7db932cf><a href="#" data-v-7db932cf>«</a></li><li data-v-7db932cf><a href="#" data-v-7db932cf>1</a></li><li data-v-7db932cf><a class="active" href="#" data-v-7db932cf>2</a></li><li data-v-7db932cf><a href="#" data-v-7db932cf>3</a></li><li data-v-7db932cf><a href="#" data-v-7db932cf>4</a></li><li data-v-7db932cf><a href="#" data-v-7db932cf>5</a></li><li data-v-7db932cf><a href="#" data-v-7db932cf>6</a></li><li data-v-7db932cf><a href="#" data-v-7db932cf>7</a></li><li data-v-7db932cf><a href="#" data-v-7db932cf>»</a></li></ul></div>',1);function Ae(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",ye,[Object(n["j"])("div",we,[Te,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["undo"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",De,Object(n["P"])(t.ticket_title),1)],8,Pe)})),128))]),Object(n["j"])("div",Se,[Ce,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",Ee,Object(n["P"])(t.ticket_title),1)],8,xe)})),128))]),Ue])}var Ie={inject:["alltickets"],data:function(){return{doing:[],undo:[]}},methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/home/tickets")}},mounted:function(){}};c("d5c8");const Re=p()(Ie,[["render",Ae],["__scopeId","data-v-7db932cf"]]);var Je=Re,Ge=function(t){return Object(n["G"])("data-v-ccd2351a"),t=t(),Object(n["E"])(),t},ze={id:"tickets-content"},Ve={class:"tickets-title"},$e={key:0,class:"tickets-user-dialogue"},Le={key:1,class:"tickets-thomas-dialogue"},We=Ge((function(){return Object(n["j"])("th",null,"回覆內容: ",-1)})),Me={key:0,class:"tickets-footer"},He=Ge((function(){return Object(n["j"])("span",null,"傳送",-1)})),Ne=[He];function qe(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",ze,[Object(n["j"])("div",Ve,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("td",null," Ticketname: "+Object(n["P"])(a.myticket["ticket_title"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Customername: "+Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("td",null," 負責人: "+Object(n["P"])(a.myticket["admin_name"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Time: "+Object(n["P"])(a.myticket["created_at"]),1)])])]),(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_ticket_contents,(function(t){return Object(n["D"])(),Object(n["i"])("div",{key:t},["customer"===t["owner"]?(Object(n["D"])(),Object(n["i"])("div",$e,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("th",null,"回覆內容: "+Object(n["P"])(t["ticket_content"]),1)])])])):(Object(n["D"])(),Object(n["i"])("div",Le,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["admin_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[We,Object(n["j"])("th",null,Object(n["P"])(t["ticket_content"]),1)])])]))])})),128)),"Processed"!==a.myticket["ticket_status"]?(Object(n["D"])(),Object(n["i"])("div",Me,[Object(n["V"])(Object(n["j"])("textarea",{name:"message",placeholder:"輸入訊息",id:"message_input",cols:"88","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.input_content=t})},null,512),[[n["S"],a.input_content]]),Object(n["j"])("button",{class:"user-ticket-btn",onClick:e[1]||(e[1]=function(t){return s.responseTicket()})},Ne)])):Object(n["h"])("",!0)])}var Fe={inject:["alltickets","ticketcontent"],methods:{fetchTicket:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/";e+=String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.myticket=e["data"],console.log("testtttttttt"),console.log(t.myticket)}))},fetch_all_contents:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents?";e+="ticket_id="+String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),t.all_ticket_contents=e["data"]}))},responseTicket:function(){var t=this;console.log(this.input_content);var e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents";console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticket_id:this.ticketcontent["ticketid"],ticket_content:this.input_content,owner:"customer"})}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),alert(e["message"]),t.input_content="",t.reload()}))},reload:function(){console.log("reload"),setTimeout(this.fetch_all_contents(),3e3)}},data:function(){return{myticket:{},input_content:"",all_ticket_contents:{}}},created:function(){this.fetchTicket(),this.fetch_all_contents()}};c("6519");const Qe=p()(Fe,[["render",qe],["__scopeId","data-v-ccd2351a"]]);var Xe=Qe,Be=function(t){return Object(n["G"])("data-v-5a65ea30"),t=t(),Object(n["E"])(),t},Ke={class:"tickets-table"},Ye={class:"tickets-table-left"},Ze=Be((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-left-tr"},"待處理")],-1)})),tc=["onClick"],ec={class:"user-table-td1","data-label":"Job Id"},cc=Object(n["k"])('<div class="left-page" data-v-5a65ea30><ul class="pagination" data-v-5a65ea30><li data-v-5a65ea30><a href="#" data-v-5a65ea30>«</a></li><li data-v-5a65ea30><a href="#" data-v-5a65ea30>1</a></li><li data-v-5a65ea30><a class="active" href="#" data-v-5a65ea30>2</a></li><li data-v-5a65ea30><a href="#" data-v-5a65ea30>3</a></li><li data-v-5a65ea30><a href="#" data-v-5a65ea30>4</a></li><li data-v-5a65ea30><a href="#" data-v-5a65ea30>5</a></li><li data-v-5a65ea30><a href="#" data-v-5a65ea30>6</a></li><li data-v-5a65ea30><a href="#" data-v-5a65ea30>7</a></li><li data-v-5a65ea30><a href="#" data-v-5a65ea30>»</a></li></ul></div>',1),nc={class:"tickets-table-right"},ic=Be((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-right-tr"},"已處理")],-1)})),ac=["onClick"],sc={class:"user-table-td1","data-label":"Job Id"};function oc(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Ke,[Object(n["j"])("div",Ye,[Ze,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["customer_doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",ec,Object(n["P"])(t.ticket_title),1)],8,tc)})),128)),cc]),Object(n["j"])("div",nc,[ic,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["done"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",sc,Object(n["P"])(t.ticket_title),1)],8,ac)})),128))])])}var rc={inject:["alltickets"],data:function(){return{doing:[],done:[]}},methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")}},mounted:function(){}};c("91e4");const lc=p()(rc,[["render",oc],["__scopeId","data-v-5a65ea30"]]);var dc=lc,uc=function(t){return Object(n["G"])("data-v-c902abc2"),t=t(),Object(n["E"])(),t},bc=uc((function(){return Object(n["j"])("a",null,[Object(n["j"])("p",null,"新增工程師"),Object(n["j"])("p",null,"帳號"),Object(n["j"])("input",{type:"text"}),Object(n["j"])("p",null,"密碼"),Object(n["j"])("input",{type:"password"}),Object(n["j"])("div",{class:"submit"},[Object(n["j"])("input",{type:"submit",value:"確認",id:"form"})])],-1)})),jc=[bc];function fc(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",null,jc)}var hc={};c("b78d");const pc=p()(hc,[["render",fc],["__scopeId","data-v-c902abc2"]]);var Oc=pc,kc=function(t){return Object(n["G"])("data-v-9c660daa"),t=t(),Object(n["E"])(),t},vc={class:"dispatch-table"},mc=Object(n["k"])('<div data-v-9c660daa> 未配單 </div><div class="dispatch-table-row1" data-v-9c660daa><div class="dispatch-table-th1" data-v-9c660daa>ticket title</div><div class="dispatch-table-th2" data-v-9c660daa>deadline</div><div class="dispatch-table-th3" data-v-9c660daa>負責人</div><div class="dispatch-table-th4" data-v-9c660daa></div></div>',2),_c={class:"dispatch-table-td1"},gc={class:"dispatch-table-td2"},yc={class:"dispatch-table-td3"},wc={class:"engineer-select"},Tc=["onUpdate:modelValue","onInput"],Pc={id:"cityname"},Dc=kc((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),Sc=["value"],Cc={class:"dispatch-table-td4"},xc=["onClick"],Ec=Object(n["k"])('<div data-v-9c660daa> 已配單 </div><div class="dispatch-table-row1" data-v-9c660daa><div class="dispatch-table-th1" data-v-9c660daa>ticket title</div><div class="dispatch-table-th2" data-v-9c660daa>deadline</div><div class="dispatch-table-th3" data-v-9c660daa>負責人</div><div class="dispatch-table-th4" data-v-9c660daa></div><div class="dispatch-table-th4" data-v-9c660daa></div></div>',2),Uc={class:"dispatch-table-td1"},Ac={class:"dispatch-table-td2"},Ic={class:"dispatch-table-td3"},Rc={class:"engineer-select"},Jc=["onUpdate:modelValue","onInput"],Gc={id:"cityname"},zc=kc((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),Vc=["value"],$c={class:"dispatch-table-td4"},Lc=["onClick"],Wc={class:"dispatch-table-td4"},Mc=["onClick"],Hc=Object(n["k"])('<div data-v-9c660daa> 已完成 </div><div class="dispatch-table-row1" data-v-9c660daa><div class="dispatch-table-th1" data-v-9c660daa>ticket title</div><div class="dispatch-table-th2" data-v-9c660daa>deadline</div><div class="dispatch-table-th3" data-v-9c660daa>負責人</div><div class="dispatch-table-th4" data-v-9c660daa></div></div>',2),Nc={class:"dispatch-table-td1"},qc={class:"dispatch-table-td2"},Fc={class:"dispatch-table-td3"},Qc={class:"engineer-select"},Xc=["onUpdate:modelValue","onInput"],Bc={id:"cityname"},Kc=kc((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),Yc=["value"],Zc={class:"dispatch-table-td4"},tn=["onClick"];function en(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",vc,[mc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["not_proccess"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",_c,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",gc,Object(n["P"])(t.created_at),1),Object(n["j"])("div",yc,[Object(n["j"])("div",wc,[Object(n["V"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return s.get_engineer_id(e,t.selected,"not_proccess")}},null,40,Tc),[[n["S"],t.selected]]),Object(n["j"])("datalist",Pc,[Dc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,Sc)})),128))])])]),Object(n["j"])("div",Cc,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,xc)])])})),128)),Ec,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessing"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",Uc,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",Ac,Object(n["P"])(t.created_at),1),Object(n["j"])("div",Ic,[Object(n["j"])("div",Rc,[Object(n["l"])(" 現在負責人: "+Object(n["P"])(t.admin_name)+" ",1),Object(n["V"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return s.get_engineer_id(e,t.selected,"proccessing")}},null,40,Jc),[[n["S"],t.selected]]),Object(n["j"])("datalist",Gc,[zc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,Vc)})),128))])])]),Object(n["j"])("div",$c,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,Lc)]),Object(n["j"])("div",Wc,[Object(n["j"])("input",{value:"Sucess",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processed")}},null,8,Mc)])])})),128)),Hc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessed"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",Nc,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",qc,Object(n["P"])(t.created_at),1),Object(n["j"])("div",Fc,[Object(n["j"])("div",Qc,[Object(n["l"])(" 現在負責人: "+Object(n["P"])(t.admin_name)+" ",1),Object(n["V"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return s.get_engineer_id(e,t.selected,"proccessed")}},null,40,Xc),[[n["S"],t.selected]]),Object(n["j"])("datalist",Bc,[Kc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,Yc)})),128))])])]),Object(n["j"])("div",Zc,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,tn)])])})),128))])}var cn=c("b85c"),nn={data:function(){return{oneTicket:{},allEngineers:[],selected:"",temp_select_id:0,every_tickets:{not_proccess:[],proccessing:[],proccessed:[]},tickets_page:"0"}},inject:["alltickets"],methods:{dispatch_ticket:function(t,e,c){var n=this;if(void 0===t||""===e||""===c)return alert("請選擇負責人"),!1;console.log(t),console.log(e),console.log(c);var i="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/assign";console.log(i),fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({admin_id:t,ticket_id:e,ticket_status:c})}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log(t),alert(t["data"]["message"]),n.reload()}))},find_engineer:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/users?role=Engineer",console.log(c),e.next=4,fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e["data"]),t.allEngineers=t.allEngineers.concat(e["data"])}));case 4:return e.next=6,t.find_engineer_supervisor();case 6:case"end":return e.stop()}}),e)})))()},find_engineer_supervisor:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/users?role=Engineer Supervisor";console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e["data"]),t.allEngineers=t.allEngineers.concat(e["data"])}))},get_engineer_id:function(t,e,c){var n,i=Object(cn["a"])(this.allEngineers);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.admin_name===e&&(this.every_tickets[c][t].selected_id=a.admin_id,console.log(this.every_tickets[c][t].selected_id))}}catch(s){i.e(s)}finally{i.f()}},getAlltickets:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets?page="+this.tickets_page+"&status=all&user_id=0&role=0";fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){var c,n=Object(cn["a"])(e["data"]);try{for(n.s();!(c=n.n()).done;){var i=c.value;"Not Processed"===i["ticket_status"]?t.every_tickets["not_proccess"].push(i):"Processing"===i["ticket_status"]?t.every_tickets["proccessing"].push(i):"Processed"===i["ticket_status"]&&t.every_tickets["proccessed"].push(i)}}catch(a){n.e(a)}finally{n.f()}}))},reload:function(){this.every_tickets={not_proccess:[],proccessing:[],proccessed:[]},setTimeout(this.getAlltickets(),3e3)}},created:function(){this.find_engineer(),this.find_engineer_supervisor(),this.getAlltickets()}};c("d8a1");const an=p()(nn,[["render",en],["__scopeId","data-v-9c660daa"]]);var sn=an,on=function(t){return Object(n["G"])("data-v-54c6231a"),t=t(),Object(n["E"])(),t},rn={class:"thomas-all"},ln={id:"deadline-table",class:"thomas-right"},dn=on((function(){return Object(n["j"])("li",{class:"deadline-header"},[Object(n["j"])("div",{class:"deadline-tr"},"歷史清單"),Object(n["j"])("div",{class:"deadline -tr"},"Created At")],-1)})),un=["onClick"],bn={class:"deadline-td1"},jn={class:"deadline-td2"},fn=Object(n["k"])('<div class="thomas-left" data-v-54c6231a><ul class="pagination" data-v-54c6231a><li data-v-54c6231a><a href="#" data-v-54c6231a>«</a></li><li data-v-54c6231a><a href="#" data-v-54c6231a>1</a></li><li data-v-54c6231a><a class="active" href="#" data-v-54c6231a>2</a></li><li data-v-54c6231a><a href="#" data-v-54c6231a>3</a></li><li data-v-54c6231a><a href="#" data-v-54c6231a>4</a></li><li data-v-54c6231a><a href="#" data-v-54c6231a>5</a></li><li data-v-54c6231a><a href="#" data-v-54c6231a>6</a></li><li data-v-54c6231a><a href="#" data-v-54c6231a>7</a></li><li data-v-54c6231a><a href="#" data-v-54c6231a>»</a></li></ul></div>',1);function hn(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",rn,[Object(n["j"])("div",ln,[dn,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessed"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"deadline-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",bn,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",jn,Object(n["P"])(t["created_at"]),1)],8,un)})),128))]),fn])}var pn={emits:["all_ticket_contents"],data:function(){return{oneTicket:{},tickets_page:"0",every_tickets:{not_proccess:[],proccessing:[],proccessed:[]}}},inject:["alltickets"],methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")},get_All_history_ticket:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets?page="+this.tickets_page+"&status=all&user_id=0&role=0";fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){var c,n=Object(cn["a"])(e["data"]);try{for(n.s();!(c=n.n()).done;){var i=c.value;"Not Processed"===i["ticket_status"]?t.every_tickets["not_proccess"].push(i):"Processing"===i["ticket_status"]?t.every_tickets["proccessing"].push(i):"Processed"===i["ticket_status"]&&t.every_tickets["proccessed"].push(i)}}catch(a){n.e(a)}finally{n.f()}}))},change_page:function(t){this.tickets_page=t}},created:function(){this.get_All_history_ticket()}};c("67d9");const On=p()(pn,[["render",hn],["__scopeId","data-v-54c6231a"]]);var kn=On,vn=Object(a["a"])({history:Object(a["b"])(""),routes:[{path:"/",component:L,alias:"/login"},{path:"/home",component:ut,props:function(t){return t.params},children:[{path:"",component:wt},{path:"tickets_table",component:Je},{path:"tickets",component:Kt},{path:"history_ticket",component:kn},{path:"settings",component:pe},{path:"manage",component:_e},{path:"admin_create_engineer",component:Oc},{path:"admin_dispatch_ticket",component:sn}]},{path:"/userhome",component:ut,props:function(t){return t.params},children:[{path:"",component:zt},{path:"tickets_table",component:dc},{path:"create_form",component:oe},{path:"tickets",component:Xe},{path:"settings",component:pe}]},{path:"/NotFound(.*)",redirect:"/"}]}),mn=Object(n["f"])(y),_n=Object(i["a"])({modules:{},state:function(){return{}}});mn.use(w["a"]),mn.use(vn),T["default"].configure(D),mn.config.productionTip=!1,mn.use(_n),mn.mount("#frameapp")},5822:function(t,e,c){},"5fa5":function(t,e,c){"use strict";c("97c2")},6519:function(t,e,c){"use strict";c("7f81")},"67d9":function(t,e,c){"use strict";c("06d2")},"715b":function(t,e,c){"use strict";c("b5f6")},7334:function(t,e,c){},"78a1":function(t,e,c){},"78f3":function(t,e,c){},"7a6a":function(t,e,c){"use strict";c("f6d3")},"7f81":function(t,e,c){},"85b6":function(t,e,c){},"8d2e":function(t,e,c){},"91e4":function(t,e,c){"use strict";c("85b6")},"97c2":function(t,e,c){},b0c3:function(t,e,c){},b5f6:function(t,e,c){},b78d:function(t,e,c){"use strict";c("b0c3")},c33d:function(t,e,c){"use strict";c("78a1")},d5c8:function(t,e,c){"use strict";c("ef10")},d5e0:function(t,e,c){},d8a1:function(t,e,c){"use strict";c("7334")},d8e0:function(t,e,c){"use strict";c("8d2e")},d9d7:function(t,e,c){"use strict";c("78f3")},ef10:function(t,e,c){},f6d3:function(t,e,c){}});
//# sourceMappingURL=app.7da64296.js.map