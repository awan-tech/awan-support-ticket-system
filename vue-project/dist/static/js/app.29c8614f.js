(function(t){function e(e){for(var n,o,s=e[0],r=e[1],l=e[2],d=0,j=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&j.push(i[o][0]),i[o]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(j.length)j.shift()();return a.push.apply(a,l||[]),c()}function c(){for(var t,e=0;e<a.length;e++){for(var c=a[e],n=!0,s=1;s<c.length;s++){var r=c[s];0!==i[r]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=c[0]))}return t}var n={},i={app:0},a=[];function o(e){if(n[e])return n[e].exports;var c=n[e]={i:e,l:!1,exports:{}};return t[e].call(c.exports,c,c.exports,o),c.l=!0,c.exports}o.m=t,o.c=n,o.d=function(t,e,c){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(c,n,function(e){return t[e]}.bind(null,n));return c},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],r=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=r;a.push([0,"chunk-vendors"]),c()})({0:function(t,e,c){t.exports=c("56d7")},"01b3":function(t,e,c){},"02bd":function(t,e,c){"use strict";c("1550")},1:function(t,e){},1550:function(t,e,c){},"18e0":function(t,e,c){"use strict";c("2aa1")},2:function(t,e){},2239:function(t,e,c){},"22b2":function(t,e,c){},"2aa1":function(t,e,c){},"3acf":function(t,e,c){},"3eca":function(t,e,c){},"56d7":function(t,e,c){"use strict";c.r(e);c("e260"),c("e6cf"),c("cca6"),c("a79d");var n=c("7a23"),i=c("5502"),a=c("6c02"),o={id:"all"},s=Object(n["j"])("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},null,-1),r={id:"down"};function l(t,e,c,i,a,l){var u=Object(n["L"])("header-page"),d=Object(n["L"])("router-view");return Object(n["D"])(),Object(n["i"])("div",o,[s,Object(n["m"])(u,{id:"headerup"}),Object(n["j"])("div",r,[Object(n["m"])(d,{user:a.data,onLoginSuccess:l.changeLoginStatus},null,8,["user","onLoginSuccess"])])])}var u=c("1da1"),d=(c("96cf"),c("d3b7"),c("99af"),c("4e82"),c("a9e3"),function(t){return Object(n["G"])("data-v-dc438f4c"),t=t(),Object(n["E"])(),t}),j={class:"header"},b=d((function(){return Object(n["j"])("p",null,"Awan Ticket System",-1)}));function h(t,e){var c=Object(n["L"])("center");return Object(n["D"])(),Object(n["i"])("div",j,[Object(n["m"])(c,null,{default:Object(n["V"])((function(){return[b]})),_:1})])}c("c33d");var p=c("d959"),O=c.n(p);const f={},k=O()(f,[["render",h],["__scopeId","data-v-dc438f4c"]]);var _=k,m=c("bf82"),v={provide:function(){return{userlogindata:this.data,alltickets:this.fetchalltickets,all_tickets_page:this.temp_all_tickets_page,jwtToken:this.temp_JWTtoken}},components:{"header-page":_},data:function(){return{data:{id:"",userRole:"",username:""},fetchalltickets:{},tickets_page:"0",temp_all_tickets_page:{undo:0,doing:0,done:0},temp_JWTtoken:{jwt:""}}},methods:{getAllticket:function(t){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function c(){var n,i,a;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return n="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets",i=e.data["id"],a=e.data["userRole"],c.next=4,fetch(n+"?page="+String(e.tickets_page)+"&status=not processed&user_id="+i+"&role="+a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(t){if(t.ok)return t.json()})).catch((function(t){console.log(t)})).then((function(t){console.log("undo"),console.log(t["data"]),e.fetchalltickets["undo"]=t["data"],e.temp_all_tickets_page["undo"]=t["total_page"]}));case 4:return c.next=6,fetch(n+"?page="+String(e.tickets_page)+"&status=processing&user_id="+i+"&role="+a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(t){if(t.ok)return t.json()})).catch((function(t){console.log(t)})).then((function(t){console.log("doing"),console.log(t),e.fetchalltickets["doing"]=t["data"],e.temp_all_tickets_page["doing"]=t["total_page"]}));case 6:return fetch(n+"?page="+String(e.tickets_page)+"&status=processed&user_id="+i+"&role="+a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t}}).then((function(t){if(t.ok)return t.json()})).catch((function(t){console.log(t)})).then((function(t){console.log("done"),e.fetchalltickets["done"]=t["data"],e.temp_all_tickets_page["done"]=t["total_page"]})),c.next=9,e.concatTickets();case 9:case"end":return c.stop()}}),c)})))()},changeLoginStatus:function(t,e,c){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("null"==t){i.next=9;break}return i.next=3,n.change_user(t,e,c);case 3:return i.next=5,m["a"].currentSession();case 5:return a=i.sent,n.temp_JWTtoken.jwt=a["idToken"]["jwtToken"],i.next=9,n.getAllticket(n.temp_JWTtoken.jwt);case 9:case"end":return i.stop()}}),i)})))()},change_user:function(t,e,c){this.data["id"]=t,this.data["username"]=e,this.data["userRole"]=c},getLoginStatus:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].currentUserInfo();case 3:if(c=e.sent,null==c){e.next=10;break}return console.log("login success"),e.next=8,t.changeLoginStatus(c["attributes"]["custom:id"],c["attributes"]["custom:name"],c["attributes"]["custom:role"]);case 8:e.next=11;break;case 10:console.log("no attribute");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},concatTickets:function(){this.fetchalltickets["customer_doing"]=this.fetchalltickets["doing"],this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].concat(this.fetchalltickets["undo"]),this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].sort((function(t,e){return t.ticket_id>e.ticket_id?1:-1}))},change_page:function(t,e){console.log("change page"),"jump"===t?this.tickets_page=Number(e):"add"===t?this.tickets_page+=1:"sub"===t&&(this.tickets_page-=1)}},created:function(){this.getLoginStatus()}};c("e9d2");const g=O()(v,[["render",l]]);var y=g,w=c("b80d"),T=c("00bd"),D={Auth:{mandatorySignId:!0,regionID:"us-west-2",userPoolId:"us-west-2_rUEXdjmle",userPoolWebClientId:"2mk360n1pl7o40r86rhcmims51",authenticationFlowType:"USER_PASSWORD_AUTH"}},P=D,S=(c("f9e3"),c("1a26"),function(t){return Object(n["G"])("data-v-549b71d6"),t=t(),Object(n["E"])(),t}),C={class:"container"},x={class:"form-div"},A=S((function(){return Object(n["j"])("label",{for:"account",class:"form-label"},"帳號 | Account",-1)})),E={class:"form-div"},z=S((function(){return Object(n["j"])("label",{for:"password",class:"form-label"},"密碼 | Password",-1)})),I={key:0},U=S((function(){return Object(n["j"])("p",{style:{color:"red"}},"帳號密碼錯誤 ",-1)})),J=[U],R={key:1};function V(t,e,c,i,a,o){return Object(n["D"])(),Object(n["i"])("div",C,[Object(n["j"])("form",null,[Object(n["j"])("div",x,[A,Object(n["W"])(Object(n["j"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.username=t}),type:"text",class:"form-control",id:"account",required:""},null,512),[[n["T"],a.username]])]),Object(n["j"])("div",E,[z,Object(n["W"])(Object(n["j"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.password=t}),type:"password",class:"form-control",id:"password",required:""},null,512),[[n["T"],a.password]])]),Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[2]||(e[2]=Object(n["X"])((function(){return o.getData&&o.getData.apply(o,arguments)}),["prevent"])),type:"submit",class:"form-btn"},"登入 | Login")]),"False"===a.isUser?(Object(n["D"])(),Object(n["i"])("div",I,J)):"True"===a.isUser?(Object(n["D"])(),Object(n["i"])("div",R," 登入成功 ")):Object(n["h"])("",!0)])])}var G={props:{user:{type:String}},data:function(){return{userdata:[],userid:"",checkuser:"",checkpassword:"",username:"",password:"",role:"",isUser:"null"}},methods:{login:function(){try{var t=m["a"].currentAuthenticatedUser();console.log(t)}catch(e){console.log(e)}},getData:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].signIn(t.username,t.password);case 3:return console.log("登入成功"),e.next=6,m["a"].currentUserInfo();case 6:c=e.sent,null!=c?(t.checkuser=c["attributes"]["custom:name"],t.role=c["attributes"]["custom:role"],t.userid=c["attributes"]["custom:id"],t.loginstatus()):(console.log("登入失敗"),t.isUser="False"),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),console.log("登入失敗"),t.isUser="False";case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},loginstatus:function(){"Engineer"===this.role||"Engineer Supervisor"===this.role?this.$router.push("/home"):this.$router.push("/userhome"),this.$emit("loginSuccess",this.userid,this.checkuser,this.role),this.$store.commit({type:"login_user",userId:this.userid,userName:this.checkuser,userRole:this.role}),this.username="",this.password=""}},emits:["loginSuccess"]};c("ba19");const $=O()(G,[["render",V],["__scopeId","data-v-549b71d6"]]);var W=$,L={class:"template-content"},N={class:"template-left"},M={class:"template-right"};function H(t,e,c,i,a,o){var s=Object(n["L"])("side-bar"),r=Object(n["L"])("router-view");return Object(n["D"])(),Object(n["i"])("div",L,[Object(n["j"])("div",N,[Object(n["m"])(s,{Userdata:c.user,onRedirect_home:e[0]||(e[0]=function(t){return o.againgetticket()})},null,8,["Userdata"])]),Object(n["j"])("div",M,[Object(n["m"])(r,{onAll_ticket_contents:o.transferTicketId},null,8,["onAll_ticket_contents"])])])}var q={id:"sidebar"},F={class:"list-unstyled"},X=Object(n["l"])("Ticket"),Q=Object(n["l"])("Ticket"),B=Object(n["l"])("Ticket"),K=Object(n["l"])("History Ticket"),Y=Object(n["l"])("History Ticket"),Z=Object(n["l"])("Setting"),tt={key:0},et={key:0},ct=Object(n["l"])(" 分派tickets "),nt=Object(n["l"])(" 新增Engineer帳號 "),it=Object(n["l"])("Logout");function at(t,e,c,i,a,o){var s=Object(n["L"])("router-link");return Object(n["D"])(),Object(n["i"])("nav",q,[Object(n["j"])("ul",F,[Object(n["j"])("div",null,[Object(n["j"])("li",null,"Hi, "+Object(n["P"])(c.Userdata["username"])+", "+Object(n["P"])(c.Userdata["userRole"]),1)]),Object(n["j"])("li",null,["Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("a",{key:0,href:"#/home",onClick:e[0]||(e[0]=function(){return o.make_redirect&&o.make_redirect.apply(o,arguments)})},"Home")):"Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("a",{key:1,href:"#/home",onClick:e[1]||(e[1]=function(){return o.make_redirect&&o.make_redirect.apply(o,arguments)})},"Home")):(Object(n["D"])(),Object(n["i"])("a",{key:2,href:"#/userhome",onClick:e[2]||(e[2]=function(){return o.make_redirect&&o.make_redirect.apply(o,arguments)})}," Home"))]),Object(n["j"])("li",null,["Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(s,{key:0,to:"/home/tickets_table"},{default:Object(n["V"])((function(){return[X]})),_:1})):"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(s,{key:1,to:"/home/tickets_table"},{default:Object(n["V"])((function(){return[Q]})),_:1})):(Object(n["D"])(),Object(n["g"])(s,{key:2,to:"/userhome/tickets_table"},{default:Object(n["V"])((function(){return[B]})),_:1}))]),Object(n["j"])("li",null,["Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(s,{key:0,to:"/home/history_ticket"},{default:Object(n["V"])((function(){return[K]})),_:1})):"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(s,{key:1,to:"/home/history_ticket"},{default:Object(n["V"])((function(){return[Y]})),_:1})):Object(n["h"])("",!0)]),Object(n["j"])("li",null,[Object(n["m"])(s,{to:"/home/settings"},{default:Object(n["V"])((function(){return[Z]})),_:1})]),"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("li",tt,[Object(n["j"])("a",{onClick:e[3]||(e[3]=function(){return o.toggle_myticketSublist&&o.toggle_myticketSublist.apply(o,arguments)})},"Manager"),a.myticketSublist?(Object(n["D"])(),Object(n["i"])("ul",et,[Object(n["j"])("li",null,[Object(n["m"])(s,{to:"/home/admin_dispatch_ticket",style:{"font-size":"15px"}},{default:Object(n["V"])((function(){return[ct]})),_:1})]),Object(n["j"])("li",null,[Object(n["m"])(s,{to:"/home/admin_create_engineer",style:{"font-size":"15px"}},{default:Object(n["V"])((function(){return[nt]})),_:1})])])):Object(n["h"])("",!0)])):Object(n["h"])("",!0),Object(n["j"])("li",null,[Object(n["m"])(s,{to:"/",onClick:o.logout},{default:Object(n["V"])((function(){return[it]})),_:1},8,["onClick"])])])])}var ot={emits:["redirect_home"],props:{Userdata:{type:Object}},data:function(){return{myticketSublist:!1,historySublist:!1}},methods:{toTickets_table:function(){this.$router.push("tickets_table")},toTickets:function(){this.$router.push("tickets")},make_redirect:function(){this.$emit("redirect_home"),this.$router.push("/userhome")},toggle_myticketSublist:function(){this.myticketSublist=!this.myticketSublist},logout:function(){m["a"].signOut()}}};c("d8e0");const st=O()(ot,[["render",at],["__scopeId","data-v-5a4e4f61"]]);var rt=st,lt={emits:["all_ticket_contents","change_page_to_app"],props:{user:{type:Object}},inject:["alltickets","ticketcontent","jwtToken"],provide:function(){return{ticketcontent:this.oneTicket}},components:{"side-bar":rt},data:function(){return{status:!1,all_tickets_content:{topics:["123"]},fetchalltickets:{},oneTicket:{},tickets_page:"0"}},methods:{getAllticket:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets",n=t.user["id"],i=t.user["userRole"],e.next=4,fetch(c+"?page="+t.tickets_page+"&status=not processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("undo"),console.log(e["data"]),t.fetchalltickets["undo"]=e["data"]}));case 4:return e.next=6,fetch(c+"?page="+t.tickets_page+"&status=processing&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("doing"),console.log(e["data"]),t.fetchalltickets["doing"]=e["data"]}));case 6:return fetch(c+"?page="+t.tickets_page+"&status=processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("done"),t.fetchalltickets["done"]=e["data"]})),e.next=9,t.concatTickets();case 9:case"end":return e.stop()}}),e)})))()},concatTickets:function(){this.fetchalltickets["customer_doing"]=this.fetchalltickets["doing"],this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].concat(this.fetchalltickets["undo"]),this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].sort((function(t,e){return t.ticket_id>e.ticket_id?1:-1}))},transferTicketId:function(t,e,c){this.oneTicket["ticketid"]=t,this.oneTicket["title"]=e,this.oneTicket["admin_name"]=c},againgetticket:function(){console.log("reload tickets"),this.getAllticket()}},created:function(){}};c("02bd");const ut=O()(lt,[["render",H]]);var dt=ut,jt=function(t){return Object(n["G"])("data-v-3f092196"),t=t(),Object(n["E"])(),t},bt={class:"thomas-all"},ht={id:"deadline-table",class:"thomas-right"},pt=Object(n["k"])('<li class="deadline-header" data-v-3f092196><div class="deadline-tr" data-v-3f092196>公告</div><div class="deadline -tr" data-v-3f092196>tag</div><div class="deadline-tr" data-v-3f092196><div class="onoffswitch" data-v-3f092196><input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" tabindex="0" checked data-v-3f092196><label class="onoffswitch-label" for="myonoffswitch" data-v-3f092196><span class="onoffswitch-inner" data-v-3f092196></span><span class="onoffswitch-switch" data-v-3f092196></span></label></div></div></li>',1),Ot=["onClick"],ft={class:"deadline-td1"},kt={class:"deadline-td2"},_t={key:0},mt={key:1},vt=jt((function(){return Object(n["j"])("a",null,"none",-1)})),gt=[vt],yt={class:"deadline-td3"};function wt(t,e,c,i,a,o){return Object(n["D"])(),Object(n["i"])("div",bt,[Object(n["j"])("div",ht,[pt,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(o.alltickets["doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"deadline-row",key:t,onClick:function(e){return o.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",ft,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",kt,[t.ticket_ai_tags.length>0?(Object(n["D"])(),Object(n["i"])("a",_t,[(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(t.ticket_ai_tags,(function(t){return Object(n["D"])(),Object(n["i"])("a",{key:t},Object(n["P"])(t),1)})),128))])):(Object(n["D"])(),Object(n["i"])("a",mt,gt))]),Object(n["j"])("div",yt,Object(n["P"])(t["created_at"]),1)],8,Ot)})),128))])])}var Tt={emits:["all_ticket_contents"],data:function(){return{oneTicket:{},number_ticket:0}},inject:["alltickets"],methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/home/tickets")},change_page:function(){}},mounted:function(){}};c("c4d7");const Dt=O()(Tt,[["render",wt],["__scopeId","data-v-3f092196"]]);var Pt=Dt,St={class:"user-myticket"},Ct={class:"user-myticket-left"},xt=Object(n["j"])("span",null,"建單",-1),At=[xt],Et={class:"user-myticket-right"},zt={class:"user-table"},It=Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"user-table-tr1"},"進行中"),Object(n["j"])("div",{class:"user-table-tr1"},"tag"),Object(n["j"])("div",{class:"user-table-tr2"},"更新時間")],-1),Ut=["onClick"],Jt={class:"user-table-td1","data-label":"Job Id"},Rt={class:"user-table-td2","data-label":""},Vt={key:0},Gt={key:1},$t=Object(n["j"])("a",null,"none",-1),Wt=[$t],Lt={class:"user-table-td3","data-label":"Payment Status"};function Nt(t,e,c,i,a,o){return Object(n["D"])(),Object(n["i"])("div",St,[Object(n["j"])("div",Ct,[Object(n["j"])("button",{onClick:e[0]||(e[0]=Object(n["X"])((function(){return o.changeTemplatePage&&o.changeTemplatePage.apply(o,arguments)}),["prevent"])),class:"user-myticket-btn"},At)]),Object(n["j"])("div",Et,[Object(n["j"])("div",zt,[It,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(o.alltickets["customer_doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return o.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",Jt,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",Rt,[t.ticket_ai_tags.length>0?(Object(n["D"])(),Object(n["i"])("a",Vt,[(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(t.ticket_ai_tags,(function(t){return Object(n["D"])(),Object(n["i"])("a",{key:t},Object(n["P"])(t),1)})),128))])):(Object(n["D"])(),Object(n["i"])("a",Gt,Wt))]),Object(n["j"])("div",Lt,Object(n["P"])(t["created_at"]),1)],8,Ut)})),128))])])])}var Mt={provide:function(){return{ticketcontent:this.oneTicket}},inject:["alltickets"],emits:["changepage","all_ticket_contents"],data:function(){return{oneTicket:{}}},methods:{changeTemplatePage:function(){this.$router.push("/userhome/create_form"),this.$emit("changepage","create-form-page")},viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")}}};c("6555");const Ht=O()(Mt,[["render",Nt]]);var qt=Ht,Ft=function(t){return Object(n["G"])("data-v-406deb16"),t=t(),Object(n["E"])(),t},Xt={id:"tickets-content"},Qt={class:"tickets-title"},Bt={key:0},Kt=Object(n["l"])("Tag: "),Yt={key:1},Zt={key:0,class:"tickets-user-dialogue"},te={key:1,class:"tickets-thomas-dialogue"},ee=Ft((function(){return Object(n["j"])("th",null,"回覆內容: ",-1)})),ce={key:0,class:"tickets-footer"},ne=Ft((function(){return Object(n["j"])("span",null,"傳送",-1)})),ie=[ne];function ae(t,e,c,i,a,o){return Object(n["D"])(),Object(n["i"])("div",Xt,[Object(n["j"])("div",Qt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("td",null," Ticket Name : "+Object(n["P"])(a.myticket["ticket_title"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Customer Name : "+Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("td",null," 負責人 : "+Object(n["P"])(a.myticket["admin_name"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Time : "+Object(n["P"])(a.myticket["created_at"]),1),Object(n["j"])("td",null," 緊急程度 : "+Object(n["P"])(a.myticket["urgency"]),1),Object(n["j"])("td",null,[a.tag_length>0?(Object(n["D"])(),Object(n["i"])("a",Bt,[Kt,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.myticket["ticket_ai_tags"],(function(t){return Object(n["D"])(),Object(n["i"])("a",{key:t},Object(n["P"])(t),1)})),128))])):(Object(n["D"])(),Object(n["i"])("a",Yt,"Tag : none"))])])])]),(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_ticket_contents,(function(t){return Object(n["D"])(),Object(n["i"])("div",{key:t},["customer"===t["owner"]?(Object(n["D"])(),Object(n["i"])("div",Zt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("th",null,"回覆內容: "+Object(n["P"])(t["ticket_content"]),1)])])])):(Object(n["D"])(),Object(n["i"])("div",te,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["admin_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[ee,Object(n["j"])("th",null,Object(n["P"])(t["ticket_content"]),1)])])]))])})),128)),"Processed"!==a.myticket["ticket_status"]?(Object(n["D"])(),Object(n["i"])("div",ce,[Object(n["W"])(Object(n["j"])("textarea",{name:"message",placeholder:"輸入訊息",id:"message_input",cols:"88","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.input_content=t})},null,512),[[n["T"],a.input_content]]),Object(n["j"])("button",{class:"user-ticket-btn",onClick:e[1]||(e[1]=function(t){return o.responseTicket()})},ie)])):Object(n["h"])("",!0)])}c("e9c4");var oe={props:["ticket"],inject:["alltickets","ticketcontent","jwtToken"],methods:{fetchTicket:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/";e+=String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.myticket=e["data"],console.log(t.myticket),t.tag_length=t.myticket["ticket_ai_tags"].length,console.log(t.myticket)}))},fetch_all_contents:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents?";e+="ticket_id="+String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),t.all_ticket_contents=e["data"]}))},responseTicket:function(){var t=this;console.log(this.input_content);var e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents";console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt},body:JSON.stringify({ticket_id:this.ticketcontent["ticketid"],ticket_content:this.input_content,owner:"admin"})}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),alert(e["message"]),t.input_content="",t.reload()}))},reload:function(){console.log("reload"),setTimeout(this.fetch_all_contents(),3e3)}},data:function(){return{myticket:{},input_content:"",all_ticket_contents:{},tag_length:0}},created:function(){this.fetchTicket(),this.fetch_all_contents()}};c("d7c9");const se=O()(oe,[["render",ae],["__scopeId","data-v-406deb16"]]);var re=se,le={id:"create-form-container"},ue={action:"#",method:"post",id:"contact_form"},de={class:"text"},je={class:"service-select"},be=Object(n["k"])("<option data-v-d952b396>請選擇您需要的服務</option><option data-v-d952b396>1.AWS_EC2</option><option data-v-d952b396>2.AWS_VPC</option><option data-v-d952b396>3.AWS_Route53</option><option data-v-d952b396>4.AWS_Cloudfront</option><option data-v-d952b396>5.AWS_S3</option><option data-v-d952b396>6.Azure_SQL Database</option><option data-v-d952b396>7.Azure_App Service</option><option data-v-d952b396>8.Azure_Azure Active Directory</option><option data-v-d952b396>9.Azure_Azure Maps</option><option data-v-d952b396>10.Azure_VM</option><option data-v-d952b396>12.AWS_Other</option><option data-v-d952b396>13.Azure_Other</option>",13),he=[be],pe={class:"message"},Oe={class:"submit"};function fe(t,e,c,i,a,o){return Object(n["D"])(),Object(n["i"])("div",le,[Object(n["j"])("div",ue,[Object(n["j"])("div",de,[Object(n["W"])(Object(n["j"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.ticket_title=t}),type:"form-text",placeholder:"title",name:"telephone",id:"telephone_input",required:""},null,512),[[n["T"],a.ticket_title]])]),Object(n["j"])("div",je,[Object(n["W"])(Object(n["j"])("select",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.type=t})},he,512),[[n["S"],a.type]])]),Object(n["j"])("div",pe,[Object(n["W"])(Object(n["j"])("textarea",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return a.ticket_content=t}),name:"message",placeholder:"I'd like to ask a question",id:"message_input",cols:"30",rows:"5",required:""},null,512),[[n["T"],a.ticket_content]])]),Object(n["j"])("div",Oe,[Object(n["j"])("input",{onClick:e[3]||(e[3]=function(){return o.submmitAndCreate&&o.submmitAndCreate.apply(o,arguments)}),type:"submit",value:"Send Message",id:"form_button"})])])])}c("ac1f"),c("1276");var ke={inject:["userlogindata","jwtToken"],data:function(){return{ticket_title:"",ticket_content:"",type:""}},methods:{submmitAndCreate:function(){if(""===this.ticket_title||""===this.ticket_content||""===this.type)return alert("請填好表格"),!1;fetch("https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt},body:JSON.stringify({customer_id:this.userlogindata["id"],service_id:this.type.split(".")[0],ticket_title:this.ticket_title,ticket_content:this.ticket_content,urgency:"1"})}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log(t["data"]["message"]),alert(t["data"]["message"])})),this.ticket_title="",this.ticket_content="",this.$router.push("/userhome")},testCreate:function(){var t={customer_id:this.userlogindata["id"],service_id:"3",ticket_title:this.ticket_title,ticket_content:this.ticket_content,urgency:1};console.log(t)}}};c("dfae");const _e=O()(ke,[["render",fe],["__scopeId","data-v-d952b396"]]);var me=_e,ve=Object(n["j"])("h3",null," change password ",-1),ge=Object(n["j"])("a",null,[Object(n["j"])("p",null,"original password"),Object(n["j"])("input",{type:"password"})],-1),ye=Object(n["j"])("a",null,[Object(n["j"])("p",null,"new password"),Object(n["j"])("input",{type:"password"})],-1),we=Object(n["j"])("p",null,[Object(n["j"])("button",null," 送出 ")],-1),Te=[ve,ge,ye,we];function De(t,e){return Object(n["D"])(),Object(n["i"])("div",null,Te)}const Pe={},Se=O()(Pe,[["render",De]]);var Ce=Se,xe=Object(n["j"])("div",null,[Object(n["j"])("button",null," 更改Engineer 資料 ")],-1);function Ae(t,e,c,i,a,o){return Object(n["D"])(),Object(n["i"])("div",null,[xe,Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[0]||(e[0]=function(){return o.change_to_dispatch&&o.change_to_dispatch.apply(o,arguments)})}," 分派tickets ")]),Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[1]||(e[1]=function(){return o.change_to_create&&o.change_to_create.apply(o,arguments)})}," 新增Engineer帳號 ")])])}var Ee={methods:{change_to_create:function(){this.$router.push("/home/admin_create_engineer")},change_to_dispatch:function(){this.$router.push("/home/admin_dispatch_ticket")}}};const ze=O()(Ee,[["render",Ae]]);var Ie=ze,Ue=function(t){return Object(n["G"])("data-v-f56523a2"),t=t(),Object(n["E"])(),t},Je={class:"tickets-table"},Re={class:"tickets-table-left"},Ve=Ue((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-left-tr"},"正在處理")],-1)})),Ge=["onClick"],$e={class:"user-table-td1","data-label":"Job Id"},We={class:"tickets-table-right"},Le=Ue((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-right-tr"},"已處理")],-1)})),Ne=["onClick"],Me={class:"user-table-td1","data-label":"Job Id"};function He(t,e,c,i,a,o){return Object(n["D"])(),Object(n["i"])("div",Je,[Object(n["j"])("div",Re,[Ve,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(o.alltickets["doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return o.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",$e,Object(n["P"])(t.ticket_title),1)],8,Ge)})),128))]),Object(n["j"])("div",We,[Le,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(o.alltickets["done"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return o.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",Me,Object(n["P"])(t.ticket_title),1)],8,Ne)})),128))])])}var qe={inject:["alltickets","all_tickets_page"],data:function(){return{doing:[],undo:[]}},methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/home/tickets")}},mounted:function(){}};c("cbab");const Fe=O()(qe,[["render",He],["__scopeId","data-v-f56523a2"]]);var Xe=Fe,Qe=function(t){return Object(n["G"])("data-v-299be32a"),t=t(),Object(n["E"])(),t},Be={id:"tickets-content"},Ke={class:"tickets-title"},Ye={key:0},Ze=Object(n["l"])("Tag: "),tc={key:1},ec={key:0,class:"tickets-user-dialogue"},cc={key:1,class:"tickets-thomas-dialogue"},nc=Qe((function(){return Object(n["j"])("th",null,"回覆內容: ",-1)})),ic={key:0,class:"tickets-footer"},ac=Qe((function(){return Object(n["j"])("span",null,"傳送",-1)})),oc=[ac];function sc(t,e,c,i,a,o){return Object(n["D"])(),Object(n["i"])("div",Be,[Object(n["j"])("div",Ke,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("td",null," Ticket   Name : "+Object(n["P"])(a.myticket["ticket_title"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Customer Name : "+Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("td",null," 負責人 : "+Object(n["P"])(a.myticket["admin_name"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Time : "+Object(n["P"])(a.myticket["created_at"]),1),Object(n["j"])("td",null,[a.tag_length>0?(Object(n["D"])(),Object(n["i"])("a",Ye,[Ze,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.myticket["ticket_ai_tags"],(function(t){return Object(n["D"])(),Object(n["i"])("a",{key:t},Object(n["P"])(t),1)})),128))])):(Object(n["D"])(),Object(n["i"])("a",tc,"Tag : none"))])])])]),(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_ticket_contents,(function(t){return Object(n["D"])(),Object(n["i"])("div",{key:t},["customer"===t["owner"]?(Object(n["D"])(),Object(n["i"])("div",ec,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("th",null,"回覆內容: "+Object(n["P"])(t["ticket_content"]),1)])])])):(Object(n["D"])(),Object(n["i"])("div",cc,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["admin_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[nc,Object(n["j"])("th",null,Object(n["P"])(t["ticket_content"]),1)])])]))])})),128)),"Processed"!==a.myticket["ticket_status"]?(Object(n["D"])(),Object(n["i"])("div",ic,[Object(n["W"])(Object(n["j"])("textarea",{name:"message",placeholder:"輸入訊息",id:"message_input",cols:"88","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.input_content=t})},null,512),[[n["T"],a.input_content]]),Object(n["j"])("button",{class:"user-ticket-btn",onClick:e[1]||(e[1]=function(t){return o.responseTicket()})},oc)])):Object(n["h"])("",!0)])}var rc={inject:["alltickets","ticketcontent","jwtToken"],methods:{fetchTicket:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/";e+=String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.myticket=e["data"],t.tag_length=t.myticket["ticket_ai_tags"].length,console.log(t.myticket)}))},fetch_all_contents:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents?";e+="ticket_id="+String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),t.all_ticket_contents=e["data"]}))},responseTicket:function(){var t=this;console.log(this.input_content);var e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents";console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt},body:JSON.stringify({ticket_id:this.ticketcontent["ticketid"],ticket_content:this.input_content,owner:"customer"})}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),alert(e["message"]),t.input_content="",t.reload()}))},reload:function(){console.log("reload"),setTimeout(this.fetch_all_contents(),3e3)}},data:function(){return{myticket:{},input_content:"",all_ticket_contents:{},tag_length:0}},created:function(){this.fetchTicket(),this.fetch_all_contents()}};c("ac22");const lc=O()(rc,[["render",sc],["__scopeId","data-v-299be32a"]]);var uc=lc,dc=function(t){return Object(n["G"])("data-v-b83a5ee0"),t=t(),Object(n["E"])(),t},jc={class:"tickets-table"},bc={class:"tickets-table-left"},hc=dc((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-left-tr"},"待處理")],-1)})),pc=["onClick"],Oc={class:"user-table-td1","data-label":"Job Id"},fc={class:"tickets-table-right"},kc=dc((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-right-tr"},"已處理")],-1)})),_c=["onClick"],mc={class:"user-table-td1","data-label":"Job Id"};function vc(t,e,c,i,a,o){return Object(n["D"])(),Object(n["i"])("div",jc,[Object(n["j"])("div",bc,[hc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(o.alltickets["customer_doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return o.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",Oc,Object(n["P"])(t.ticket_title),1)],8,pc)})),128))]),Object(n["j"])("div",fc,[kc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(o.alltickets["done"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return o.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",mc,Object(n["P"])(t.ticket_title),1)],8,_c)})),128))])])}var gc={inject:["alltickets"],data:function(){return{doing:[],done:[]}},methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")}},mounted:function(){}};c("18e0");const yc=O()(gc,[["render",vc],["__scopeId","data-v-b83a5ee0"]]);var wc=yc,Tc=function(t){return Object(n["G"])("data-v-c902abc2"),t=t(),Object(n["E"])(),t},Dc=Tc((function(){return Object(n["j"])("a",null,[Object(n["j"])("p",null,"新增工程師"),Object(n["j"])("p",null,"帳號"),Object(n["j"])("input",{type:"text"}),Object(n["j"])("p",null,"密碼"),Object(n["j"])("input",{type:"password"}),Object(n["j"])("div",{class:"submit"},[Object(n["j"])("input",{type:"submit",value:"確認",id:"form"})])],-1)})),Pc=[Dc];function Sc(t,e,c,i,a,o){return Object(n["D"])(),Object(n["i"])("div",null,Pc)}var Cc={};c("b78d");const xc=O()(Cc,[["render",Sc],["__scopeId","data-v-c902abc2"]]);var Ac=xc,Ec=function(t){return Object(n["G"])("data-v-55de3340"),t=t(),Object(n["E"])(),t},zc={class:"dispatch-table"},Ic=Object(n["k"])('<div data-v-55de3340> 未配單 </div><div class="dispatch-table-row1" data-v-55de3340><div class="dispatch-table-th1" data-v-55de3340>ticket title</div><div class="dispatch-table-th2" data-v-55de3340>deadline</div><div class="dispatch-table-th3" data-v-55de3340>負責人</div><div class="dispatch-table-th4" data-v-55de3340></div></div>',2),Uc={class:"dispatch-table-td1"},Jc={class:"dispatch-table-td2"},Rc={class:"dispatch-table-td3"},Vc={class:"engineer-select"},Gc=["onUpdate:modelValue","onInput"],$c={id:"cityname"},Wc=Ec((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),Lc=["value"],Nc={class:"dispatch-table-td4"},Mc=["onClick"],Hc=Object(n["k"])('<div data-v-55de3340> 已配單 </div><div class="dispatch-table-row1" data-v-55de3340><div class="dispatch-table-th1" data-v-55de3340>ticket title</div><div class="dispatch-table-th2" data-v-55de3340>deadline</div><div class="dispatch-table-th3" data-v-55de3340>負責人</div><div class="dispatch-table-th4" data-v-55de3340></div><div class="dispatch-table-th4" data-v-55de3340></div></div>',2),qc={class:"dispatch-table-td1"},Fc={class:"dispatch-table-td2"},Xc={class:"dispatch-table-td3"},Qc={class:"engineer-select"},Bc=["onUpdate:modelValue","onInput"],Kc={id:"cityname"},Yc=Ec((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),Zc=["value"],tn={class:"dispatch-table-td4"},en=["onClick"],cn={class:"dispatch-table-td4"},nn=["onClick"],an=Object(n["k"])('<div data-v-55de3340> 已完成 </div><div class="dispatch-table-row1" data-v-55de3340><div class="dispatch-table-th1" data-v-55de3340>ticket title</div><div class="dispatch-table-th2" data-v-55de3340>deadline</div><div class="dispatch-table-th3" data-v-55de3340>負責人</div><div class="dispatch-table-th4" data-v-55de3340></div></div>',2),on={class:"dispatch-table-td1"},sn={class:"dispatch-table-td2"},rn={class:"dispatch-table-td3"},ln={class:"engineer-select"},un=["onUpdate:modelValue","onInput"],dn={id:"cityname"},jn=Ec((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),bn=["value"],hn={class:"dispatch-table-td4"},pn=["onClick"];function On(t,e,c,i,a,o){return Object(n["D"])(),Object(n["i"])("div",zc,[Ic,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["not_proccess"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",Uc,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",Jc,Object(n["P"])(t.created_at),1),Object(n["j"])("div",Rc,[Object(n["j"])("div",Vc,[Object(n["W"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return o.get_engineer_id(e,t.selected,"not_proccess")}},null,40,Gc),[[n["T"],t.selected]]),Object(n["j"])("datalist",$c,[Wc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,Lc)})),128))])])]),Object(n["j"])("div",Nc,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return o.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,Mc)])])})),128)),Hc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessing"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",qc,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",Fc,Object(n["P"])(t.created_at),1),Object(n["j"])("div",Xc,[Object(n["j"])("div",Qc,[Object(n["l"])(" 現在負責人: "+Object(n["P"])(t.admin_name)+" ",1),Object(n["W"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return o.get_engineer_id(e,t.selected,"proccessing")}},null,40,Bc),[[n["T"],t.selected]]),Object(n["j"])("datalist",Kc,[Yc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,Zc)})),128))])])]),Object(n["j"])("div",tn,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return o.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,en)]),Object(n["j"])("div",cn,[Object(n["j"])("input",{value:"Sucess",type:"submit",onClick:function(e){return o.dispatch_ticket(t.selected_id,t.ticket_id,"Processed")}},null,8,nn)])])})),128)),an,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessed"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",on,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",sn,Object(n["P"])(t.created_at),1),Object(n["j"])("div",rn,[Object(n["j"])("div",ln,[Object(n["l"])(" 現在負責人: "+Object(n["P"])(t.admin_name)+" ",1),Object(n["W"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return o.get_engineer_id(e,t.selected,"proccessed")}},null,40,un),[[n["T"],t.selected]]),Object(n["j"])("datalist",dn,[jn,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,bn)})),128))])])]),Object(n["j"])("div",hn,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return o.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,pn)])])})),128))])}var fn=c("b85c"),kn={data:function(){return{oneTicket:{},allEngineers:[],selected:"",temp_select_id:0,every_tickets:{not_proccess:[],proccessing:[],proccessed:[]},tickets_page:"0"}},inject:["alltickets","jwtToken"],methods:{dispatch_ticket:function(t,e,c){var n=this;if(void 0===t||""===e||""===c)return alert("請選擇負責人"),!1;var i="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets/assign";fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt},body:JSON.stringify({admin_id:t,ticket_id:e,ticket_status:c})}).then((function(t){if(t.ok)return t.json()})).then((function(t){alert(t["data"]["message"]),n.reload()}))},find_engineer:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/users?role=Engineer",console.log(c),e.next=4,fetch(c,{method:"GET",headers:{"Content-Type":"application/json",Authorization:t.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.allEngineers=t.allEngineers.concat(e["data"])}));case 4:return e.next=6,t.find_engineer_supervisor();case 6:case"end":return e.stop()}}),e)})))()},find_engineer_supervisor:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/users?role=Engineer Supervisor";fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.allEngineers=t.allEngineers.concat(e["data"])}))},get_engineer_id:function(t,e,c){var n,i=Object(fn["a"])(this.allEngineers);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.admin_name===e&&(this.every_tickets[c][t].selected_id=a.admin_id)}}catch(o){i.e(o)}finally{i.f()}},getAlltickets:function(){var t=this,e="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets?page="+this.tickets_page+"&status=all&user_id=0&role=0";fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(e){var c,n=Object(fn["a"])(e["data"]);try{for(n.s();!(c=n.n()).done;){var i=c.value;"Not Processed"===i["ticket_status"]?t.every_tickets["not_proccess"].push(i):"Processing"===i["ticket_status"]?t.every_tickets["proccessing"].push(i):"Processed"===i["ticket_status"]&&t.every_tickets["proccessed"].push(i)}}catch(a){n.e(a)}finally{n.f()}}))},reload:function(){this.every_tickets={not_proccess:[],proccessing:[],proccessed:[]},setTimeout(this.getAlltickets(),3e3)}},created:function(){this.find_engineer(),this.find_engineer_supervisor(),this.getAlltickets()}};c("e40f");const _n=O()(kn,[["render",On],["__scopeId","data-v-55de3340"]]);var mn=_n,vn=function(t){return Object(n["G"])("data-v-1e0802fe"),t=t(),Object(n["E"])(),t},gn={class:"thomas-all"},yn={id:"deadline-table",class:"thomas-right"},wn=vn((function(){return Object(n["j"])("li",{class:"deadline-header"},[Object(n["j"])("div",{class:"deadline-tr"},"歷史清單"),Object(n["j"])("div",{class:"deadline -tr"},"Created At")],-1)})),Tn=["onClick"],Dn={class:"deadline-td1"},Pn={class:"deadline-td2"},Sn={class:"thomas-left"},Cn={class:"pagination"},xn=vn((function(){return Object(n["j"])("li",null,[Object(n["j"])("a",{href:"#/home/history_ticket"},"«")],-1)})),An=["onClick"],En={href:"#/home/history_ticket"},zn=vn((function(){return Object(n["j"])("li",null,[Object(n["j"])("a",{href:"#/home/history_ticket"},"»")],-1)}));function In(t,e,c,i,a,o){return Object(n["D"])(),Object(n["i"])("div",gn,[Object(n["j"])("div",yn,[wn,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessed"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"deadline-row",key:t,onClick:function(e){return o.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",Dn,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",Pn,Object(n["P"])(t["created_at"]),1)],8,Tn)})),128))]),Object(n["j"])("div",Sn,[Object(n["j"])("ul",Cn,[xn,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_page+1,(function(t){return Object(n["D"])(),Object(n["i"])("li",{key:t,onClick:function(e){return o.change_page(t)}},[Object(n["j"])("a",En,Object(n["P"])(t),1)],8,An)})),128)),zn])])])}var Un={emits:["all_ticket_contents"],data:function(){return{oneTicket:{},tickets_page:0,every_tickets:{not_proccess:[],proccessing:[],proccessed:[]},all_page:0,page_class:""}},inject:["alltickets","jwtToken"],methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")},get_All_history_ticket:function(t){var e=this,c="https://u7j2emffl8.execute-api.us-west-2.amazonaws.com/dev/api/tickets?page="+String(t)+"&status=all&user_id=0&role=Engineer";fetch(c,{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.jwtToken.jwt}}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log(t);var c,n=Object(fn["a"])(t["data"]);try{for(n.s();!(c=n.n()).done;){var i=c.value;"Not Processed"===i["ticket_status"]?e.every_tickets["not_proccess"].push(i):"Processing"===i["ticket_status"]?e.every_tickets["proccessing"].push(i):"Processed"===i["ticket_status"]&&e.every_tickets["proccessed"].push(i)}}catch(a){n.e(a)}finally{n.f()}console.log(t),e.all_page=t["total_page"],console.log(e.all_page)}))},change_page:function(t){this.get_All_history_ticket(t)}},created:function(){this.get_All_history_ticket(0)}};c("6580");const Jn=O()(Un,[["render",In],["__scopeId","data-v-1e0802fe"]]);var Rn=Jn,Vn=Object(a["a"])({history:Object(a["b"])(""),routes:[{path:"/",component:W,alias:"/login"},{path:"/home",component:dt,props:function(t){return t.params},children:[{path:"",component:Pt},{path:"tickets_table",component:Xe},{path:"tickets",component:re},{path:"history_ticket",component:Rn},{path:"settings",component:Ce},{path:"manage",component:Ie},{path:"admin_create_engineer",component:Ac},{path:"admin_dispatch_ticket",component:mn}]},{path:"/userhome",component:dt,props:function(t){return t.params},children:[{path:"",component:qt},{path:"tickets_table",component:wc},{path:"create_form",component:me},{path:"tickets",component:uc},{path:"settings",component:Ce}]},{path:"/NotFound(.*)",redirect:"/"}]}),Gn=Object(n["f"])(y),$n=Object(i["a"])({modules:{},state:function(){return{userId:"",userName:"",userRole:""}},mutations:{login_user:function(t,e){t.userId=e.userid,t.userName=e.userName,t.userRole=e.userRole}}});Gn.use(w["a"]),Gn.use(Vn),T["default"].configure(P),Gn.config.productionTip=!1,Gn.use($n),Gn.mount("#frameapp")},"5ebf":function(t,e,c){},6555:function(t,e,c){"use strict";c("d283")},6580:function(t,e,c){"use strict";c("709b")},"709b":function(t,e,c){},"78a1":function(t,e,c){},"8d2e":function(t,e,c){},aa21:function(t,e,c){},ac22:function(t,e,c){"use strict";c("aa21")},b0c3:function(t,e,c){},b22e:function(t,e,c){},b78d:function(t,e,c){"use strict";c("b0c3")},ba19:function(t,e,c){"use strict";c("b22e")},c33d:function(t,e,c){"use strict";c("78a1")},c4d7:function(t,e,c){"use strict";c("5ebf")},cbab:function(t,e,c){"use strict";c("22b2")},d283:function(t,e,c){},d7c9:function(t,e,c){"use strict";c("01b3")},d8e0:function(t,e,c){"use strict";c("8d2e")},dfae:function(t,e,c){"use strict";c("3acf")},e40f:function(t,e,c){"use strict";c("2239")},e9d2:function(t,e,c){"use strict";c("3eca")}});
//# sourceMappingURL=app.29c8614f.js.map