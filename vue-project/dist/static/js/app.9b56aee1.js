(function(t){function e(e){for(var n,s,o=e[0],r=e[1],l=e[2],d=0,b=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&b.push(i[s][0]),i[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(b.length)b.shift()();return a.push.apply(a,l||[]),c()}function c(){for(var t,e=0;e<a.length;e++){for(var c=a[e],n=!0,o=1;o<c.length;o++){var r=c[o];0!==i[r]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=c[0]))}return t}var n={},i={app:0},a=[];function s(e){if(n[e])return n[e].exports;var c=n[e]={i:e,l:!1,exports:{}};return t[e].call(c.exports,c,c.exports,s),c.l=!0,c.exports}s.m=t,s.c=n,s.d=function(t,e,c){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(c,n,function(e){return t[e]}.bind(null,n));return c},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=r;a.push([0,"chunk-vendors"]),c()})({0:function(t,e,c){t.exports=c("56d7")},"0988":function(t,e,c){},"0d5a":function(t,e,c){"use strict";c("fad1")},1:function(t,e){},"18e0":function(t,e,c){"use strict";c("2aa1")},2:function(t,e){},2663:function(t,e,c){"use strict";c("0988")},"2aa1":function(t,e,c){},"2c47":function(t,e,c){"use strict";c("f328")},"56d7":function(t,e,c){"use strict";c.r(e);c("e260"),c("e6cf"),c("cca6"),c("a79d");var n=c("7a23"),i=c("5502"),a=c("6c02"),s={id:"all"},o=Object(n["j"])("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"},null,-1),r={id:"down"};function l(t,e,c,i,a,l){var u=Object(n["L"])("header-page"),d=Object(n["L"])("router-view");return Object(n["D"])(),Object(n["i"])("div",s,[o,Object(n["m"])(u,{id:"headerup"}),Object(n["j"])("div",r,[Object(n["m"])(d,{user:a.data,onLoginSuccess:l.changeLoginStatus},null,8,["user","onLoginSuccess"])])])}var u=c("1da1"),d=(c("96cf"),c("d3b7"),c("99af"),c("4e82"),c("a9e3"),function(t){return Object(n["G"])("data-v-dc438f4c"),t=t(),Object(n["E"])(),t}),b={class:"header"},j=d((function(){return Object(n["j"])("p",null,"Awan Ticket System",-1)}));function p(t,e){var c=Object(n["L"])("center");return Object(n["D"])(),Object(n["i"])("div",b,[Object(n["m"])(c,null,{default:Object(n["V"])((function(){return[j]})),_:1})])}c("c33d");var h=c("d959"),f=c.n(h);const O={},k=f()(O,[["render",p],["__scopeId","data-v-dc438f4c"]]);var m=k,_=c("bf82"),v={provide:function(){return{userlogindata:this.data,alltickets:this.fetchalltickets,all_tickets_page:this.temp_all_tickets_page,jwtToken:this.temp_JWTtoken}},components:{"header-page":m},data:function(){return{data:{id:"",userRole:"",username:""},fetchalltickets:{},tickets_page:"0",temp_all_tickets_page:{undo:0,doing:0,done:0},temp_JWTtoken:""}},methods:{getAllticket:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets",n=t.data["id"],i=t.data["userRole"],e.next=4,fetch(c+"?page="+String(t.tickets_page)+"&status=not processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("undo"),console.log(e["data"]),t.fetchalltickets["undo"]=e["data"],t.temp_all_tickets_page["undo"]=e["total_page"]}));case 4:return e.next=6,fetch(c+"?page="+String(t.tickets_page)+"&status=processing&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("doing"),console.log(e),t.fetchalltickets["doing"]=e["data"],t.temp_all_tickets_page["doing"]=e["total_page"]}));case 6:return fetch(c+"?page="+String(t.tickets_page)+"&status=processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("done"),t.fetchalltickets["done"]=e["data"],t.temp_all_tickets_page["done"]=e["total_page"]})),e.next=9,t.concatTickets();case 9:case"end":return e.stop()}}),e)})))()},changeLoginStatus:function(t,e,c){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if("null"==t){i.next=5;break}return i.next=3,n.change_user(t,e,c);case 3:return i.next=5,n.getAllticket();case 5:case"end":return i.stop()}}),i)})))()},change_user:function(t,e,c){this.data["id"]=t,this.data["username"]=e,this.data["userRole"]=c},getLoginStatus:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_["a"].currentUserInfo();case 3:if(c=e.sent,null==c){e.next=10;break}return e.next=7,t.changeLoginStatus(c["attributes"]["custom:id"],c["attributes"]["custom:name"],c["attributes"]["custom:role"]);case 7:console.log("login success"),e.next=11;break;case 10:console.log("no attribute");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))()},concatTickets:function(){this.fetchalltickets["customer_doing"]=this.fetchalltickets["doing"],this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].concat(this.fetchalltickets["undo"]),this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].sort((function(t,e){return t.ticket_id>e.ticket_id?1:-1}))},change_page:function(t,e){console.log("change page"),"jump"===t?this.tickets_page=Number(e):"add"===t?this.tickets_page+=1:"sub"===t&&(this.tickets_page-=1)}},created:function(){this.getLoginStatus()}};c("da7b");const g=f()(v,[["render",l]]);var y=g,w=c("b80d"),T=c("00bd"),P={Auth:{mandatorySignId:!0,regionID:"us-west-2",userPoolId:"us-west-2_rUEXdjmle",userPoolWebClientId:"2mk360n1pl7o40r86rhcmims51",authenticationFlowType:"USER_PASSWORD_AUTH"}},D=P,C=(c("f9e3"),c("1a26"),function(t){return Object(n["G"])("data-v-27061e12"),t=t(),Object(n["E"])(),t}),S={class:"container"},x={class:"form-div"},E=C((function(){return Object(n["j"])("label",{for:"account",class:"form-label"},"帳號 | Account",-1)})),A={class:"form-div"},U=C((function(){return Object(n["j"])("label",{for:"password",class:"form-label"},"密碼 | Password",-1)})),I={key:0},J=C((function(){return Object(n["j"])("p",{style:{color:"red"}},"帳號密碼錯誤 ",-1)})),R=[J],V={key:1};function G(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",S,[Object(n["j"])("form",null,[Object(n["j"])("div",x,[E,Object(n["W"])(Object(n["j"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.username=t}),type:"text",class:"form-control",id:"account",required:""},null,512),[[n["T"],a.username]])]),Object(n["j"])("div",A,[U,Object(n["W"])(Object(n["j"])("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.password=t}),type:"password",class:"form-control",id:"password",required:""},null,512),[[n["T"],a.password]])]),Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[2]||(e[2]=Object(n["X"])((function(){return s.getData&&s.getData.apply(s,arguments)}),["prevent"])),type:"submit",class:"form-btn"},"登入 | Login")]),"False"===a.isUser?(Object(n["D"])(),Object(n["i"])("div",I,R)):"True"===a.isUser?(Object(n["D"])(),Object(n["i"])("div",V," 登入成功 ")):Object(n["h"])("",!0)])])}var z={props:{user:{type:String}},data:function(){return{userdata:[],userid:"",checkuser:"",checkpassword:"",username:"",password:"",role:"",isUser:"null"}},methods:{login:function(){try{var t=_["a"].currentAuthenticatedUser();console.log(t)}catch(e){console.log(e)}},getData:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_["a"].signIn(t.username,t.password);case 3:return console.log("登入成功"),e.next=6,_["a"].currentUserInfo();case 6:c=e.sent,null!=c?(t.checkuser=c["attributes"]["custom:name"],t.role=c["attributes"]["custom:role"],t.userid=c["attributes"]["custom:id"],t.loginstatus()):(console.log("登入失敗"),t.isUser="False"),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),console.log("登入失敗"),t.isUser="False";case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},loginstatus:function(){"Engineer"===this.role||"Engineer Supervisor"===this.role?this.$router.push("/home"):this.$router.push("/userhome"),this.$emit("loginSuccess",this.userid,this.checkuser,this.role),this.username="",this.password=""}},emits:["loginSuccess"]};c("a5bf");const $=f()(z,[["render",G],["__scopeId","data-v-27061e12"]]);var W=$,L={class:"template-content"},M={class:"template-left"},N={class:"template-right"};function H(t,e,c,i,a,s){var o=Object(n["L"])("side-bar"),r=Object(n["L"])("router-view");return Object(n["D"])(),Object(n["i"])("div",L,[Object(n["j"])("div",M,[Object(n["m"])(o,{Userdata:c.user,onRedirect_home:e[0]||(e[0]=function(t){return s.againgetticket()})},null,8,["Userdata"])]),Object(n["j"])("div",N,[Object(n["m"])(r,{onAll_ticket_contents:s.transferTicketId},null,8,["onAll_ticket_contents"])])])}var q={id:"sidebar"},F={class:"list-unstyled"},X=Object(n["l"])("Ticket"),Q=Object(n["l"])("Ticket"),B=Object(n["l"])("Ticket"),K=Object(n["l"])("History Ticket"),Y=Object(n["l"])("History Ticket"),Z=Object(n["l"])("Setting"),tt={key:0},et={key:0},ct=Object(n["l"])(" 分派tickets "),nt=Object(n["l"])(" 新增Engineer帳號 "),it=Object(n["l"])("Logout");function at(t,e,c,i,a,s){var o=Object(n["L"])("router-link");return Object(n["D"])(),Object(n["i"])("nav",q,[Object(n["j"])("ul",F,[Object(n["j"])("div",null,[Object(n["j"])("li",null,"Hi, "+Object(n["P"])(c.Userdata["username"])+", "+Object(n["P"])(c.Userdata["userRole"]),1)]),Object(n["j"])("li",null,["Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("a",{key:0,href:"#/home",onClick:e[0]||(e[0]=function(){return s.make_redirect&&s.make_redirect.apply(s,arguments)})},"Home")):"Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("a",{key:1,href:"#/home",onClick:e[1]||(e[1]=function(){return s.make_redirect&&s.make_redirect.apply(s,arguments)})},"Home")):(Object(n["D"])(),Object(n["i"])("a",{key:2,href:"#/userhome",onClick:e[2]||(e[2]=function(){return s.make_redirect&&s.make_redirect.apply(s,arguments)})}," Home"))]),Object(n["j"])("li",null,["Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:0,to:"/home/tickets_table"},{default:Object(n["V"])((function(){return[X]})),_:1})):"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:1,to:"/home/tickets_table"},{default:Object(n["V"])((function(){return[Q]})),_:1})):(Object(n["D"])(),Object(n["g"])(o,{key:2,to:"/userhome/tickets_table"},{default:Object(n["V"])((function(){return[B]})),_:1}))]),Object(n["j"])("li",null,["Engineer"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:0,to:"/home/history_ticket"},{default:Object(n["V"])((function(){return[K]})),_:1})):"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["g"])(o,{key:1,to:"/home/history_ticket"},{default:Object(n["V"])((function(){return[Y]})),_:1})):Object(n["h"])("",!0)]),Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/home/settings"},{default:Object(n["V"])((function(){return[Z]})),_:1})]),"Engineer Supervisor"===c.Userdata["userRole"]?(Object(n["D"])(),Object(n["i"])("li",tt,[Object(n["j"])("a",{onClick:e[3]||(e[3]=function(){return s.toggle_myticketSublist&&s.toggle_myticketSublist.apply(s,arguments)})},"Manager"),a.myticketSublist?(Object(n["D"])(),Object(n["i"])("ul",et,[Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/home/admin_dispatch_ticket",style:{"font-size":"15px"}},{default:Object(n["V"])((function(){return[ct]})),_:1})]),Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/home/admin_create_engineer",style:{"font-size":"15px"}},{default:Object(n["V"])((function(){return[nt]})),_:1})])])):Object(n["h"])("",!0)])):Object(n["h"])("",!0),Object(n["j"])("li",null,[Object(n["m"])(o,{to:"/",onClick:s.logout},{default:Object(n["V"])((function(){return[it]})),_:1},8,["onClick"])])])])}var st={emits:["redirect_home"],props:{Userdata:{type:Object}},data:function(){return{myticketSublist:!1,historySublist:!1}},methods:{toTickets_table:function(){this.$router.push("tickets_table")},toTickets:function(){this.$router.push("tickets")},make_redirect:function(){this.$emit("redirect_home"),this.$router.push("/userhome")},toggle_myticketSublist:function(){this.myticketSublist=!this.myticketSublist},logout:function(){_["a"].signOut()}}};c("d8e0");const ot=f()(st,[["render",at],["__scopeId","data-v-5a4e4f61"]]);var rt=ot,lt={emits:["all_ticket_contents","change_page_to_app"],props:{user:{type:Object}},inject:["alltickets","ticketcontent"],provide:function(){return{ticketcontent:this.oneTicket}},components:{"side-bar":rt},data:function(){return{status:!1,all_tickets_content:{topics:["123"]},fetchalltickets:{},oneTicket:{},tickets_page:"0"}},methods:{getAllticket:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets",n=t.user["id"],i=t.user["userRole"],e.next=4,fetch(c+"?page="+t.tickets_page+"&status=not processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("undo"),console.log(e["data"]),t.fetchalltickets["undo"]=e["data"]}));case 4:return e.next=6,fetch(c+"?page="+t.tickets_page+"&status=processing&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("doing"),console.log(e["data"]),t.fetchalltickets["doing"]=e["data"]}));case 6:return fetch(c+"?page="+t.tickets_page+"&status=processed&user_id="+n+"&role="+i,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log("done"),t.fetchalltickets["done"]=e["data"]})),e.next=9,t.concatTickets();case 9:case"end":return e.stop()}}),e)})))()},concatTickets:function(){this.fetchalltickets["customer_doing"]=this.fetchalltickets["doing"],this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].concat(this.fetchalltickets["undo"]),this.fetchalltickets["customer_doing"]=this.fetchalltickets["customer_doing"].sort((function(t,e){return t.ticket_id>e.ticket_id?1:-1}))},transferTicketId:function(t,e,c){this.oneTicket["ticketid"]=t,this.oneTicket["title"]=e,this.oneTicket["admin_name"]=c},againgetticket:function(){console.log("reload tickets"),this.getAllticket()}},created:function(){}};c("2c47");const ut=f()(lt,[["render",H]]);var dt=ut,bt=function(t){return Object(n["G"])("data-v-033ba481"),t=t(),Object(n["E"])(),t},jt={class:"thomas-all"},pt=bt((function(){return Object(n["j"])("div",{class:"thomas-left"},[Object(n["j"])("button",{id:"pending-btn",onclick:"連結"},[Object(n["j"])("div",null,[Object(n["j"])("span",null,[Object(n["j"])("p",null,"待處理: 件")])]),Object(n["j"])("div",null,[Object(n["j"])("span",null,[Object(n["j"])("p",null,"上班加油!")])])])],-1)})),ht={id:"deadline-table",class:"thomas-right"},ft=Object(n["k"])('<li class="deadline-header" data-v-033ba481><div class="deadline-tr" data-v-033ba481>公告</div><div class="deadline-tr" data-v-033ba481><div class="onoffswitch" data-v-033ba481><input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" tabindex="0" checked data-v-033ba481><label class="onoffswitch-label" for="myonoffswitch" data-v-033ba481><span class="onoffswitch-inner" data-v-033ba481></span><span class="onoffswitch-switch" data-v-033ba481></span></label></div></div></li>',1),Ot=["onClick"],kt={class:"deadline-td1"},mt={class:"deadline-td2"},_t=Object(n["k"])('<div class="thomas-right-pagination" data-v-033ba481><ul class="pagination" data-v-033ba481><li data-v-033ba481><a href="#" data-v-033ba481>«</a></li><li data-v-033ba481><a href="#" data-v-033ba481>1</a></li><li data-v-033ba481><a class="active" href="#" data-v-033ba481>2</a></li><li data-v-033ba481><a href="#" data-v-033ba481>3</a></li><li data-v-033ba481><a href="#" data-v-033ba481>4</a></li><li data-v-033ba481><a href="#" data-v-033ba481>5</a></li><li data-v-033ba481><a href="#" data-v-033ba481>6</a></li><li data-v-033ba481><a href="#" data-v-033ba481>7</a></li><li data-v-033ba481><a href="#" data-v-033ba481>»</a></li></ul></div>',1);function vt(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",jt,[pt,Object(n["j"])("div",ht,[ft,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"deadline-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",kt,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",mt,Object(n["P"])(t["created_at"]),1)],8,Ot)})),128)),_t])])}var gt={emits:["all_ticket_contents"],data:function(){return{oneTicket:{},number_ticket:0}},inject:["alltickets"],methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/home/tickets")},change_page:function(){}},mounted:function(){}};c("8afe");const yt=f()(gt,[["render",vt],["__scopeId","data-v-033ba481"]]);var wt=yt,Tt={class:"user-myticket"},Pt={class:"user-myticket-left"},Dt=Object(n["j"])("span",null,"建單",-1),Ct=[Dt],St={class:"user-myticket-right"},xt={class:"user-table"},Et=Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"user-table-tr1"},"進行中"),Object(n["j"])("div",{class:"user-table-tr2"},"更新時間")],-1),At=["onClick"],Ut={class:"user-table-td1","data-label":"Job Id"},It={class:"user-table-td2","data-label":"Payment Status"},Jt=Object(n["k"])('<div class="user-table-page"><ul class="pagination"><li><a href="#">«</a></li><li><a href="#">1</a></li><li><a class="active" href="#">2</a></li><li><a href="#">3</a></li><li><a href="#">4</a></li><li><a href="#">5</a></li><li><a href="#">6</a></li><li><a href="#">7</a></li><li><a href="#">»</a></li></ul></div>',1);function Rt(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Tt,[Object(n["j"])("div",Pt,[Object(n["j"])("button",{onClick:e[0]||(e[0]=Object(n["X"])((function(){return s.changeTemplatePage&&s.changeTemplatePage.apply(s,arguments)}),["prevent"])),class:"user-myticket-btn"},Ct)]),Object(n["j"])("div",St,[Object(n["j"])("div",xt,[Et,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["customer_doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",Ut,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",It,Object(n["P"])(t["created_at"]),1)],8,At)})),128)),Jt])])])}var Vt={provide:function(){return{ticketcontent:this.oneTicket}},inject:["alltickets"],emits:["changepage","all_ticket_contents"],data:function(){return{oneTicket:{}}},methods:{changeTemplatePage:function(){this.$router.push("/userhome/create_form"),this.$emit("changepage","create-form-page")},viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")}}};c("2663");const Gt=f()(Vt,[["render",Rt]]);var zt=Gt,$t=function(t){return Object(n["G"])("data-v-f363b01a"),t=t(),Object(n["E"])(),t},Wt={id:"tickets-content"},Lt={class:"tickets-title"},Mt={key:0,class:"tickets-user-dialogue"},Nt={key:1,class:"tickets-thomas-dialogue"},Ht=$t((function(){return Object(n["j"])("th",null,"回覆內容: ",-1)})),qt={key:0,class:"tickets-footer"},Ft=$t((function(){return Object(n["j"])("span",null,"傳送",-1)})),Xt=[Ft];function Qt(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Wt,[Object(n["j"])("div",Lt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("td",null," Ticketname: "+Object(n["P"])(a.myticket["ticket_title"]),1),Object(n["j"])("td",null," Deadline: "+Object(n["P"])(a.myticket["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Customername: "+Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("td",null," 負責人: "+Object(n["P"])(a.myticket["admin_name"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Time: "+Object(n["P"])(a.myticket["created_at"]),1),Object(n["j"])("td",null," 緊急程度: "+Object(n["P"])(a.myticket["urgency"]),1)])])]),(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_ticket_contents,(function(t){return Object(n["D"])(),Object(n["i"])("div",{key:t},["customer"===t["owner"]?(Object(n["D"])(),Object(n["i"])("div",Mt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("th",null,"回覆內容: "+Object(n["P"])(t["ticket_content"]),1)])])])):(Object(n["D"])(),Object(n["i"])("div",Nt,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["admin_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Ht,Object(n["j"])("th",null,Object(n["P"])(t["ticket_content"]),1)])])]))])})),128)),"Processed"!==a.myticket["ticket_status"]?(Object(n["D"])(),Object(n["i"])("div",qt,[Object(n["W"])(Object(n["j"])("textarea",{name:"message",placeholder:"輸入訊息",id:"message_input",cols:"88","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.input_content=t})},null,512),[[n["T"],a.input_content]]),Object(n["j"])("button",{class:"user-ticket-btn",onClick:e[1]||(e[1]=function(t){return s.responseTicket()})},Xt)])):Object(n["h"])("",!0)])}c("e9c4");var Bt={props:["ticket"],inject:["alltickets","ticketcontent"],methods:{fetchTicket:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/";e+=String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.myticket=e["data"],console.log(t.myticket)}))},fetch_all_contents:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents?";e+="ticket_id="+String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),t.all_ticket_contents=e["data"]}))},responseTicket:function(){var t=this;console.log(this.input_content);var e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents";console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticket_id:this.ticketcontent["ticketid"],ticket_content:this.input_content,owner:"admin"})}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),alert(e["message"]),t.input_content="",t.reload()}))},reload:function(){console.log("reload"),setTimeout(this.fetch_all_contents(),3e3)}},data:function(){return{myticket:{},input_content:"",all_ticket_contents:{}}},created:function(){this.fetchTicket(),this.fetch_all_contents()}};c("7a6a");const Kt=f()(Bt,[["render",Qt],["__scopeId","data-v-f363b01a"]]);var Yt=Kt,Zt={id:"create-form-container"},te={action:"#",method:"post",id:"contact_form"},ee={class:"text"},ce={class:"service-select"},ne=Object(n["k"])("<option data-v-06a7f1a6>請選擇您需要的服務</option><option data-v-06a7f1a6>1.AWS_EC2</option><option data-v-06a7f1a6>2.AWS_VPC</option><option data-v-06a7f1a6>3.AWS_Route53</option><option data-v-06a7f1a6>4.AWS_Cloudfront</option><option data-v-06a7f1a6>5.AWS_S3</option><option data-v-06a7f1a6>6.Azure_SQL Database</option><option data-v-06a7f1a6>7.Azure_App Service</option><option data-v-06a7f1a6>8.Azure_Azure Active Directory</option><option data-v-06a7f1a6>9.Azure_Azure Maps</option><option data-v-06a7f1a6>10.Azure_VM</option>",11),ie=[ne],ae={class:"message"},se={class:"submit"};function oe(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Zt,[Object(n["j"])("div",te,[Object(n["j"])("div",ee,[Object(n["W"])(Object(n["j"])("input",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return a.ticket_title=t}),type:"form-text",placeholder:"title",name:"telephone",id:"telephone_input",required:""},null,512),[[n["T"],a.ticket_title]])]),Object(n["j"])("div",ce,[Object(n["W"])(Object(n["j"])("select",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.type=t})},ie,512),[[n["S"],a.type]])]),Object(n["j"])("div",ae,[Object(n["W"])(Object(n["j"])("textarea",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return a.ticket_content=t}),name:"message",placeholder:"I'd like to ask a question",id:"message_input",cols:"30",rows:"5",required:""},null,512),[[n["T"],a.ticket_content]])]),Object(n["j"])("div",se,[Object(n["j"])("input",{onClick:e[3]||(e[3]=function(){return s.submmitAndCreate&&s.submmitAndCreate.apply(s,arguments)}),type:"submit",value:"Send Message",id:"form_button"})])])])}c("ac1f"),c("1276");var re={inject:["userlogindata"],data:function(){return{ticket_title:"",ticket_content:"",type:""}},methods:{submmitAndCreate:function(){if(""===this.ticket_title||""===this.ticket_content||""===this.type)return alert("請填好表格"),!1;fetch("https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_id:this.userlogindata["id"],service_id:this.type.split(".")[0],ticket_title:this.ticket_title,ticket_content:this.ticket_content,urgency:"1"})}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log(t["data"]["message"]),alert(t["data"]["message"])})),this.ticket_title="",this.ticket_content="",this.$router.push("/userhome")},testCreate:function(){var t={customer_id:this.userlogindata["id"],service_id:"3",ticket_title:this.ticket_title,ticket_content:this.ticket_content,urgency:1};console.log(t)}}};c("fd76");const le=f()(re,[["render",oe],["__scopeId","data-v-06a7f1a6"]]);var ue=le,de=Object(n["j"])("h3",null," change password ",-1),be=Object(n["j"])("a",null,[Object(n["j"])("p",null,"original password"),Object(n["j"])("input",{type:"password"})],-1),je=Object(n["j"])("a",null,[Object(n["j"])("p",null,"new password"),Object(n["j"])("input",{type:"password"})],-1),pe=Object(n["j"])("p",null,[Object(n["j"])("button",null," 送出 ")],-1),he=[de,be,je,pe];function fe(t,e){return Object(n["D"])(),Object(n["i"])("div",null,he)}const Oe={},ke=f()(Oe,[["render",fe]]);var me=ke,_e=Object(n["j"])("div",null,[Object(n["j"])("button",null," 更改Engineer 資料 ")],-1);function ve(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",null,[_e,Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[0]||(e[0]=function(){return s.change_to_dispatch&&s.change_to_dispatch.apply(s,arguments)})}," 分派tickets ")]),Object(n["j"])("div",null,[Object(n["j"])("button",{onClick:e[1]||(e[1]=function(){return s.change_to_create&&s.change_to_create.apply(s,arguments)})}," 新增Engineer帳號 ")])])}var ge={methods:{change_to_create:function(){this.$router.push("/home/admin_create_engineer")},change_to_dispatch:function(){this.$router.push("/home/admin_dispatch_ticket")}}};const ye=f()(ge,[["render",ve]]);var we=ye,Te=function(t){return Object(n["G"])("data-v-7da7e6b4"),t=t(),Object(n["E"])(),t},Pe={class:"tickets-table"},De={class:"tickets-table-left"},Ce=Te((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-left-tr"},"正在處理")],-1)})),Se=["onClick"],xe={class:"user-table-td1","data-label":"Job Id"},Ee={class:"tickets-table-right"},Ae=Te((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-right-tr"},"已處理")],-1)})),Ue=["onClick"],Ie={class:"user-table-td1","data-label":"Job Id"};function Je(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Pe,[Object(n["j"])("div",De,[Ce,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",xe,Object(n["P"])(t.ticket_title),1)],8,Se)})),128))]),Object(n["j"])("div",Ee,[Ae,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["done"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",Ie,Object(n["P"])(t.ticket_title),1)],8,Ue)})),128))])])}var Re={inject:["alltickets","all_tickets_page"],data:function(){return{doing:[],undo:[]}},methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/home/tickets")}},mounted:function(){}};c("f39b");const Ve=f()(Re,[["render",Je],["__scopeId","data-v-7da7e6b4"]]);var Ge=Ve,ze=function(t){return Object(n["G"])("data-v-ccd2351a"),t=t(),Object(n["E"])(),t},$e={id:"tickets-content"},We={class:"tickets-title"},Le={key:0,class:"tickets-user-dialogue"},Me={key:1,class:"tickets-thomas-dialogue"},Ne=ze((function(){return Object(n["j"])("th",null,"回覆內容: ",-1)})),He={key:0,class:"tickets-footer"},qe=ze((function(){return Object(n["j"])("span",null,"傳送",-1)})),Fe=[qe];function Xe(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",$e,[Object(n["j"])("div",We,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("td",null," Ticketname: "+Object(n["P"])(a.myticket["ticket_title"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Customername: "+Object(n["P"])(a.myticket["customer_name"]),1),Object(n["j"])("td",null," 負責人: "+Object(n["P"])(a.myticket["admin_name"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("td",null," Time: "+Object(n["P"])(a.myticket["created_at"]),1)])])]),(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_ticket_contents,(function(t){return Object(n["D"])(),Object(n["i"])("div",{key:t},["customer"===t["owner"]?(Object(n["D"])(),Object(n["i"])("div",Le,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Object(n["j"])("th",null,"回覆內容: "+Object(n["P"])(t["ticket_content"]),1)])])])):(Object(n["D"])(),Object(n["i"])("div",Me,[Object(n["j"])("table",null,[Object(n["j"])("tr",null,[Object(n["j"])("th",null,Object(n["P"])(a.myticket["admin_name"]),1),Object(n["j"])("th",null,Object(n["P"])(t["created_at"]),1)]),Object(n["j"])("tr",null,[Ne,Object(n["j"])("th",null,Object(n["P"])(t["ticket_content"]),1)])])]))])})),128)),"Processed"!==a.myticket["ticket_status"]?(Object(n["D"])(),Object(n["i"])("div",He,[Object(n["W"])(Object(n["j"])("textarea",{name:"message",placeholder:"輸入訊息",id:"message_input",cols:"88","onUpdate:modelValue":e[0]||(e[0]=function(t){return a.input_content=t})},null,512),[[n["T"],a.input_content]]),Object(n["j"])("button",{class:"user-ticket-btn",onClick:e[1]||(e[1]=function(t){return s.responseTicket()})},Fe)])):Object(n["h"])("",!0)])}var Qe={inject:["alltickets","ticketcontent"],methods:{fetchTicket:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/";e+=String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){t.myticket=e["data"],console.log("testtttttttt"),console.log(t.myticket)}))},fetch_all_contents:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents?";e+="ticket_id="+String(this.ticketcontent["ticketid"]),console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),t.all_ticket_contents=e["data"]}))},responseTicket:function(){var t=this;console.log(this.input_content);var e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/contents";console.log(e),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticket_id:this.ticketcontent["ticketid"],ticket_content:this.input_content,owner:"customer"})}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e),alert(e["message"]),t.input_content="",t.reload()}))},reload:function(){console.log("reload"),setTimeout(this.fetch_all_contents(),3e3)}},data:function(){return{myticket:{},input_content:"",all_ticket_contents:{}}},created:function(){this.fetchTicket(),this.fetch_all_contents()}};c("6519");const Be=f()(Qe,[["render",Xe],["__scopeId","data-v-ccd2351a"]]);var Ke=Be,Ye=function(t){return Object(n["G"])("data-v-b83a5ee0"),t=t(),Object(n["E"])(),t},Ze={class:"tickets-table"},tc={class:"tickets-table-left"},ec=Ye((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-left-tr"},"待處理")],-1)})),cc=["onClick"],nc={class:"user-table-td1","data-label":"Job Id"},ic={class:"tickets-table-right"},ac=Ye((function(){return Object(n["j"])("li",{class:"table-header"},[Object(n["j"])("div",{class:"tickets-table-right-tr"},"已處理")],-1)})),sc=["onClick"],oc={class:"user-table-td1","data-label":"Job Id"};function rc(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",Ze,[Object(n["j"])("div",tc,[ec,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["customer_doing"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",nc,Object(n["P"])(t.ticket_title),1)],8,cc)})),128))]),Object(n["j"])("div",ic,[ac,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(s.alltickets["done"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"table-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",oc,Object(n["P"])(t.ticket_title),1)],8,sc)})),128))])])}var lc={inject:["alltickets"],data:function(){return{doing:[],done:[]}},methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")}},mounted:function(){}};c("18e0");const uc=f()(lc,[["render",rc],["__scopeId","data-v-b83a5ee0"]]);var dc=uc,bc=function(t){return Object(n["G"])("data-v-c902abc2"),t=t(),Object(n["E"])(),t},jc=bc((function(){return Object(n["j"])("a",null,[Object(n["j"])("p",null,"新增工程師"),Object(n["j"])("p",null,"帳號"),Object(n["j"])("input",{type:"text"}),Object(n["j"])("p",null,"密碼"),Object(n["j"])("input",{type:"password"}),Object(n["j"])("div",{class:"submit"},[Object(n["j"])("input",{type:"submit",value:"確認",id:"form"})])],-1)})),pc=[jc];function hc(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",null,pc)}var fc={};c("b78d");const Oc=f()(fc,[["render",hc],["__scopeId","data-v-c902abc2"]]);var kc=Oc,mc=function(t){return Object(n["G"])("data-v-9c660daa"),t=t(),Object(n["E"])(),t},_c={class:"dispatch-table"},vc=Object(n["k"])('<div data-v-9c660daa> 未配單 </div><div class="dispatch-table-row1" data-v-9c660daa><div class="dispatch-table-th1" data-v-9c660daa>ticket title</div><div class="dispatch-table-th2" data-v-9c660daa>deadline</div><div class="dispatch-table-th3" data-v-9c660daa>負責人</div><div class="dispatch-table-th4" data-v-9c660daa></div></div>',2),gc={class:"dispatch-table-td1"},yc={class:"dispatch-table-td2"},wc={class:"dispatch-table-td3"},Tc={class:"engineer-select"},Pc=["onUpdate:modelValue","onInput"],Dc={id:"cityname"},Cc=mc((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),Sc=["value"],xc={class:"dispatch-table-td4"},Ec=["onClick"],Ac=Object(n["k"])('<div data-v-9c660daa> 已配單 </div><div class="dispatch-table-row1" data-v-9c660daa><div class="dispatch-table-th1" data-v-9c660daa>ticket title</div><div class="dispatch-table-th2" data-v-9c660daa>deadline</div><div class="dispatch-table-th3" data-v-9c660daa>負責人</div><div class="dispatch-table-th4" data-v-9c660daa></div><div class="dispatch-table-th4" data-v-9c660daa></div></div>',2),Uc={class:"dispatch-table-td1"},Ic={class:"dispatch-table-td2"},Jc={class:"dispatch-table-td3"},Rc={class:"engineer-select"},Vc=["onUpdate:modelValue","onInput"],Gc={id:"cityname"},zc=mc((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),$c=["value"],Wc={class:"dispatch-table-td4"},Lc=["onClick"],Mc={class:"dispatch-table-td4"},Nc=["onClick"],Hc=Object(n["k"])('<div data-v-9c660daa> 已完成 </div><div class="dispatch-table-row1" data-v-9c660daa><div class="dispatch-table-th1" data-v-9c660daa>ticket title</div><div class="dispatch-table-th2" data-v-9c660daa>deadline</div><div class="dispatch-table-th3" data-v-9c660daa>負責人</div><div class="dispatch-table-th4" data-v-9c660daa></div></div>',2),qc={class:"dispatch-table-td1"},Fc={class:"dispatch-table-td2"},Xc={class:"dispatch-table-td3"},Qc={class:"engineer-select"},Bc=["onUpdate:modelValue","onInput"],Kc={id:"cityname"},Yc=mc((function(){return Object(n["j"])("option",{value:""},"請選擇負責人",-1)})),Zc=["value"],tn={class:"dispatch-table-td4"},en=["onClick"];function cn(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",_c,[vc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["not_proccess"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",gc,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",yc,Object(n["P"])(t.created_at),1),Object(n["j"])("div",wc,[Object(n["j"])("div",Tc,[Object(n["W"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return s.get_engineer_id(e,t.selected,"not_proccess")}},null,40,Pc),[[n["T"],t.selected]]),Object(n["j"])("datalist",Dc,[Cc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,Sc)})),128))])])]),Object(n["j"])("div",xc,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,Ec)])])})),128)),Ac,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessing"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",Uc,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",Ic,Object(n["P"])(t.created_at),1),Object(n["j"])("div",Jc,[Object(n["j"])("div",Rc,[Object(n["l"])(" 現在負責人: "+Object(n["P"])(t.admin_name)+" ",1),Object(n["W"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return s.get_engineer_id(e,t.selected,"proccessing")}},null,40,Vc),[[n["T"],t.selected]]),Object(n["j"])("datalist",Gc,[zc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,$c)})),128))])])]),Object(n["j"])("div",Wc,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,Lc)]),Object(n["j"])("div",Mc,[Object(n["j"])("input",{value:"Sucess",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processed")}},null,8,Nc)])])})),128)),Hc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessed"],(function(t,e){return Object(n["D"])(),Object(n["i"])("div",{class:"dispatch-table-row2",key:t},[Object(n["j"])("div",qc,Object(n["P"])(t.ticket_title),1),Object(n["j"])("div",Fc,Object(n["P"])(t.created_at),1),Object(n["j"])("div",Xc,[Object(n["j"])("div",Qc,[Object(n["l"])(" 現在負責人: "+Object(n["P"])(t.admin_name)+" ",1),Object(n["W"])(Object(n["j"])("input",{type:"text",name:"city",list:"cityname","onUpdate:modelValue":function(e){return t.selected=e},onInput:function(c){return s.get_engineer_id(e,t.selected,"proccessed")}},null,40,Bc),[[n["T"],t.selected]]),Object(n["j"])("datalist",Kc,[Yc,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.allEngineers,(function(t){return Object(n["D"])(),Object(n["i"])("option",{key:t,value:t.admin_name},Object(n["P"])(t.admin_name),9,Zc)})),128))])])]),Object(n["j"])("div",tn,[Object(n["j"])("input",{value:"Send",type:"submit",onClick:function(e){return s.dispatch_ticket(t.selected_id,t.ticket_id,"Processing")}},null,8,en)])])})),128))])}var nn=c("b85c"),an={data:function(){return{oneTicket:{},allEngineers:[],selected:"",temp_select_id:0,every_tickets:{not_proccess:[],proccessing:[],proccessed:[]},tickets_page:"0"}},inject:["alltickets"],methods:{dispatch_ticket:function(t,e,c){var n=this;if(void 0===t||""===e||""===c)return alert("請選擇負責人"),!1;console.log(t),console.log(e),console.log(c);var i="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets/assign";console.log(i),fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({admin_id:t,ticket_id:e,ticket_status:c})}).then((function(t){if(t.ok)return t.json()})).then((function(t){console.log(t),alert(t["data"]["message"]),n.reload()}))},find_engineer:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/users?role=Engineer",console.log(c),e.next=4,fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e["data"]),t.allEngineers=t.allEngineers.concat(e["data"])}));case 4:return e.next=6,t.find_engineer_supervisor();case 6:case"end":return e.stop()}}),e)})))()},find_engineer_supervisor:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/users?role=Engineer Supervisor";console.log(e),fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){console.log(e["data"]),t.allEngineers=t.allEngineers.concat(e["data"])}))},get_engineer_id:function(t,e,c){var n,i=Object(nn["a"])(this.allEngineers);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.admin_name===e&&(this.every_tickets[c][t].selected_id=a.admin_id,console.log(this.every_tickets[c][t].selected_id))}}catch(s){i.e(s)}finally{i.f()}},getAlltickets:function(){var t=this,e="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets?page="+this.tickets_page+"&status=all&user_id=0&role=0";fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(e){var c,n=Object(nn["a"])(e["data"]);try{for(n.s();!(c=n.n()).done;){var i=c.value;"Not Processed"===i["ticket_status"]?t.every_tickets["not_proccess"].push(i):"Processing"===i["ticket_status"]?t.every_tickets["proccessing"].push(i):"Processed"===i["ticket_status"]&&t.every_tickets["proccessed"].push(i)}}catch(a){n.e(a)}finally{n.f()}}))},reload:function(){this.every_tickets={not_proccess:[],proccessing:[],proccessed:[]},setTimeout(this.getAlltickets(),3e3)}},created:function(){this.find_engineer(),this.find_engineer_supervisor(),this.getAlltickets()}};c("d8a1");const sn=f()(an,[["render",cn],["__scopeId","data-v-9c660daa"]]);var on=sn,rn=function(t){return Object(n["G"])("data-v-25501006"),t=t(),Object(n["E"])(),t},ln={class:"thomas-all"},un={id:"deadline-table",class:"thomas-right"},dn=rn((function(){return Object(n["j"])("li",{class:"deadline-header"},[Object(n["j"])("div",{class:"deadline-tr"},"歷史清單"),Object(n["j"])("div",{class:"deadline -tr"},"Created At")],-1)})),bn=["onClick"],jn={class:"deadline-td1"},pn={class:"deadline-td2"},hn={class:"thomas-left"},fn={class:"pagination"},On=rn((function(){return Object(n["j"])("li",null,[Object(n["j"])("a",{href:"#/home/history_ticket"},"«")],-1)})),kn=["onClick"],mn={href:"#/home/history_ticket"},_n=rn((function(){return Object(n["j"])("li",null,[Object(n["j"])("a",{href:"#/home/history_ticket"},"»")],-1)}));function vn(t,e,c,i,a,s){return Object(n["D"])(),Object(n["i"])("div",ln,[Object(n["j"])("div",un,[dn,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.every_tickets["proccessed"],(function(t){return Object(n["D"])(),Object(n["i"])("li",{class:"deadline-row",key:t,onClick:function(e){return s.viewTicket(t["ticket_id"],t["ticket_title"],t["admin_id"])}},[Object(n["j"])("div",jn,Object(n["P"])(t["ticket_title"]),1),Object(n["j"])("div",pn,Object(n["P"])(t["created_at"]),1)],8,bn)})),128))]),Object(n["j"])("div",hn,[Object(n["j"])("ul",fn,[On,(Object(n["D"])(!0),Object(n["i"])(n["b"],null,Object(n["J"])(a.all_page+1,(function(t){return Object(n["D"])(),Object(n["i"])("li",{key:t,onClick:function(e){return s.change_page(t)}},[Object(n["j"])("a",mn,Object(n["P"])(t),1)],8,kn)})),128)),_n])])])}var gn={emits:["all_ticket_contents"],data:function(){return{oneTicket:{},tickets_page:0,every_tickets:{not_proccess:[],proccessing:[],proccessed:[]},all_page:0,page_class:""}},inject:["alltickets"],methods:{viewTicket:function(t,e,c){this.$emit("all_ticket_contents",t,e,c),this.$router.push("/userhome/tickets")},get_All_history_ticket:function(t){var e=this,c="https://kdmm5wrtrb.execute-api.us-west-2.amazonaws.com/dev/api/tickets?page="+String(t)+"&status=all&user_id=0&role=0";fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(t){var c,n=Object(nn["a"])(t["data"]);try{for(n.s();!(c=n.n()).done;){var i=c.value;"Not Processed"===i["ticket_status"]?e.every_tickets["not_proccess"].push(i):"Processing"===i["ticket_status"]?e.every_tickets["proccessing"].push(i):"Processed"===i["ticket_status"]&&e.every_tickets["proccessed"].push(i)}}catch(a){n.e(a)}finally{n.f()}console.log(t),e.all_page=t["total_page"],console.log(e.all_page)}))},change_page:function(t){this.get_All_history_ticket(t)}},created:function(){this.get_All_history_ticket(0)}};c("0d5a");const yn=f()(gn,[["render",vn],["__scopeId","data-v-25501006"]]);var wn=yn,Tn=Object(a["a"])({history:Object(a["b"])(""),routes:[{path:"/",component:W,alias:"/login"},{path:"/home",component:dt,props:function(t){return t.params},children:[{path:"",component:wt},{path:"tickets_table",component:Ge},{path:"tickets",component:Yt},{path:"history_ticket",component:wn},{path:"settings",component:me},{path:"manage",component:we},{path:"admin_create_engineer",component:kc},{path:"admin_dispatch_ticket",component:on}]},{path:"/userhome",component:dt,props:function(t){return t.params},children:[{path:"",component:zt},{path:"tickets_table",component:dc},{path:"create_form",component:ue},{path:"tickets",component:Ke},{path:"settings",component:me}]},{path:"/NotFound(.*)",redirect:"/"}]}),Pn=Object(n["f"])(y),Dn=Object(i["a"])({modules:{},state:function(){return{}}});Pn.use(w["a"]),Pn.use(Tn),T["default"].configure(D),Pn.config.productionTip=!1,Pn.use(Dn),Pn.mount("#frameapp")},6519:function(t,e,c){"use strict";c("7f81")},"6efb":function(t,e,c){},7334:function(t,e,c){},"78a1":function(t,e,c){},"7a6a":function(t,e,c){"use strict";c("f6d3")},"7f81":function(t,e,c){},"8afe":function(t,e,c){"use strict";c("a730")},"8d2e":function(t,e,c){},a5bf:function(t,e,c){"use strict";c("f7b2")},a730:function(t,e,c){},b0c3:function(t,e,c){},b501:function(t,e,c){},b78d:function(t,e,c){"use strict";c("b0c3")},b7fa:function(t,e,c){},c33d:function(t,e,c){"use strict";c("78a1")},d8a1:function(t,e,c){"use strict";c("7334")},d8e0:function(t,e,c){"use strict";c("8d2e")},da7b:function(t,e,c){"use strict";c("b7fa")},f328:function(t,e,c){},f39b:function(t,e,c){"use strict";c("6efb")},f6d3:function(t,e,c){},f7b2:function(t,e,c){},fad1:function(t,e,c){},fd76:function(t,e,c){"use strict";c("b501")}});
//# sourceMappingURL=app.9b56aee1.js.map